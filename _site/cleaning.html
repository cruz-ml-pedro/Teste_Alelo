<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Teste_Alelo - Cleaning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Teste_Alelo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">index</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./cleaning.html" rel="" target="" aria-current="page">
 <span class="menu-text">Cleaning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./clustering.html" rel="" target="">
 <span class="menu-text">Clustering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./classification.html" rel="" target="">
 <span class="menu-text">Classificação</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./regression.html" rel="" target="">
 <span class="menu-text">Regressão</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./bonus.html" rel="" target="">
 <span class="menu-text">Bônus</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#super-heros-dataset---limpeza" id="toc-super-heros-dataset---limpeza" class="nav-link active" data-scroll-target="#super-heros-dataset---limpeza">Super Heros Dataset - Limpeza</a>
  <ul class="collapse">
  <li><a href="#carregando-e-avaliando-os-dados" id="toc-carregando-e-avaliando-os-dados" class="nav-link" data-scroll-target="#carregando-e-avaliando-os-dados">Carregando e avaliando os dados</a>
  <ul class="collapse">
  <li><a href="#limpando-os-dados-heroes_information" id="toc-limpando-os-dados-heroes_information" class="nav-link" data-scroll-target="#limpando-os-dados-heroes_information">Limpando os dados heroes_information</a></li>
  <li><a href="#criando-novas-variáveis---heroes_information" id="toc-criando-novas-variáveis---heroes_information" class="nav-link" data-scroll-target="#criando-novas-variáveis---heroes_information">Criando novas variáveis - heroes_information</a></li>
  <li><a href="#limpando-os-dados-super_hero_powers" id="toc-limpando-os-dados-super_hero_powers" class="nav-link" data-scroll-target="#limpando-os-dados-super_hero_powers">Limpando os dados super_hero_powers</a></li>
  <li><a href="#criando-novas-variáveis---heroes_information-1" id="toc-criando-novas-variáveis---heroes_information-1" class="nav-link" data-scroll-target="#criando-novas-variáveis---heroes_information-1">Criando novas variáveis - heroes_information</a></li>
  </ul></li>
  <li><a href="#combinando-os-dados" id="toc-combinando-os-dados" class="nav-link" data-scroll-target="#combinando-os-dados">Combinando os dados</a></li>
  <li><a href="#º-eda" id="toc-º-eda" class="nav-link" data-scroll-target="#º-eda">1º EDA</a>
  <ul class="collapse">
  <li><a href="#remoção-de-valores-atípicos." id="toc-remoção-de-valores-atípicos." class="nav-link" data-scroll-target="#remoção-de-valores-atípicos.">Remoção de valores atípicos.</a></li>
  <li><a href="#verificando-a-correlação" id="toc-verificando-a-correlação" class="nav-link" data-scroll-target="#verificando-a-correlação">Verificando a correlação</a></li>
  </ul></li>
  <li><a href="#salvando-os-dados" id="toc-salvando-os-dados" class="nav-link" data-scroll-target="#salvando-os-dados">Salvando os dados</a></li>
  <li><a href="#principais-pontos" id="toc-principais-pontos" class="nav-link" data-scroll-target="#principais-pontos">Principais pontos:</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cleaning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="super-heros-dataset---limpeza" class="level1">
<h1>Super Heros Dataset - Limpeza</h1>
<p>Antes de iniciar as tarefas propostas, vou realizar uma série de verificações em relação à qualidade dos dados.</p>
<p>Vamos começar carregando os pacotes necessários e padronizando alguns aspectos da saída do documento, como o tamanho das figuras e as opções de formatação dos trechos de código. Em seguida vou carregar os dados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, janitor, DataExplorer,readr, knitr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">cache =</span> <span class="cn">TRUE</span>, <span class="at">cache.lazy =</span> <span class="cn">FALSE</span>, <span class="at">warning =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">message =</span> <span class="cn">FALSE</span>, <span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">dpi =</span> <span class="dv">180</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">fig.width =</span> <span class="dv">8</span>, <span class="at">fig.height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="carregando-e-avaliando-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="carregando-e-avaliando-os-dados">Carregando e avaliando os dados</h2>
<p>Optei por baixar os dados e salvá-los na pasta do projeto, eliminando assim a necessidade de informar um caminho específico até eles.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-2_421f15dd1d9e113d3928cc9cd7db5d40">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>heroes_information <span class="ot">&lt;-</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"heroes_information.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>super_hero_powers <span class="ot">&lt;-</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"super_hero_powers.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Uma vez carregados, vou visualizar algumas informações básicas dos dados. Começarei com o conjunto de dados <code>heroes_information</code>.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-3_303c89195721ddb3cf0f7032220778d7">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(heroes_information)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
   ...1 name          Gender `Eye color` Race      `Hair color` Height Publisher
  &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    
1     0 A-Bomb        Male   yellow      Human     No Hair         203 Marvel C…
2     1 Abe Sapien    Male   blue        Icthyo S… No Hair         191 Dark Hor…
3     2 Abin Sur      Male   blue        Ungaran   No Hair         185 DC Comics
4     3 Abomination   Male   green       Human / … No Hair         203 Marvel C…
5     4 Abraxas       Male   blue        Cosmic E… Black           -99 Marvel C…
6     5 Absorbing Man Male   blue        Human     No Hair         193 Marvel C…
# ℹ 3 more variables: `Skin color` &lt;chr&gt;, Alignment &lt;chr&gt;, Weight &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">summary</span>(heroes_information))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      ...1           name              Gender           Eye color        
 Min.   :  0.0   Length:734         Length:734         Length:734        
 1st Qu.:183.2   Class :character   Class :character   Class :character  
 Median :366.5   Mode  :character   Mode  :character   Mode  :character  
 Mean   :366.5                                                           
 3rd Qu.:549.8                                                           
 Max.   :733.0                                                           
     Race            Hair color            Height       Publisher        
 Length:734         Length:734         Min.   :-99.0   Length:734        
 Class :character   Class :character   1st Qu.:-99.0   Class :character  
 Mode  :character   Mode  :character   Median :175.0   Mode  :character  
                                       Mean   :102.3                     
                                       3rd Qu.:185.0                     
                                       Max.   :975.0                     
  Skin color         Alignment             Weight      
 Length:734         Length:734         Min.   :-99.00  
 Class :character   Class :character   1st Qu.:-99.00  
 Mode  :character   Mode  :character   Median : 62.00  
                                       Mean   : 43.86  
                                       3rd Qu.: 90.00  
                                       Max.   :900.00  </code></pre>
</div>
</div>
<p>O conjunto de dados “heroes_information” possui tanto variáveis categóricas como numéricas. No entanto, é possível observar que a classe das variáveis está definida como “character” e há valores faltantes, tanto em variáveis categóricas quanto numéricas.</p>
<p>Os valores faltantes nos dados numéricos são indicados por -99 e NA. Dado que valores negativos não fazem sentido no contexto dos dados, a presença do valor -99 indica de fato a ausência de valor, da mesma forma que o NA. Portanto, ambos os valores, -99 e NA, indicam que os dados numéricos estão incompletos.</p>
<p>As variáveis categóricas têm seus valores faltantes representados por “-”, com exceção da coluna “Publisher”, que contém NA para os valores ausentes.</p>
<p>Agora, vamos abordar esses pontos.</p>
<section id="limpando-os-dados-heroes_information" class="level3">
<h3 class="anchored" data-anchor-id="limpando-os-dados-heroes_information">Limpando os dados heroes_information</h3>
<p>Abaixo, realizaremos as seguintes ações: remover a primeira coluna, substituir -99 e - por NA e converter as colunas da classe “character” para “factor”.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-4_9fe44bfee22597d5211ddac287cf4f7a">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>heroes_information <span class="ot">&lt;-</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  heroes_information <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">where</span>(is.double), <span class="sc">~</span> <span class="fu">if_else</span>(. <span class="sc">==</span> <span class="sc">-</span><span class="dv">99</span>, <span class="cn">NA_real_</span>, .)),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">if_else</span>(. <span class="sc">==</span> <span class="st">"-"</span>, <span class="cn">NA</span>, .)),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">where</span>(is.character), as.factor),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">as.character</span>(name)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vou verificar a existência de duplicatas e, caso existam, removê-las.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-5_d5ff39565a6c481bae4bdf7f9c037e76">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>heroes_information <span class="ot">&lt;-</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  heroes_information <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">duplicated</span>(name))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(heroes_information)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 10
  name   gender eye_color race  hair_color height publisher skin_color alignment
  &lt;chr&gt;  &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;    
1 A-Bomb Male   yellow    Human No Hair       203 Marvel C… &lt;NA&gt;       good     
2 Abe S… Male   blue      Icth… No Hair       191 Dark Hor… blue       good     
3 Abin … Male   blue      Unga… No Hair       185 DC Comics red        good     
4 Abomi… Male   green     Huma… No Hair       203 Marvel C… &lt;NA&gt;       bad      
5 Abrax… Male   blue      Cosm… Black          NA Marvel C… &lt;NA&gt;       bad      
6 Absor… Male   blue      Human No Hair       193 Marvel C… &lt;NA&gt;       bad      
# ℹ 1 more variable: weight &lt;dbl&gt;</code></pre>
</div>
</div>
<p>19 linhas foram removidas.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-6_5b43d3d12b9147cbb6c5f821d13d566d">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">summary</span>(heroes_information))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name              gender      eye_color                  race    
 Length:715         Female:196   blue   :220   Human            :199  
 Class :character   Male  :491   brown  :125   Mutant           : 63  
 Mode  :character   NA's  : 28   green  : 71   God / Eternal    : 13  
                                 red    : 45   Cyborg           : 11  
                                 black  : 22   Human / Radiation: 11  
                                 (Other): 67   (Other)          :118  
   hair_color      height                  publisher     skin_color 
 Black  :154   Min.   : 15.2   Marvel Comics    :379   green  : 21  
 Blond  : 97   1st Qu.:173.5   DC Comics        :206   blue   :  9  
 Brown  : 82   Median :183.0   NBC - Heroes     : 19   red    :  9  
 No Hair: 75   Mean   :186.9   Dark Horse Comics: 17   white  :  7  
 Red    : 49   3rd Qu.:190.2   George Lucas     : 14   grey   :  5  
 (Other): 92   Max.   :975.0   (Other)          : 65   (Other): 20  
   alignment       weight     
 bad    :205   Min.   :  2.0  
 good   :479   1st Qu.: 61.0  
 neutral: 24   Median : 81.0  
 NA's   :  7   Mean   :112.9  
               3rd Qu.:108.0  
               Max.   :900.0  </code></pre>
</div>
</div>
<p>Com exceção das colunas “alignment”, “publisher” e “gender”, todas as outras variáveis possuem um grande número de valores ausentes.</p>
<p>Existem classes que estão separadas devido a erros ortográficos e de digitação, como “Black Hair” e “black hair”. No entanto, isso ocorre em classes com baixíssima frequência de ocorrência e provavelmente serão agrupadas em algum momento. Por enquanto, não vou realizar modificações nesse aspecto.</p>
<p>A coluna “skin_color” praticamente não possui registros, com mais de 50% de ausências, e será descartada.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-7_46add78d3c1a535d1f5b0b5619e2352e">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>heroes_information <span class="ot">&lt;-</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  heroes_information <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>skin_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>vamos verificar se existêm linhas problemáticas e remove-las</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-8_f2a5b45c593d67c591038065ada11137">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Porcentagem de valores faltantes permitida (50%)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>limite_faltantes <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Função para verificar porcentagem de valores faltantes em uma linha</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>porcentagem_faltantes <span class="ot">&lt;-</span> <span class="cf">function</span>(linha) {</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>(<span class="fu">is.na</span>(linha)) <span class="sc">/</span> <span class="fu">length</span>(linha)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar e remover linhas com mais de 50% de valores faltantes</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>heroes_information <span class="ot">&lt;-</span> heroes_information <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">porcentagem_faltantes</span>(row) <span class="sc">&lt;=</span> limite_faltantes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Aparentemente, nenhuma linha possui mais do que 50% de informações ausentes.</p>
<p>Os demais problemas desse conjunto de dados serão tratados posteriormente, dependendo do tipo de tarefa que será realizada.</p>
<p>Os principais problemas desse conjunto até agora foram:</p>
<ul>
<li>Muitos valores ausentes</li>
<li>Classes desbalanceadas</li>
</ul>
<p>Antes de prosseguir para as visualizações, vou criar algumas variáveis que possam ser úteis para as tarefas solicitadas.</p>
</section>
<section id="criando-novas-variáveis---heroes_information" class="level3">
<h3 class="anchored" data-anchor-id="criando-novas-variáveis---heroes_information">Criando novas variáveis - heroes_information</h3>
<p>Neste momento, vou criar um índice de massa corporal (IMC) e 6 categorias relacionadas a esse índice. Isso me permitirá avaliar o quão “fit” os personagens estão.</p>
<p>É importante notar que essas novas variáveis também serão influenciadas pelos problemas descritos anteriormente.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-9_e8f8ec8947995cca48447afdf461bc2c">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>heroes_information <span class="ot">&lt;-</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  heroes_information <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">imc =</span> <span class="fu">round</span>(weight<span class="sc">/</span>((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>),<span class="at">digits=</span><span class="dv">1</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">categoria_imc =</span> <span class="fu">case_when</span>(</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                    imc <span class="sc">&lt;</span> <span class="fl">18.5</span> <span class="sc">~</span> <span class="st">"Abaixo do peso"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>                    imc <span class="sc">&gt;=</span> <span class="fl">18.5</span> <span class="sc">&amp;</span> imc <span class="sc">&lt;=</span> <span class="fl">24.9</span> <span class="sc">~</span> <span class="st">"Peso normal"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>                    imc <span class="sc">&gt;=</span> <span class="dv">25</span> <span class="sc">&amp;</span> imc <span class="sc">&lt;=</span> <span class="fl">29.9</span> <span class="sc">~</span> <span class="st">"Sobrepeso"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>                    imc <span class="sc">&gt;=</span> <span class="dv">30</span> <span class="sc">&amp;</span> imc <span class="sc">&lt;=</span> <span class="fl">34.9</span> <span class="sc">~</span> <span class="st">"Obesidade I"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>                    imc <span class="sc">&gt;=</span> <span class="dv">35</span> <span class="sc">&amp;</span> imc <span class="sc">&lt;=</span> <span class="fl">39.9</span> <span class="sc">~</span> <span class="st">"Obesidade II"</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>                    imc <span class="sc">&gt;=</span> <span class="dv">40</span> <span class="sc">~</span> <span class="st">"Obesidade III"</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="limpando-os-dados-super_hero_powers" class="level3">
<h3 class="anchored" data-anchor-id="limpando-os-dados-super_hero_powers">Limpando os dados super_hero_powers</h3>
<p>Agora, vou dar uma olhada no segundo conjunto de dados.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-10_0ab1dae8a3cb36be821158b0cc6cbe7f">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(super_hero_powers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 168
  hero_names  Agility `Accelerated Healing` `Lantern Power Ring`
  &lt;chr&gt;       &lt;lgl&gt;   &lt;lgl&gt;                 &lt;lgl&gt;               
1 3-D Man     TRUE    FALSE                 FALSE               
2 A-Bomb      FALSE   TRUE                  FALSE               
3 Abe Sapien  TRUE    TRUE                  FALSE               
4 Abin Sur    FALSE   FALSE                 TRUE                
5 Abomination FALSE   TRUE                  FALSE               
6 Abraxas     FALSE   FALSE                 FALSE               
# ℹ 164 more variables: `Dimensional Awareness` &lt;lgl&gt;, `Cold Resistance` &lt;lgl&gt;,
#   Durability &lt;lgl&gt;, Stealth &lt;lgl&gt;, `Energy Absorption` &lt;lgl&gt;, Flight &lt;lgl&gt;,
#   `Danger Sense` &lt;lgl&gt;, `Underwater breathing` &lt;lgl&gt;, Marksmanship &lt;lgl&gt;,
#   `Weapons Master` &lt;lgl&gt;, `Power Augmentation` &lt;lgl&gt;,
#   `Animal Attributes` &lt;lgl&gt;, Longevity &lt;lgl&gt;, Intelligence &lt;lgl&gt;,
#   `Super Strength` &lt;lgl&gt;, Cryokinesis &lt;lgl&gt;, Telepathy &lt;lgl&gt;,
#   `Energy Armor` &lt;lgl&gt;, `Energy Blasts` &lt;lgl&gt;, Duplication &lt;lgl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">summary</span>(super_hero_powers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  hero_names         Agility        Accelerated Healing Lantern Power Ring
 Length:667         Mode :logical   Mode :logical       Mode :logical     
 Class :character   FALSE:425       FALSE:489           FALSE:656         
 Mode  :character   TRUE :242       TRUE :178           TRUE :11          
 Dimensional Awareness Cold Resistance Durability       Stealth       
 Mode :logical         Mode :logical   Mode :logical   Mode :logical  
 FALSE:642             FALSE:620       FALSE:410       FALSE:541      
 TRUE :25              TRUE :47        TRUE :257       TRUE :126      
 Energy Absorption   Flight        Danger Sense    Underwater breathing
 Mode :logical     Mode :logical   Mode :logical   Mode :logical       
 FALSE:590         FALSE:455       FALSE:637       FALSE:646           
 TRUE :77          TRUE :212       TRUE :30        TRUE :21            
 Marksmanship    Weapons Master  Power Augmentation Animal Attributes
 Mode :logical   Mode :logical   Mode :logical      Mode :logical    
 FALSE:548       FALSE:562       FALSE:659          FALSE:642        
 TRUE :119       TRUE :105       TRUE :8            TRUE :25         
 Longevity       Intelligence    Super Strength  Cryokinesis    
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:554       FALSE:509       FALSE:307       FALSE:648      
 TRUE :113       TRUE :158       TRUE :360       TRUE :19       
 Telepathy       Energy Armor    Energy Blasts   Duplication    
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:575       FALSE:659       FALSE:520       FALSE:651      
 TRUE :92        TRUE :8         TRUE :147       TRUE :16       
 Size Changing   Density Control  Stamina        Astral Travel  
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:612       FALSE:652       FALSE:378       FALSE:663      
 TRUE :55        TRUE :15        TRUE :289       TRUE :4        
 Audio Control   Dexterity        Omnitrix       Super Speed    
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:660       FALSE:661       FALSE:666       FALSE:418      
 TRUE :7         TRUE :6         TRUE :1         TRUE :249      
 Possession      Animal Oriented Powers Weapon-based Powers Electrokinesis 
 Mode :logical   Mode :logical          Mode :logical       Mode :logical  
 FALSE:659       FALSE:627              FALSE:609           FALSE:645      
 TRUE :8         TRUE :40               TRUE :58            TRUE :22       
 Darkforce Manipulation Death Touch     Teleportation   Enhanced Senses
 Mode :logical          Mode :logical   Mode :logical   Mode :logical  
 FALSE:657              FALSE:660       FALSE:595       FALSE:578      
 TRUE :10               TRUE :7         TRUE :72        TRUE :89       
 Telekinesis     Energy Beams      Magic         Hyperkinesis   
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:606       FALSE:625       FALSE:623       FALSE:666      
 TRUE :61        TRUE :42        TRUE :44        TRUE :1        
    Jump         Clairvoyance    Dimensional Travel Power Sense    
 Mode :logical   Mode :logical   Mode :logical      Mode :logical  
 FALSE:602       FALSE:663       FALSE:644          FALSE:664      
 TRUE :65        TRUE :4         TRUE :23           TRUE :3        
 Shapeshifting   Peak Human Condition Immortality     Camouflage     
 Mode :logical   Mode :logical        Mode :logical   Mode :logical  
 FALSE:601       FALSE:637            FALSE:598       FALSE:646      
 TRUE :66        TRUE :30             TRUE :69        TRUE :21       
 Element Control  Phasing        Astral Projection Electrical Transport
 Mode :logical   Mode :logical   Mode :logical     Mode :logical       
 FALSE:659       FALSE:636       FALSE:638         FALSE:666           
 TRUE :8         TRUE :31        TRUE :29          TRUE :1             
 Fire Control    Projection      Summoning       Enhanced Memory
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:635       FALSE:665       FALSE:663       FALSE:642      
 TRUE :32        TRUE :2         TRUE :4         TRUE :25       
  Reflexes       Invulnerability Energy Constructs Force Fields   
 Mode :logical   Mode :logical   Mode :logical     Mode :logical  
 FALSE:503       FALSE:550       FALSE:629         FALSE:581      
 TRUE :164       TRUE :117       TRUE :38          TRUE :86       
 Self-Sustenance Anti-Gravity     Empathy        Power Nullifier
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:630       FALSE:666       FALSE:648       FALSE:663      
 TRUE :37        TRUE :1         TRUE :19        TRUE :4        
 Radiation Control Psionic Powers  Elasticity      Substance Secretion
 Mode :logical     Mode :logical   Mode :logical   Mode :logical      
 FALSE:660         FALSE:618       FALSE:656       FALSE:650          
 TRUE :7           TRUE :49        TRUE :11        TRUE :17           
 Elemental Transmogrification Technopath/Cyberpath Photographic Reflexes
 Mode :logical                Mode :logical        Mode :logical        
 FALSE:661                    FALSE:644            FALSE:664            
 TRUE :6                      TRUE :23             TRUE :3              
 Seismic Power   Animation       Precognition    Mind Control   
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:664       FALSE:662       FALSE:645       FALSE:645      
 TRUE :3         TRUE :5         TRUE :22        TRUE :22       
 Fire Resistance Power Absorption Enhanced Hearing Nova Force     
 Mode :logical   Mode :logical    Mode :logical    Mode :logical  
 FALSE:649       FALSE:655        FALSE:595        FALSE:665      
 TRUE :18        TRUE :12         TRUE :72         TRUE :2        
  Insanity       Hypnokinesis    Animal Control  Natural Armor  
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:662       FALSE:644       FALSE:658       FALSE:631      
 TRUE :5         TRUE :23        TRUE :9         TRUE :36       
 Intangibility   Enhanced Sight  Molecular Manipulation Heat Generation
 Mode :logical   Mode :logical   Mode :logical          Mode :logical  
 FALSE:647       FALSE:642       FALSE:625              FALSE:643      
 TRUE :20        TRUE :25        TRUE :42               TRUE :24       
 Adaptation       Gliding        Power Suit      Mind Blast     
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:662       FALSE:657       FALSE:634       FALSE:655      
 TRUE :5         TRUE :10        TRUE :33        TRUE :12       
 Probability Manipulation Gravity Control Regeneration    Light Control  
 Mode :logical            Mode :logical   Mode :logical   Mode :logical  
 FALSE:658                FALSE:651       FALSE:639       FALSE:652      
 TRUE :9                  TRUE :16        TRUE :28        TRUE :15       
 Echolocation    Levitation      Toxin and Disease Control   Banish       
 Mode :logical   Mode :logical   Mode :logical             Mode :logical  
 FALSE:665       FALSE:641       FALSE:657                 FALSE:666      
 TRUE :2         TRUE :26        TRUE :10                  TRUE :1        
 Energy Manipulation Heat Resistance Natural Weapons Time Travel    
 Mode :logical       Mode :logical   Mode :logical   Mode :logical  
 FALSE:615           FALSE:624       FALSE:609       FALSE:634      
 TRUE :52            TRUE :43        TRUE :58        TRUE :33       
 Enhanced Smell  Illusions       Thirstokinesis  Hair Manipulation
 Mode :logical   Mode :logical   Mode :logical   Mode :logical    
 FALSE:635       FALSE:629       FALSE:666       FALSE:666        
 TRUE :32        TRUE :38        TRUE :1         TRUE :1          
 Illumination    Omnipotent       Cloaking       Changing Armor 
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:665       FALSE:660       FALSE:660       FALSE:666      
 TRUE :2         TRUE :7         TRUE :7         TRUE :1        
 Power Cosmic    Biokinesis      Water Control   Radiation Immunity
 Mode :logical   Mode :logical   Mode :logical   Mode :logical     
 FALSE:660       FALSE:666       FALSE:654       FALSE:657         
 TRUE :7         TRUE :1         TRUE :13        TRUE :10          
 Vision - Telescopic Toxin and Disease Resistance Spatial Awareness
 Mode :logical       Mode :logical                Mode :logical    
 FALSE:624           FALSE:619                    FALSE:666        
 TRUE :43            TRUE :48                     TRUE :1          
 Energy Resistance Telepathy Resistance Molecular Combustion Omnilingualism 
 Mode :logical     Mode :logical        Mode :logical        Mode :logical  
 FALSE:660         FALSE:634            FALSE:665            FALSE:646      
 TRUE :7           TRUE :33             TRUE :2              TRUE :21       
 Portal Creation Magnetism       Mind Control Resistance Plant Control  
 Mode :logical   Mode :logical   Mode :logical           Mode :logical  
 FALSE:663       FALSE:656       FALSE:655               FALSE:659      
 TRUE :4         TRUE :11        TRUE :12                TRUE :8        
   Sonar         Sonic Scream    Time Manipulation Enhanced Touch 
 Mode :logical   Mode :logical   Mode :logical     Mode :logical  
 FALSE:663       FALSE:661       FALSE:647         FALSE:660      
 TRUE :4         TRUE :6         TRUE :20          TRUE :7        
 Magic Resistance Invisibility    Sub-Mariner     Radiation Absorption
 Mode :logical    Mode :logical   Mode :logical   Mode :logical       
 FALSE:661        FALSE:645       FALSE:647       FALSE:660           
 TRUE :6          TRUE :22        TRUE :20        TRUE :7             
 Intuitive aptitude Vision - Microscopic  Melting        Wind Control   
 Mode :logical      Mode :logical        Mode :logical   Mode :logical  
 FALSE:666          FALSE:648            FALSE:665       FALSE:664      
 TRUE :1            TRUE :19             TRUE :2         TRUE :3        
 Super Breath    Wallcrawling    Vision - Night  Vision - Infrared
 Mode :logical   Mode :logical   Mode :logical   Mode :logical    
 FALSE:644       FALSE:633       FALSE:633       FALSE:645        
 TRUE :23        TRUE :34        TRUE :34        TRUE :22         
 Grim Reaping    Matter Absorption The Force       Resurrection   
 Mode :logical   Mode :logical     Mode :logical   Mode :logical  
 FALSE:664       FALSE:656         FALSE:661       FALSE:652      
 TRUE :3         TRUE :11          TRUE :6         TRUE :15       
 Terrakinesis    Vision - Heat   Vitakinesis     Radar Sense    
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:665       FALSE:648       FALSE:665       FALSE:661      
 TRUE :2         TRUE :19        TRUE :2         TRUE :6        
 Qwardian Power Ring Weather Control Vision - X-Ray  Vision - Thermal
 Mode :logical       Mode :logical   Mode :logical   Mode :logical   
 FALSE:665           FALSE:659       FALSE:644       FALSE:644       
 TRUE :2             TRUE :8         TRUE :23        TRUE :23        
 Web Creation    Reality Warping Odin Force      Symbiote Costume
 Mode :logical   Mode :logical   Mode :logical   Mode :logical   
 FALSE:653       FALSE:651       FALSE:665       FALSE:658       
 TRUE :14        TRUE :16        TRUE :2         TRUE :9         
 Speed Force     Phoenix Force   Molecular Dissipation Vision - Cryo  
 Mode :logical   Mode :logical   Mode :logical         Mode :logical  
 FALSE:666       FALSE:666       FALSE:666             FALSE:665      
 TRUE :1         TRUE :1         TRUE :1               TRUE :2        
 Omnipresent     Omniscient     
 Mode :logical   Mode :logical  
 FALSE:665       FALSE:665      
 TRUE :2         TRUE :2        </code></pre>
</div>
</div>
<p>O conjunto de dados “super_hero_powers” é composto por variáveis lógicas, e muitas delas!</p>
<p>Nenhuma delas possui valores faltantes. No entanto, diversas colunas apresentam um desbalanceamento considerável.</p>
<p>Vou verificar a presença de duplicatas nos dados.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-11_5825524639165d30520080e945d2c57c">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>super_hero_powers <span class="ot">&lt;-</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  super_hero_powers <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">duplicated</span>(hero_names))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nenhuma linha foi removida.</p>
<p>Como observamos, nenhuma delas possui valores ausentes, eliminando a necessidade de verificar linhas problemáticas, exceto por duplicatas.</p>
</section>
<section id="criando-novas-variáveis---heroes_information-1" class="level3">
<h3 class="anchored" data-anchor-id="criando-novas-variáveis---heroes_information-1">Criando novas variáveis - heroes_information</h3>
<p>Agora, irei criar uma variável que represente a quantidade de poderes que cada personagem possui.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-12_1761e3dfb6f5e6b064bc905f78023e6b">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>super_hero_powers <span class="ot">&lt;-</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  super_hero_powers <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_poderes =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.logical)))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Como mencionei, há um grande número de colunas e várias delas apresentam baixa frequência relativa. Essa situação pode levar a problemas na interpretação dos resultados, na precisão dos modelos e nas métricas de avaliação. Portanto, irei agrupar todas as variáveis que possuam uma distribuição altamente desequilibrada (10%).</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-13_bddb82a53eb4a0b68b4097514b7786d3">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Função para calcular frequência relativa de TRUE</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>frequencia_true <span class="ot">&lt;-</span> <span class="cf">function</span>(coluna) {</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>(coluna) <span class="sc">/</span> <span class="fu">length</span>(coluna)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar colunas com frequência relativa de TRUE menor que 10%</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>colunas_raras <span class="ot">&lt;-</span> </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  super_hero_powers <span class="sc">%&gt;%</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.logical), <span class="sc">~</span> <span class="fu">frequencia_true</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  .[. <span class="sc">&lt;</span> <span class="fl">0.1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar a nova coluna UncommonPower</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>super_hero_powers <span class="ot">&lt;-</span> </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  super_hero_powers <span class="sc">%&gt;%</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">UncommonPower =</span> <span class="fu">ifelse</span>(<span class="fu">rowSums</span>(dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="fu">all_of</span>(colunas_raras))) <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(colunas_raras))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Eu fiz um esforço para manter as informações possíveis dessas variáveis antes de realizar a exclusão. Isso foi feito criando uma contagem total do número de poderes antes da remoção. Além disso, a coluna que foi criada com as colunas excluídas também contém informações relacionadas a essas colunas que foram removidas.</p>
<p>Apesar de existirem técnicas mais elaboradas para a redução de dimensões, e embora algo similar seja alcançável por meio de métodos de regularização, não estou muito familiarizado com essas técnicas. Por isso, achei mais adequado seguir com a abordagem que descrevi.</p>
</section>
</section>
<section id="combinando-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="combinando-os-dados">Combinando os dados</h2>
<p>Agora vou unificar os dois bancos de dados para aproveitar ao máximo as informações na criação dos modelos.</p>
<p>A função inner_join retornará apenas as linhas onde há correspondências nas colunas de junção.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-14_4c0601e5773eb25c04cef3a18f5d958b">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>heroes_combined <span class="ot">&lt;-</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  heroes_information,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  super_hero_powers,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(name<span class="sc">==</span>hero_names)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(heroes_combined)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 35
  name       gender eye_color race  hair_color height publisher alignment weight
  &lt;chr&gt;      &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;      &lt;dbl&gt;
1 A-Bomb     Male   yellow    Human No Hair       203 Marvel C… good         441
2 Abe Sapien Male   blue      Icth… No Hair       191 Dark Hor… good          65
3 Abin Sur   Male   blue      Unga… No Hair       185 DC Comics good          90
4 Abominati… Male   green     Huma… No Hair       203 Marvel C… bad          441
5 Abraxas    Male   blue      Cosm… Black          NA Marvel C… bad           NA
6 Absorbing… Male   blue      Human No Hair       193 Marvel C… bad          122
# ℹ 26 more variables: imc &lt;dbl&gt;, categoria_imc &lt;chr&gt;, agility &lt;lgl&gt;,
#   accelerated_healing &lt;lgl&gt;, durability &lt;lgl&gt;, stealth &lt;lgl&gt;,
#   energy_absorption &lt;lgl&gt;, flight &lt;lgl&gt;, marksmanship &lt;lgl&gt;,
#   weapons_master &lt;lgl&gt;, longevity &lt;lgl&gt;, intelligence &lt;lgl&gt;,
#   super_strength &lt;lgl&gt;, telepathy &lt;lgl&gt;, energy_blasts &lt;lgl&gt;, stamina &lt;lgl&gt;,
#   super_speed &lt;lgl&gt;, teleportation &lt;lgl&gt;, enhanced_senses &lt;lgl&gt;,
#   immortality &lt;lgl&gt;, reflexes &lt;lgl&gt;, invulnerability &lt;lgl&gt;, …</code></pre>
</div>
</div>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-15_f3f7d4bf56bd73bd9be5fd5701697007">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(heroes_combined)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [643 × 35] (S3: tbl_df/tbl/data.frame)
 $ name               : chr [1:643] "A-Bomb" "Abe Sapien" "Abin Sur" "Abomination" ...
 $ gender             : Factor w/ 2 levels "Female","Male": 2 2 2 2 2 2 2 2 2 2 ...
 $ eye_color          : Factor w/ 22 levels "amber","black",..: 19 3 3 8 3 3 3 3 6 NA ...
 $ race               : Factor w/ 61 levels "Alien","Alpha",..: 23 32 55 31 11 23 NA 23 23 NA ...
 $ hair_color         : Factor w/ 29 levels "Auburn","black",..: 17 17 17 17 3 17 6 6 8 NA ...
 $ height             : num [1:643] 203 191 185 203 NA 193 NA 185 178 191 ...
 $ publisher          : Factor w/ 24 levels "ABC Studios",..: 12 2 3 12 12 12 14 3 12 12 ...
 $ alignment          : Factor w/ 3 levels "bad","good","neutral": 2 2 2 1 1 1 2 2 2 2 ...
 $ weight             : num [1:643] 441 65 90 441 NA 122 NA 88 81 104 ...
 $ imc                : num [1:643] 107 17.8 26.3 107 NA 32.8 NA 25.7 25.6 28.5 ...
 $ categoria_imc      : chr [1:643] "Obesidade III" "Abaixo do peso" "Sobrepeso" "Obesidade III" ...
 $ agility            : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...
 $ accelerated_healing: logi [1:643] TRUE TRUE FALSE TRUE FALSE FALSE ...
 $ durability         : logi [1:643] TRUE TRUE FALSE FALSE FALSE TRUE ...
 $ stealth            : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ energy_absorption  : logi [1:643] FALSE FALSE FALSE FALSE FALSE TRUE ...
 $ flight             : logi [1:643] FALSE FALSE FALSE FALSE TRUE FALSE ...
 $ marksmanship       : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...
 $ weapons_master     : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...
 $ longevity          : logi [1:643] TRUE TRUE FALSE FALSE FALSE FALSE ...
 $ intelligence       : logi [1:643] FALSE TRUE FALSE TRUE TRUE FALSE ...
 $ super_strength     : logi [1:643] TRUE TRUE FALSE TRUE TRUE TRUE ...
 $ telepathy          : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...
 $ energy_blasts      : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ stamina            : logi [1:643] TRUE TRUE FALSE TRUE FALSE FALSE ...
 $ super_speed        : logi [1:643] FALSE FALSE FALSE TRUE TRUE FALSE ...
 $ teleportation      : logi [1:643] FALSE FALSE FALSE FALSE TRUE FALSE ...
 $ enhanced_senses    : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ immortality        : logi [1:643] FALSE TRUE FALSE FALSE TRUE FALSE ...
 $ reflexes           : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...
 $ invulnerability    : logi [1:643] FALSE FALSE FALSE TRUE TRUE TRUE ...
 $ force_fields       : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ enhanced_hearing   : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ n_poderes          : num [1:643] 7 16 1 8 14 11 3 10 1 6 ...
 $ uncommon_power     : logi [1:643] TRUE TRUE TRUE TRUE TRUE TRUE ...</code></pre>
</div>
</div>
</section>
<section id="º-eda" class="level2">
<h2 class="anchored" data-anchor-id="º-eda">1º EDA</h2>
<p>Agora que os dados foram unificados, vamos criar algumas visualizações dos dados.</p>
<p>Vou comentar esse código, uma vez que ele gera um relatório em HTML.</p>
<p>Existem variáveis categóricas desbalanceadas. É possível observar que as variáveis categóricas relacionadas aos atributos físicos possuem contagens frequentemente altas de NA. Isso pode ser devido ao uso de uniformes, máscaras, entre outros fatores. Seria viável criar uma variável para representar essa informação?</p>
<p>Parece que os dados contínuos não apresentam uma distribuição normal e também possuem valores atípicos (outliers). Vamos proceder com a verificação utilizando o teste de Shapiro-Wilk.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-17_8ce709b19c396d0d426c82420c1cb258">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar o teste de Shapiro-Wilk e apresentar os resultados de forma tidy</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>heroes_combined <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(height,weight,imc) <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="fu">shapiro.test</span>(.)))) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"variavel"</span>, <span class="at">values_to =</span> <span class="st">"resultado"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  variavel resultado$statistic $p.value $method                    
  &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                      
1 height                0.345  4.20e-38 Shapiro-Wilk normality test
2 weight                0.581  1.11e-31 Shapiro-Wilk normality test
3 imc                   0.0893 1.01e-41 Shapiro-Wilk normality test</code></pre>
</div>
</div>
<p>De fato, os dados não exibem uma distribuição normal.</p>
<section id="remoção-de-valores-atípicos." class="level3">
<h3 class="anchored" data-anchor-id="remoção-de-valores-atípicos.">Remoção de valores atípicos.</h3>
<p>Vamos agora identificar e substituir os valores atípicos (outliers).</p>
<p>Vamos proceder da seguinte maneira: substituiremos os valores que estão abaixo do limite inferior <span class="math inline">\((Q1 - 1,5 \times IQR)\)</span> pelo valor do 5º percentil e substituiremos os valores excepcionalmente altos acima do limite superior <span class="math inline">\((Q3 + 1,5 \times IQR)\)</span> pelo valor do 95º percentil.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-18_0caecaa7733f5e1b5c6841bea5912da7">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Função para substituir outliers</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>substituir_outliers <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">any</span>(<span class="sc">!</span><span class="fu">is.na</span>(x))) {</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    quantiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x[<span class="sc">!</span><span class="fu">is.na</span>(x)], <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>))</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    iqr <span class="ot">&lt;-</span> quantiles[<span class="dv">2</span>] <span class="sc">-</span> quantiles[<span class="dv">1</span>]</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    lower_fence <span class="ot">&lt;-</span> quantiles[<span class="dv">1</span>] <span class="sc">-</span> <span class="fl">1.5</span> <span class="sc">*</span> iqr</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    upper_fence <span class="ot">&lt;-</span> quantiles[<span class="dv">2</span>] <span class="sc">+</span> <span class="fl">1.5</span> <span class="sc">*</span> iqr</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(x), <span class="fu">ifelse</span>(x <span class="sc">&lt;</span> lower_fence, quantiles[<span class="dv">1</span>], <span class="fu">ifelse</span>(x <span class="sc">&gt;</span> upper_fence, quantiles[<span class="dv">2</span>], x)), x)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  x</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar colunas numéricas</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>colunas_numericas <span class="ot">&lt;-</span> heroes_combined <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Substituir outliers nas colunas numéricas</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>heroes_combined <span class="ot">&lt;-</span> heroes_combined <span class="sc">%&gt;%</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(colunas_numericas), substituir_outliers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="verificando-a-correlação" class="level3">
<h3 class="anchored" data-anchor-id="verificando-a-correlação">Verificando a correlação</h3>
<p>Vamos analisar a correlação entre os dados numéricos. Essa informação será útil tanto para identificar possíveis problemas de colinearidade quanto para a tarefa de regressão. Optei pelo teste de Spearman por ser mais robusto a aoutliers e ausência de normalidade da distribuição.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-19_b3627cc41d7764d7b62cb99223da7b7d">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>dados_numericos <span class="ot">&lt;-</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  heroes_combined <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(height,weight,imc) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>()</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular a matriz de correlação</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>matriz_correlacao <span class="ot">&lt;-</span> <span class="fu">cor</span>(dados_numericos, <span class="at">method =</span> <span class="st">"spearman"</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(matriz_correlacao)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          height    weight       imc
height 1.0000000 0.7734864 0.6187391
weight 0.7734864 1.0000000 0.9007493
imc    0.6187391 0.9007493 1.0000000</code></pre>
</div>
</div>
<p>É importante manter em mente que a variável “peso” está altamente correlacionada com o IMC. Essa correlação era esperada, considerando que o IMC foi calculado a partir do peso e da altura.</p>
<p>Vou verificar novamente a distribução dos dados.</p>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-20_e0fad85848c5b51b1075e06dbc57dbf9">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar o teste de Shapiro-Wilk e apresentar os resultados de forma tidy</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>heroes_combined <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(height,weight,imc) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="fu">shapiro.test</span>(.)))) <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"variavel"</span>, <span class="at">values_to =</span> <span class="st">"resultado"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  variavel resultado$statistic $p.value $method                    
  &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                      
1 height                 0.988 1.11e- 3 Shapiro-Wilk normality test
2 weight                 0.955 1.51e-10 Shapiro-Wilk normality test
3 imc                    0.948 1.79e-11 Shapiro-Wilk normality test</code></pre>
</div>
</div>
<p>É relevante observar que a remoção dos outliers não resultou na normalização da distribuição dos dados. Isso é um aspecto importante a ser considerado ao criar os modelos.</p>
<p>A seguir, vou salvar os dados em um arquivo .csv para utilizá-lo nas próximas etapas.</p>
</section>
</section>
<section id="salvando-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="salvando-os-dados">Salvando os dados</h2>
<div class="cell" data-hash="cleaning_cache/html/unnamed-chunk-21_5e3c918f03cc81a75e1640fb00d382ed">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Salvando os dados</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(heroes_combined, <span class="at">file =</span> <span class="st">"dados_limpos.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="principais-pontos" class="level2">
<h2 class="anchored" data-anchor-id="principais-pontos">Principais pontos:</h2>
<ul>
<li>Substituição de valores ausentes, tanto numéricos como categóricos, por NA.</li>
<li>Remoção de linhas duplicadas.</li>
<li>Criação de uma variável numérica IMC.</li>
<li>Criação de uma variável categórica a partir do IMC.</li>
<li>Criação de uma variável para representar o número total de poderes por personagem.</li>
<li>Substituição de outliers.</li>
<li>Verificação da correlação entre valores numéricos.</li>
<li>Identificação de alta correlação entre peso e IMC.</li>
<li>Redução do número de variáveis categóricas raras entre as amostras.</li>
<li>Observação de que os dados numéricos ainda não apresentam distribuição normal.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>