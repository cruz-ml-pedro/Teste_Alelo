[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Teste_Alelo",
    "section": "",
    "text": "Bem-vindo à Página de Respostas - Vaga de Cientista de Dados Júnior na Alelo.\nPrezado avaliador e interessados na minha candidatura à vaga de Cientista de Dados Júnior na Alelo,\nÉ com grande entusiasmo que apresento esta página, destinada a compartilhar as respostas aos testes relacionados ao processo seletivo. Aqui, você encontrará minhas soluções e abordagens para os desafios propostos como parte da avaliação.\nAgradeço antecipadamente por dedicar tempo à avaliação das minhas soluções. Se você tiver alguma dúvida ou feedback, fique à vontade para entrar em contato através dos do meu email, cruz.ml.pedro@gmail.com. Estou ansioso para a possibilidade de fazer parte da equipe da Alelo e contribuir para o sucesso contínuo da empresa.\nPara acessar os códigos é só acessar o Link\nAtenciosamente,\nPedro Lima\nCandidato a Cientista de Dados Júnior"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html#carregando-e-avaliando-os-dados",
    "href": "index.html#carregando-e-avaliando-os-dados",
    "title": "Cleaning",
    "section": "",
    "text": "Optei por baixar os dados e salvá-los na pasta do projeto, eliminando assim a necessidade de informar um caminho específico até eles.\n\nheroes_information &lt;- \n  read_csv(\"heroes_information.csv\")\n\nsuper_hero_powers &lt;- \n  read_csv(\"super_hero_powers.csv\")\n\nUma vez carregados, vou visualizar algumas informações básicas dos dados. Começarei com o conjunto de dados heroes_information.\n\nhead(heroes_information)\n\n# A tibble: 6 × 11\n   ...1 name          Gender `Eye color` Race      `Hair color` Height Publisher\n  &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    \n1     0 A-Bomb        Male   yellow      Human     No Hair         203 Marvel C…\n2     1 Abe Sapien    Male   blue        Icthyo S… No Hair         191 Dark Hor…\n3     2 Abin Sur      Male   blue        Ungaran   No Hair         185 DC Comics\n4     3 Abomination   Male   green       Human / … No Hair         203 Marvel C…\n5     4 Abraxas       Male   blue        Cosmic E… Black           -99 Marvel C…\n6     5 Absorbing Man Male   blue        Human     No Hair         193 Marvel C…\n# ℹ 3 more variables: `Skin color` &lt;chr&gt;, Alignment &lt;chr&gt;, Weight &lt;dbl&gt;\n\nhead(summary(heroes_information))\n\n      ...1           name              Gender           Eye color        \n Min.   :  0.0   Length:734         Length:734         Length:734        \n 1st Qu.:183.2   Class :character   Class :character   Class :character  \n Median :366.5   Mode  :character   Mode  :character   Mode  :character  \n Mean   :366.5                                                           \n 3rd Qu.:549.8                                                           \n Max.   :733.0                                                           \n     Race            Hair color            Height       Publisher        \n Length:734         Length:734         Min.   :-99.0   Length:734        \n Class :character   Class :character   1st Qu.:-99.0   Class :character  \n Mode  :character   Mode  :character   Median :175.0   Mode  :character  \n                                       Mean   :102.3                     \n                                       3rd Qu.:185.0                     \n                                       Max.   :975.0                     \n  Skin color         Alignment             Weight      \n Length:734         Length:734         Min.   :-99.00  \n Class :character   Class :character   1st Qu.:-99.00  \n Mode  :character   Mode  :character   Median : 62.00  \n                                       Mean   : 43.86  \n                                       3rd Qu.: 90.00  \n                                       Max.   :900.00  \n\n\nO conjunto de dados “heroes_information” possui tanto variáveis categóricas como numéricas. No entanto, é possível observar que a classe das variáveis está definida como “character” e há valores faltantes, tanto em variáveis categóricas quanto numéricas.\nOs valores faltantes nos dados numéricos são indicados por -99 e NA. Dado que valores negativos não fazem sentido no contexto dos dados, a presença do valor -99 indica de fato a ausência de valor, da mesma forma que o NA. Portanto, ambos os valores, -99 e NA, indicam que os dados numéricos estão incompletos.\nAs variáveis categóricas têm seus valores faltantes representados por “-”, com exceção da coluna “Publisher”, que contém NA para os valores ausentes.\nAgora, vamos abordar esses pontos.\n\n\nAbaixo, realizaremos as seguintes ações: remover a primeira coluna, substituir -99 e - por NA e converter as colunas da classe “character” para “factor”.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  janitor::clean_names() %&gt;% \n  dplyr::select(-1) %&gt;% \n  mutate(\n    across(where(is.double), ~ if_else(. == -99, NA_real_, .)),\n    across(where(is.character), ~ if_else(. == \"-\", NA, .)),\n    across(where(is.character), as.factor),\n    name = as.character(name)\n    )\n\nVou verificar a existência de duplicatas e, caso existam, removê-las.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  filter(!duplicated(name))\n\n\nhead(heroes_information)\n\n# A tibble: 6 × 10\n  name   gender eye_color race  hair_color height publisher skin_color alignment\n  &lt;chr&gt;  &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;    \n1 A-Bomb Male   yellow    Human No Hair       203 Marvel C… &lt;NA&gt;       good     \n2 Abe S… Male   blue      Icth… No Hair       191 Dark Hor… blue       good     \n3 Abin … Male   blue      Unga… No Hair       185 DC Comics red        good     \n4 Abomi… Male   green     Huma… No Hair       203 Marvel C… &lt;NA&gt;       bad      \n5 Abrax… Male   blue      Cosm… Black          NA Marvel C… &lt;NA&gt;       bad      \n6 Absor… Male   blue      Human No Hair       193 Marvel C… &lt;NA&gt;       bad      \n# ℹ 1 more variable: weight &lt;dbl&gt;\n\n\n19 linhas foram removidas.\n\nhead(summary(heroes_information))\n\n     name              gender      eye_color                  race    \n Length:715         Female:196   blue   :220   Human            :199  \n Class :character   Male  :491   brown  :125   Mutant           : 63  \n Mode  :character   NA's  : 28   green  : 71   God / Eternal    : 13  \n                                 red    : 45   Cyborg           : 11  \n                                 black  : 22   Human / Radiation: 11  \n                                 (Other): 67   (Other)          :118  \n   hair_color      height                  publisher     skin_color \n Black  :154   Min.   : 15.2   Marvel Comics    :379   green  : 21  \n Blond  : 97   1st Qu.:173.5   DC Comics        :206   blue   :  9  \n Brown  : 82   Median :183.0   NBC - Heroes     : 19   red    :  9  \n No Hair: 75   Mean   :186.9   Dark Horse Comics: 17   white  :  7  \n Red    : 49   3rd Qu.:190.2   George Lucas     : 14   grey   :  5  \n (Other): 92   Max.   :975.0   (Other)          : 65   (Other): 20  \n   alignment       weight     \n bad    :205   Min.   :  2.0  \n good   :479   1st Qu.: 61.0  \n neutral: 24   Median : 81.0  \n NA's   :  7   Mean   :112.9  \n               3rd Qu.:108.0  \n               Max.   :900.0  \n\n\nCom exceção das colunas “alignment”, “publisher” e “gender”, todas as outras variáveis possuem um grande número de valores ausentes.\nExistem classes que estão separadas devido a erros ortográficos e de digitação, como “Black Hair” e “black hair”. No entanto, isso ocorre em classes com baixíssima frequência de ocorrência e provavelmente serão agrupadas em algum momento. Por enquanto, não vou realizar modificações nesse aspecto.\nA coluna “skin_color” praticamente não possui registros, com mais de 50% de ausências, e será descartada.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  dplyr::select(-skin_color)\n\nvamos verificar se existêm linhas problemáticas e remove-las\n\n# Porcentagem de valores faltantes permitida (50%)\nlimite_faltantes &lt;- 0.5\n\n# Função para verificar porcentagem de valores faltantes em uma linha\nporcentagem_faltantes &lt;- function(linha) {\n  sum(is.na(linha)) / length(linha)\n}\n\n# Filtrar e remover linhas com mais de 50% de valores faltantes\nheroes_information &lt;- heroes_information %&gt;%\ndplyr::filter(porcentagem_faltantes(row) &lt;= limite_faltantes)\n\nAparentemente, nenhuma linha possui mais do que 50% de informações ausentes.\nOs demais problemas desse conjunto de dados serão tratados posteriormente, dependendo do tipo de tarefa que será realizada.\nOs principais problemas desse conjunto até agora foram:\n\nMuitos valores ausentes\nClasses desbalanceadas\n\nAntes de prosseguir para as visualizações, vou criar algumas variáveis que possam ser úteis para as tarefas solicitadas.\n\n\n\nNeste momento, vou criar um índice de massa corporal (IMC) e 6 categorias relacionadas a esse índice. Isso me permitirá avaliar o quão “fit” os personagens estão.\nÉ importante notar que essas novas variáveis também serão influenciadas pelos problemas descritos anteriormente.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  janitor::clean_names() %&gt;% \n        mutate(\n          imc = round(weight/((height/100)^2),digits=1),\n          categoria_imc = case_when(\n                    imc &lt; 18.5 ~ \"Abaixo do peso\",\n                    imc &gt;= 18.5 & imc &lt;= 24.9 ~ \"Peso normal\",\n                    imc &gt;= 25 & imc &lt;= 29.9 ~ \"Sobrepeso\",\n                    imc &gt;= 30 & imc &lt;= 34.9 ~ \"Obesidade I\",\n                    imc &gt;= 35 & imc &lt;= 39.9 ~ \"Obesidade II\",\n                    imc &gt;= 40 ~ \"Obesidade III\"\n                    )\n        )\n\n\n\n\nAgora, vou dar uma olhada no segundo conjunto de dados.\n\nhead(super_hero_powers)\n\n# A tibble: 6 × 168\n  hero_names  Agility `Accelerated Healing` `Lantern Power Ring`\n  &lt;chr&gt;       &lt;lgl&gt;   &lt;lgl&gt;                 &lt;lgl&gt;               \n1 3-D Man     TRUE    FALSE                 FALSE               \n2 A-Bomb      FALSE   TRUE                  FALSE               \n3 Abe Sapien  TRUE    TRUE                  FALSE               \n4 Abin Sur    FALSE   FALSE                 TRUE                \n5 Abomination FALSE   TRUE                  FALSE               \n6 Abraxas     FALSE   FALSE                 FALSE               \n# ℹ 164 more variables: `Dimensional Awareness` &lt;lgl&gt;, `Cold Resistance` &lt;lgl&gt;,\n#   Durability &lt;lgl&gt;, Stealth &lt;lgl&gt;, `Energy Absorption` &lt;lgl&gt;, Flight &lt;lgl&gt;,\n#   `Danger Sense` &lt;lgl&gt;, `Underwater breathing` &lt;lgl&gt;, Marksmanship &lt;lgl&gt;,\n#   `Weapons Master` &lt;lgl&gt;, `Power Augmentation` &lt;lgl&gt;,\n#   `Animal Attributes` &lt;lgl&gt;, Longevity &lt;lgl&gt;, Intelligence &lt;lgl&gt;,\n#   `Super Strength` &lt;lgl&gt;, Cryokinesis &lt;lgl&gt;, Telepathy &lt;lgl&gt;,\n#   `Energy Armor` &lt;lgl&gt;, `Energy Blasts` &lt;lgl&gt;, Duplication &lt;lgl&gt;, …\n\nhead(summary(super_hero_powers))\n\n  hero_names         Agility        Accelerated Healing Lantern Power Ring\n Length:667         Mode :logical   Mode :logical       Mode :logical     \n Class :character   FALSE:425       FALSE:489           FALSE:656         \n Mode  :character   TRUE :242       TRUE :178           TRUE :11          \n Dimensional Awareness Cold Resistance Durability       Stealth       \n Mode :logical         Mode :logical   Mode :logical   Mode :logical  \n FALSE:642             FALSE:620       FALSE:410       FALSE:541      \n TRUE :25              TRUE :47        TRUE :257       TRUE :126      \n Energy Absorption   Flight        Danger Sense    Underwater breathing\n Mode :logical     Mode :logical   Mode :logical   Mode :logical       \n FALSE:590         FALSE:455       FALSE:637       FALSE:646           \n TRUE :77          TRUE :212       TRUE :30        TRUE :21            \n Marksmanship    Weapons Master  Power Augmentation Animal Attributes\n Mode :logical   Mode :logical   Mode :logical      Mode :logical    \n FALSE:548       FALSE:562       FALSE:659          FALSE:642        \n TRUE :119       TRUE :105       TRUE :8            TRUE :25         \n Longevity       Intelligence    Super Strength  Cryokinesis    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:554       FALSE:509       FALSE:307       FALSE:648      \n TRUE :113       TRUE :158       TRUE :360       TRUE :19       \n Telepathy       Energy Armor    Energy Blasts   Duplication    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:575       FALSE:659       FALSE:520       FALSE:651      \n TRUE :92        TRUE :8         TRUE :147       TRUE :16       \n Size Changing   Density Control  Stamina        Astral Travel  \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:612       FALSE:652       FALSE:378       FALSE:663      \n TRUE :55        TRUE :15        TRUE :289       TRUE :4        \n Audio Control   Dexterity        Omnitrix       Super Speed    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:660       FALSE:661       FALSE:666       FALSE:418      \n TRUE :7         TRUE :6         TRUE :1         TRUE :249      \n Possession      Animal Oriented Powers Weapon-based Powers Electrokinesis \n Mode :logical   Mode :logical          Mode :logical       Mode :logical  \n FALSE:659       FALSE:627              FALSE:609           FALSE:645      \n TRUE :8         TRUE :40               TRUE :58            TRUE :22       \n Darkforce Manipulation Death Touch     Teleportation   Enhanced Senses\n Mode :logical          Mode :logical   Mode :logical   Mode :logical  \n FALSE:657              FALSE:660       FALSE:595       FALSE:578      \n TRUE :10               TRUE :7         TRUE :72        TRUE :89       \n Telekinesis     Energy Beams      Magic         Hyperkinesis   \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:606       FALSE:625       FALSE:623       FALSE:666      \n TRUE :61        TRUE :42        TRUE :44        TRUE :1        \n    Jump         Clairvoyance    Dimensional Travel Power Sense    \n Mode :logical   Mode :logical   Mode :logical      Mode :logical  \n FALSE:602       FALSE:663       FALSE:644          FALSE:664      \n TRUE :65        TRUE :4         TRUE :23           TRUE :3        \n Shapeshifting   Peak Human Condition Immortality     Camouflage     \n Mode :logical   Mode :logical        Mode :logical   Mode :logical  \n FALSE:601       FALSE:637            FALSE:598       FALSE:646      \n TRUE :66        TRUE :30             TRUE :69        TRUE :21       \n Element Control  Phasing        Astral Projection Electrical Transport\n Mode :logical   Mode :logical   Mode :logical     Mode :logical       \n FALSE:659       FALSE:636       FALSE:638         FALSE:666           \n TRUE :8         TRUE :31        TRUE :29          TRUE :1             \n Fire Control    Projection      Summoning       Enhanced Memory\n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:635       FALSE:665       FALSE:663       FALSE:642      \n TRUE :32        TRUE :2         TRUE :4         TRUE :25       \n  Reflexes       Invulnerability Energy Constructs Force Fields   \n Mode :logical   Mode :logical   Mode :logical     Mode :logical  \n FALSE:503       FALSE:550       FALSE:629         FALSE:581      \n TRUE :164       TRUE :117       TRUE :38          TRUE :86       \n Self-Sustenance Anti-Gravity     Empathy        Power Nullifier\n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:630       FALSE:666       FALSE:648       FALSE:663      \n TRUE :37        TRUE :1         TRUE :19        TRUE :4        \n Radiation Control Psionic Powers  Elasticity      Substance Secretion\n Mode :logical     Mode :logical   Mode :logical   Mode :logical      \n FALSE:660         FALSE:618       FALSE:656       FALSE:650          \n TRUE :7           TRUE :49        TRUE :11        TRUE :17           \n Elemental Transmogrification Technopath/Cyberpath Photographic Reflexes\n Mode :logical                Mode :logical        Mode :logical        \n FALSE:661                    FALSE:644            FALSE:664            \n TRUE :6                      TRUE :23             TRUE :3              \n Seismic Power   Animation       Precognition    Mind Control   \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:664       FALSE:662       FALSE:645       FALSE:645      \n TRUE :3         TRUE :5         TRUE :22        TRUE :22       \n Fire Resistance Power Absorption Enhanced Hearing Nova Force     \n Mode :logical   Mode :logical    Mode :logical    Mode :logical  \n FALSE:649       FALSE:655        FALSE:595        FALSE:665      \n TRUE :18        TRUE :12         TRUE :72         TRUE :2        \n  Insanity       Hypnokinesis    Animal Control  Natural Armor  \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:662       FALSE:644       FALSE:658       FALSE:631      \n TRUE :5         TRUE :23        TRUE :9         TRUE :36       \n Intangibility   Enhanced Sight  Molecular Manipulation Heat Generation\n Mode :logical   Mode :logical   Mode :logical          Mode :logical  \n FALSE:647       FALSE:642       FALSE:625              FALSE:643      \n TRUE :20        TRUE :25        TRUE :42               TRUE :24       \n Adaptation       Gliding        Power Suit      Mind Blast     \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:662       FALSE:657       FALSE:634       FALSE:655      \n TRUE :5         TRUE :10        TRUE :33        TRUE :12       \n Probability Manipulation Gravity Control Regeneration    Light Control  \n Mode :logical            Mode :logical   Mode :logical   Mode :logical  \n FALSE:658                FALSE:651       FALSE:639       FALSE:652      \n TRUE :9                  TRUE :16        TRUE :28        TRUE :15       \n Echolocation    Levitation      Toxin and Disease Control   Banish       \n Mode :logical   Mode :logical   Mode :logical             Mode :logical  \n FALSE:665       FALSE:641       FALSE:657                 FALSE:666      \n TRUE :2         TRUE :26        TRUE :10                  TRUE :1        \n Energy Manipulation Heat Resistance Natural Weapons Time Travel    \n Mode :logical       Mode :logical   Mode :logical   Mode :logical  \n FALSE:615           FALSE:624       FALSE:609       FALSE:634      \n TRUE :52            TRUE :43        TRUE :58        TRUE :33       \n Enhanced Smell  Illusions       Thirstokinesis  Hair Manipulation\n Mode :logical   Mode :logical   Mode :logical   Mode :logical    \n FALSE:635       FALSE:629       FALSE:666       FALSE:666        \n TRUE :32        TRUE :38        TRUE :1         TRUE :1          \n Illumination    Omnipotent       Cloaking       Changing Armor \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:665       FALSE:660       FALSE:660       FALSE:666      \n TRUE :2         TRUE :7         TRUE :7         TRUE :1        \n Power Cosmic    Biokinesis      Water Control   Radiation Immunity\n Mode :logical   Mode :logical   Mode :logical   Mode :logical     \n FALSE:660       FALSE:666       FALSE:654       FALSE:657         \n TRUE :7         TRUE :1         TRUE :13        TRUE :10          \n Vision - Telescopic Toxin and Disease Resistance Spatial Awareness\n Mode :logical       Mode :logical                Mode :logical    \n FALSE:624           FALSE:619                    FALSE:666        \n TRUE :43            TRUE :48                     TRUE :1          \n Energy Resistance Telepathy Resistance Molecular Combustion Omnilingualism \n Mode :logical     Mode :logical        Mode :logical        Mode :logical  \n FALSE:660         FALSE:634            FALSE:665            FALSE:646      \n TRUE :7           TRUE :33             TRUE :2              TRUE :21       \n Portal Creation Magnetism       Mind Control Resistance Plant Control  \n Mode :logical   Mode :logical   Mode :logical           Mode :logical  \n FALSE:663       FALSE:656       FALSE:655               FALSE:659      \n TRUE :4         TRUE :11        TRUE :12                TRUE :8        \n   Sonar         Sonic Scream    Time Manipulation Enhanced Touch \n Mode :logical   Mode :logical   Mode :logical     Mode :logical  \n FALSE:663       FALSE:661       FALSE:647         FALSE:660      \n TRUE :4         TRUE :6         TRUE :20          TRUE :7        \n Magic Resistance Invisibility    Sub-Mariner     Radiation Absorption\n Mode :logical    Mode :logical   Mode :logical   Mode :logical       \n FALSE:661        FALSE:645       FALSE:647       FALSE:660           \n TRUE :6          TRUE :22        TRUE :20        TRUE :7             \n Intuitive aptitude Vision - Microscopic  Melting        Wind Control   \n Mode :logical      Mode :logical        Mode :logical   Mode :logical  \n FALSE:666          FALSE:648            FALSE:665       FALSE:664      \n TRUE :1            TRUE :19             TRUE :2         TRUE :3        \n Super Breath    Wallcrawling    Vision - Night  Vision - Infrared\n Mode :logical   Mode :logical   Mode :logical   Mode :logical    \n FALSE:644       FALSE:633       FALSE:633       FALSE:645        \n TRUE :23        TRUE :34        TRUE :34        TRUE :22         \n Grim Reaping    Matter Absorption The Force       Resurrection   \n Mode :logical   Mode :logical     Mode :logical   Mode :logical  \n FALSE:664       FALSE:656         FALSE:661       FALSE:652      \n TRUE :3         TRUE :11          TRUE :6         TRUE :15       \n Terrakinesis    Vision - Heat   Vitakinesis     Radar Sense    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:665       FALSE:648       FALSE:665       FALSE:661      \n TRUE :2         TRUE :19        TRUE :2         TRUE :6        \n Qwardian Power Ring Weather Control Vision - X-Ray  Vision - Thermal\n Mode :logical       Mode :logical   Mode :logical   Mode :logical   \n FALSE:665           FALSE:659       FALSE:644       FALSE:644       \n TRUE :2             TRUE :8         TRUE :23        TRUE :23        \n Web Creation    Reality Warping Odin Force      Symbiote Costume\n Mode :logical   Mode :logical   Mode :logical   Mode :logical   \n FALSE:653       FALSE:651       FALSE:665       FALSE:658       \n TRUE :14        TRUE :16        TRUE :2         TRUE :9         \n Speed Force     Phoenix Force   Molecular Dissipation Vision - Cryo  \n Mode :logical   Mode :logical   Mode :logical         Mode :logical  \n FALSE:666       FALSE:666       FALSE:666             FALSE:665      \n TRUE :1         TRUE :1         TRUE :1               TRUE :2        \n Omnipresent     Omniscient     \n Mode :logical   Mode :logical  \n FALSE:665       FALSE:665      \n TRUE :2         TRUE :2        \n\n\nO conjunto de dados “super_hero_powers” é composto por variáveis lógicas, e muitas delas!\nNenhuma delas possui valores faltantes. No entanto, diversas colunas apresentam um desbalanceamento considerável.\nVou verificar a presença de duplicatas nos dados.\n\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;% \n  filter(!duplicated(hero_names))\n\nNenhuma linha foi removida.\nComo observamos, nenhuma delas possui valores ausentes, eliminando a necessidade de verificar linhas problemáticas, exceto por duplicatas.\n\n\n\nAgora, irei criar uma variável que represente a quantidade de poderes que cada personagem possui.\n\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;% \n  mutate(\n    n_poderes = rowSums(across(where(is.logical)))\n  ) \n\nComo mencionei, há um grande número de colunas e várias delas apresentam baixa frequência relativa. Essa situação pode levar a problemas na interpretação dos resultados, na precisão dos modelos e nas métricas de avaliação. Portanto, irei agrupar todas as variáveis que possuam uma distribuição altamente desequilibrada (10%).\n\n# Função para calcular frequência relativa de TRUE\nfrequencia_true &lt;- function(coluna) {\n  sum(coluna) / length(coluna)\n}\n\n# Identificar colunas com frequência relativa de TRUE menor que 10%\ncolunas_raras &lt;- \n  super_hero_powers %&gt;%\n  summarise(across(where(is.logical), ~ frequencia_true(.))) %&gt;%\n  unlist() %&gt;% \n  .[. &lt; 0.1] %&gt;% \n  names()\n\n# Criar a nova coluna UncommonPower\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;%\n  mutate(\n    UncommonPower = ifelse(rowSums(dplyr::select(., all_of(colunas_raras))) &gt; 0, TRUE, FALSE)\n    ) %&gt;%\n  dplyr::select(-all_of(colunas_raras))\n\nEu fiz um esforço para manter as informações possíveis dessas variáveis antes de realizar a exclusão. Isso foi feito criando uma contagem total do número de poderes antes da remoção. Além disso, a coluna que foi criada com as colunas excluídas também contém informações relacionadas a essas colunas que foram removidas.\nApesar de existirem técnicas mais elaboradas para a redução de dimensões, e embora algo similar seja alcançável por meio de métodos de regularização, não estou muito familiarizado com essas técnicas. Por isso, achei mais adequado seguir com a abordagem que descrevi."
  },
  {
    "objectID": "index.html#combinando-os-dados",
    "href": "index.html#combinando-os-dados",
    "title": "Cleaning",
    "section": "",
    "text": "Agora vou unificar os dois bancos de dados para aproveitar ao máximo as informações na criação dos modelos.\nA função inner_join retornará apenas as linhas onde há correspondências nas colunas de junção.\n\nheroes_combined &lt;- \n  inner_join(\n  heroes_information,\n  super_hero_powers,\n  by = join_by(name==hero_names)\n  ) %&gt;% \n  janitor::clean_names()\n\nhead(heroes_combined)\n\n# A tibble: 6 × 35\n  name       gender eye_color race  hair_color height publisher alignment weight\n  &lt;chr&gt;      &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;      &lt;dbl&gt;\n1 A-Bomb     Male   yellow    Human No Hair       203 Marvel C… good         441\n2 Abe Sapien Male   blue      Icth… No Hair       191 Dark Hor… good          65\n3 Abin Sur   Male   blue      Unga… No Hair       185 DC Comics good          90\n4 Abominati… Male   green     Huma… No Hair       203 Marvel C… bad          441\n5 Abraxas    Male   blue      Cosm… Black          NA Marvel C… bad           NA\n6 Absorbing… Male   blue      Human No Hair       193 Marvel C… bad          122\n# ℹ 26 more variables: imc &lt;dbl&gt;, categoria_imc &lt;chr&gt;, agility &lt;lgl&gt;,\n#   accelerated_healing &lt;lgl&gt;, durability &lt;lgl&gt;, stealth &lt;lgl&gt;,\n#   energy_absorption &lt;lgl&gt;, flight &lt;lgl&gt;, marksmanship &lt;lgl&gt;,\n#   weapons_master &lt;lgl&gt;, longevity &lt;lgl&gt;, intelligence &lt;lgl&gt;,\n#   super_strength &lt;lgl&gt;, telepathy &lt;lgl&gt;, energy_blasts &lt;lgl&gt;, stamina &lt;lgl&gt;,\n#   super_speed &lt;lgl&gt;, teleportation &lt;lgl&gt;, enhanced_senses &lt;lgl&gt;,\n#   immortality &lt;lgl&gt;, reflexes &lt;lgl&gt;, invulnerability &lt;lgl&gt;, …\n\n\n\nstr(heroes_combined)\n\ntibble [643 × 35] (S3: tbl_df/tbl/data.frame)\n $ name               : chr [1:643] \"A-Bomb\" \"Abe Sapien\" \"Abin Sur\" \"Abomination\" ...\n $ gender             : Factor w/ 2 levels \"Female\",\"Male\": 2 2 2 2 2 2 2 2 2 2 ...\n $ eye_color          : Factor w/ 22 levels \"amber\",\"black\",..: 19 3 3 8 3 3 3 3 6 NA ...\n $ race               : Factor w/ 61 levels \"Alien\",\"Alpha\",..: 23 32 55 31 11 23 NA 23 23 NA ...\n $ hair_color         : Factor w/ 29 levels \"Auburn\",\"black\",..: 17 17 17 17 3 17 6 6 8 NA ...\n $ height             : num [1:643] 203 191 185 203 NA 193 NA 185 178 191 ...\n $ publisher          : Factor w/ 24 levels \"ABC Studios\",..: 12 2 3 12 12 12 14 3 12 12 ...\n $ alignment          : Factor w/ 3 levels \"bad\",\"good\",\"neutral\": 2 2 2 1 1 1 2 2 2 2 ...\n $ weight             : num [1:643] 441 65 90 441 NA 122 NA 88 81 104 ...\n $ imc                : num [1:643] 107 17.8 26.3 107 NA 32.8 NA 25.7 25.6 28.5 ...\n $ categoria_imc      : chr [1:643] \"Obesidade III\" \"Abaixo do peso\" \"Sobrepeso\" \"Obesidade III\" ...\n $ agility            : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ accelerated_healing: logi [1:643] TRUE TRUE FALSE TRUE FALSE FALSE ...\n $ durability         : logi [1:643] TRUE TRUE FALSE FALSE FALSE TRUE ...\n $ stealth            : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ energy_absorption  : logi [1:643] FALSE FALSE FALSE FALSE FALSE TRUE ...\n $ flight             : logi [1:643] FALSE FALSE FALSE FALSE TRUE FALSE ...\n $ marksmanship       : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ weapons_master     : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ longevity          : logi [1:643] TRUE TRUE FALSE FALSE FALSE FALSE ...\n $ intelligence       : logi [1:643] FALSE TRUE FALSE TRUE TRUE FALSE ...\n $ super_strength     : logi [1:643] TRUE TRUE FALSE TRUE TRUE TRUE ...\n $ telepathy          : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ energy_blasts      : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ stamina            : logi [1:643] TRUE TRUE FALSE TRUE FALSE FALSE ...\n $ super_speed        : logi [1:643] FALSE FALSE FALSE TRUE TRUE FALSE ...\n $ teleportation      : logi [1:643] FALSE FALSE FALSE FALSE TRUE FALSE ...\n $ enhanced_senses    : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ immortality        : logi [1:643] FALSE TRUE FALSE FALSE TRUE FALSE ...\n $ reflexes           : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ invulnerability    : logi [1:643] FALSE FALSE FALSE TRUE TRUE TRUE ...\n $ force_fields       : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ enhanced_hearing   : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ n_poderes          : num [1:643] 7 16 1 8 14 11 3 10 1 6 ...\n $ uncommon_power     : logi [1:643] TRUE TRUE TRUE TRUE TRUE TRUE ..."
  },
  {
    "objectID": "index.html#º-eda",
    "href": "index.html#º-eda",
    "title": "Cleaning",
    "section": "",
    "text": "Agora que os dados foram unificados, vamos criar algumas visualizações dos dados.\nVou comentar esse código, uma vez que ele gera um relatório em HTML.\nExistem variáveis categóricas desbalanceadas. É possível observar que as variáveis categóricas relacionadas aos atributos físicos possuem contagens frequentemente altas de NA. Isso pode ser devido ao uso de uniformes, máscaras, entre outros fatores. Seria viável criar uma variável para representar essa informação?\nParece que os dados contínuos não apresentam uma distribuição normal e também possuem valores atípicos (outliers). Vamos proceder com a verificação utilizando o teste de Shapiro-Wilk.\n\n# Aplicar o teste de Shapiro-Wilk e apresentar os resultados de forma tidy\nheroes_combined %&gt;%\n  dplyr::select(height,weight,imc) %&gt;% \n  summarise(across(everything(), ~ broom::tidy(shapiro.test(.)))) %&gt;%\n  pivot_longer(everything(), names_to = \"variavel\", values_to = \"resultado\") \n\n# A tibble: 3 × 2\n  variavel resultado$statistic $p.value $method                    \n  &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                      \n1 height                0.345  4.20e-38 Shapiro-Wilk normality test\n2 weight                0.581  1.11e-31 Shapiro-Wilk normality test\n3 imc                   0.0893 1.01e-41 Shapiro-Wilk normality test\n\n\nDe fato, os dados não exibem uma distribuição normal.\n\n\nVamos agora identificar e substituir os valores atípicos (outliers).\nVamos proceder da seguinte maneira: substituiremos os valores que estão abaixo do limite inferior \\((Q1 - 1,5 \\times IQR)\\) pelo valor do 5º percentil e substituiremos os valores excepcionalmente altos acima do limite superior \\((Q3 + 1,5 \\times IQR)\\) pelo valor do 95º percentil.\n\n# Função para substituir outliers\nsubstituir_outliers &lt;- function(x) {\n  if (any(!is.na(x))) {\n    quantiles &lt;- quantile(x[!is.na(x)], c(0.25, 0.75))\n    iqr &lt;- quantiles[2] - quantiles[1]\n    lower_fence &lt;- quantiles[1] - 1.5 * iqr\n    upper_fence &lt;- quantiles[2] + 1.5 * iqr\n    x &lt;- ifelse(!is.na(x), ifelse(x &lt; lower_fence, quantiles[1], ifelse(x &gt; upper_fence, quantiles[2], x)), x)\n  }\n  x\n}\n\n# Identificar colunas numéricas\ncolunas_numericas &lt;- heroes_combined %&gt;% dplyr::select(where(is.numeric)) %&gt;% colnames()\n\n# Substituir outliers nas colunas numéricas\nheroes_combined &lt;- heroes_combined %&gt;%\n  mutate(across(all_of(colunas_numericas), substituir_outliers))\n\n\n\n\nVamos analisar a correlação entre os dados numéricos. Essa informação será útil tanto para identificar possíveis problemas de colinearidade quanto para a tarefa de regressão. Optei pelo teste de Spearman por ser mais robusto a aoutliers e ausência de normalidade da distribuição.\n\ndados_numericos &lt;- \n  heroes_combined %&gt;% \n  dplyr::select(height,weight,imc) %&gt;% \n  tidyr::drop_na()\n\n# Calcular a matriz de correlação\nmatriz_correlacao &lt;- cor(dados_numericos, method = \"spearman\")\n\nprint(matriz_correlacao)\n\n          height    weight       imc\nheight 1.0000000 0.7734864 0.6187391\nweight 0.7734864 1.0000000 0.9007493\nimc    0.6187391 0.9007493 1.0000000\n\n\nÉ importante manter em mente que a variável “peso” está altamente correlacionada com o IMC. Essa correlação era esperada, considerando que o IMC foi calculado a partir do peso e da altura.\nVou verificar novamente a distribução dos dados.\n\n# Aplicar o teste de Shapiro-Wilk e apresentar os resultados de forma tidy\nheroes_combined %&gt;%\n  dplyr::select(height,weight,imc) %&gt;% \n  tidyr::drop_na() %&gt;% \n  summarise(across(everything(), ~ broom::tidy(shapiro.test(.)))) %&gt;%\n  pivot_longer(everything(), names_to = \"variavel\", values_to = \"resultado\") \n\n# A tibble: 3 × 2\n  variavel resultado$statistic $p.value $method                    \n  &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                      \n1 height                 0.988 1.11e- 3 Shapiro-Wilk normality test\n2 weight                 0.955 1.51e-10 Shapiro-Wilk normality test\n3 imc                    0.948 1.79e-11 Shapiro-Wilk normality test\n\n\nÉ relevante observar que a remoção dos outliers não resultou na normalização da distribuição dos dados. Isso é um aspecto importante a ser considerado ao criar os modelos.\nA seguir, vou salvar os dados em um arquivo .csv para utilizá-lo nas próximas etapas."
  },
  {
    "objectID": "index.html#salvando-os-dados",
    "href": "index.html#salvando-os-dados",
    "title": "Cleaning",
    "section": "",
    "text": "#Salvando os dados\n\nwrite.csv(heroes_combined, file = \"dados_limpos.csv\")"
  },
  {
    "objectID": "index.html#principais-pontos",
    "href": "index.html#principais-pontos",
    "title": "Cleaning",
    "section": "",
    "text": "Substituição de valores ausentes, tanto numéricos como categóricos, por NA.\nRemoção de linhas duplicadas.\nCriação de uma variável numérica IMC.\nCriação de uma variável categórica a partir do IMC.\nCriação de uma variável para representar o número total de poderes por personagem.\nSubstituição de outliers.\nVerificação da correlação entre valores numéricos.\nIdentificação de alta correlação entre peso e IMC.\nRedução do número de variáveis categóricas raras entre as amostras.\nObservação de que os dados numéricos ainda não apresentam distribuição normal."
  },
  {
    "objectID": "cleaning.html",
    "href": "cleaning.html",
    "title": "Cleaning",
    "section": "",
    "text": "Antes de iniciar as tarefas propostas, vou realizar uma série de verificações em relação à qualidade dos dados.\nVamos começar carregando os pacotes necessários e padronizando alguns aspectos da saída do documento, como o tamanho das figuras e as opções de formatação dos trechos de código. Em seguida vou carregar os dados.\n\npacman::p_load(tidyverse, janitor, DataExplorer,readr, knitr)\n\nknitr::opts_chunk$set(cache = TRUE, cache.lazy = FALSE, warning = FALSE,\n                      message = FALSE, echo = TRUE, dpi = 180,\n                      fig.width = 8, fig.height = 5)\n\n\n\nOptei por baixar os dados e salvá-los na pasta do projeto, eliminando assim a necessidade de informar um caminho específico até eles.\n\nheroes_information &lt;- \n  read_csv(\"heroes_information.csv\")\n\nsuper_hero_powers &lt;- \n  read_csv(\"super_hero_powers.csv\")\n\nUma vez carregados, vou visualizar algumas informações básicas dos dados. Começarei com o conjunto de dados heroes_information.\n\nhead(heroes_information)\n\n# A tibble: 6 × 11\n   ...1 name          Gender `Eye color` Race      `Hair color` Height Publisher\n  &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    \n1     0 A-Bomb        Male   yellow      Human     No Hair         203 Marvel C…\n2     1 Abe Sapien    Male   blue        Icthyo S… No Hair         191 Dark Hor…\n3     2 Abin Sur      Male   blue        Ungaran   No Hair         185 DC Comics\n4     3 Abomination   Male   green       Human / … No Hair         203 Marvel C…\n5     4 Abraxas       Male   blue        Cosmic E… Black           -99 Marvel C…\n6     5 Absorbing Man Male   blue        Human     No Hair         193 Marvel C…\n# ℹ 3 more variables: `Skin color` &lt;chr&gt;, Alignment &lt;chr&gt;, Weight &lt;dbl&gt;\n\nhead(summary(heroes_information))\n\n      ...1           name              Gender           Eye color        \n Min.   :  0.0   Length:734         Length:734         Length:734        \n 1st Qu.:183.2   Class :character   Class :character   Class :character  \n Median :366.5   Mode  :character   Mode  :character   Mode  :character  \n Mean   :366.5                                                           \n 3rd Qu.:549.8                                                           \n Max.   :733.0                                                           \n     Race            Hair color            Height       Publisher        \n Length:734         Length:734         Min.   :-99.0   Length:734        \n Class :character   Class :character   1st Qu.:-99.0   Class :character  \n Mode  :character   Mode  :character   Median :175.0   Mode  :character  \n                                       Mean   :102.3                     \n                                       3rd Qu.:185.0                     \n                                       Max.   :975.0                     \n  Skin color         Alignment             Weight      \n Length:734         Length:734         Min.   :-99.00  \n Class :character   Class :character   1st Qu.:-99.00  \n Mode  :character   Mode  :character   Median : 62.00  \n                                       Mean   : 43.86  \n                                       3rd Qu.: 90.00  \n                                       Max.   :900.00  \n\n\nO conjunto de dados “heroes_information” possui tanto variáveis categóricas como numéricas. No entanto, é possível observar que a classe das variáveis está definida como “character” e há valores faltantes, tanto em variáveis categóricas quanto numéricas.\nOs valores faltantes nos dados numéricos são indicados por -99 e NA. Dado que valores negativos não fazem sentido no contexto dos dados, a presença do valor -99 indica de fato a ausência de valor, da mesma forma que o NA. Portanto, ambos os valores, -99 e NA, indicam que os dados numéricos estão incompletos.\nAs variáveis categóricas têm seus valores faltantes representados por “-”, com exceção da coluna “Publisher”, que contém NA para os valores ausentes.\nAgora, vamos abordar esses pontos.\n\n\nAbaixo, realizaremos as seguintes ações: remover a primeira coluna, substituir -99 e - por NA e converter as colunas da classe “character” para “factor”.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  janitor::clean_names() %&gt;% \n  dplyr::select(-1) %&gt;% \n  mutate(\n    across(where(is.double), ~ if_else(. == -99, NA_real_, .)),\n    across(where(is.character), ~ if_else(. == \"-\", NA, .)),\n    across(where(is.character), as.factor),\n    name = as.character(name)\n    )\n\nVou verificar a existência de duplicatas e, caso existam, removê-las.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  filter(!duplicated(name))\n\n\nhead(heroes_information)\n\n# A tibble: 6 × 10\n  name   gender eye_color race  hair_color height publisher skin_color alignment\n  &lt;chr&gt;  &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;    \n1 A-Bomb Male   yellow    Human No Hair       203 Marvel C… &lt;NA&gt;       good     \n2 Abe S… Male   blue      Icth… No Hair       191 Dark Hor… blue       good     \n3 Abin … Male   blue      Unga… No Hair       185 DC Comics red        good     \n4 Abomi… Male   green     Huma… No Hair       203 Marvel C… &lt;NA&gt;       bad      \n5 Abrax… Male   blue      Cosm… Black          NA Marvel C… &lt;NA&gt;       bad      \n6 Absor… Male   blue      Human No Hair       193 Marvel C… &lt;NA&gt;       bad      \n# ℹ 1 more variable: weight &lt;dbl&gt;\n\n\n19 linhas foram removidas.\n\nhead(summary(heroes_information))\n\n     name              gender      eye_color                  race    \n Length:715         Female:196   blue   :220   Human            :199  \n Class :character   Male  :491   brown  :125   Mutant           : 63  \n Mode  :character   NA's  : 28   green  : 71   God / Eternal    : 13  \n                                 red    : 45   Cyborg           : 11  \n                                 black  : 22   Human / Radiation: 11  \n                                 (Other): 67   (Other)          :118  \n   hair_color      height                  publisher     skin_color \n Black  :154   Min.   : 15.2   Marvel Comics    :379   green  : 21  \n Blond  : 97   1st Qu.:173.5   DC Comics        :206   blue   :  9  \n Brown  : 82   Median :183.0   NBC - Heroes     : 19   red    :  9  \n No Hair: 75   Mean   :186.9   Dark Horse Comics: 17   white  :  7  \n Red    : 49   3rd Qu.:190.2   George Lucas     : 14   grey   :  5  \n (Other): 92   Max.   :975.0   (Other)          : 65   (Other): 20  \n   alignment       weight     \n bad    :205   Min.   :  2.0  \n good   :479   1st Qu.: 61.0  \n neutral: 24   Median : 81.0  \n NA's   :  7   Mean   :112.9  \n               3rd Qu.:108.0  \n               Max.   :900.0  \n\n\nCom exceção das colunas “alignment”, “publisher” e “gender”, todas as outras variáveis possuem um grande número de valores ausentes.\nExistem classes que estão separadas devido a erros ortográficos e de digitação, como “Black Hair” e “black hair”. No entanto, isso ocorre em classes com baixíssima frequência de ocorrência e provavelmente serão agrupadas em algum momento. Por enquanto, não vou realizar modificações nesse aspecto.\nA coluna “skin_color” praticamente não possui registros, com mais de 50% de ausências, e será descartada.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  dplyr::select(-skin_color)\n\nvamos verificar se existêm linhas problemáticas e remove-las\n\n# Porcentagem de valores faltantes permitida (50%)\nlimite_faltantes &lt;- 0.5\n\n# Função para verificar porcentagem de valores faltantes em uma linha\nporcentagem_faltantes &lt;- function(linha) {\n  sum(is.na(linha)) / length(linha)\n}\n\n# Filtrar e remover linhas com mais de 50% de valores faltantes\nheroes_information &lt;- heroes_information %&gt;%\ndplyr::filter(porcentagem_faltantes(row) &lt;= limite_faltantes)\n\nAparentemente, nenhuma linha possui mais do que 50% de informações ausentes.\nOs demais problemas desse conjunto de dados serão tratados posteriormente, dependendo do tipo de tarefa que será realizada.\nOs principais problemas desse conjunto até agora foram:\n\nMuitos valores ausentes\nClasses desbalanceadas\n\nAntes de prosseguir para as visualizações, vou criar algumas variáveis que possam ser úteis para as tarefas solicitadas.\n\n\n\nNeste momento, vou criar um índice de massa corporal (IMC) e 6 categorias relacionadas a esse índice. Isso me permitirá avaliar o quão “fit” os personagens estão.\nÉ importante notar que essas novas variáveis também serão influenciadas pelos problemas descritos anteriormente.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  janitor::clean_names() %&gt;% \n        mutate(\n          imc = round(weight/((height/100)^2),digits=1),\n          categoria_imc = case_when(\n                    imc &lt; 18.5 ~ \"Abaixo do peso\",\n                    imc &gt;= 18.5 & imc &lt;= 24.9 ~ \"Peso normal\",\n                    imc &gt;= 25 & imc &lt;= 29.9 ~ \"Sobrepeso\",\n                    imc &gt;= 30 & imc &lt;= 34.9 ~ \"Obesidade I\",\n                    imc &gt;= 35 & imc &lt;= 39.9 ~ \"Obesidade II\",\n                    imc &gt;= 40 ~ \"Obesidade III\"\n                    )\n        )\n\n\n\n\nAgora, vou dar uma olhada no segundo conjunto de dados.\n\nhead(super_hero_powers)\n\n# A tibble: 6 × 168\n  hero_names  Agility `Accelerated Healing` `Lantern Power Ring`\n  &lt;chr&gt;       &lt;lgl&gt;   &lt;lgl&gt;                 &lt;lgl&gt;               \n1 3-D Man     TRUE    FALSE                 FALSE               \n2 A-Bomb      FALSE   TRUE                  FALSE               \n3 Abe Sapien  TRUE    TRUE                  FALSE               \n4 Abin Sur    FALSE   FALSE                 TRUE                \n5 Abomination FALSE   TRUE                  FALSE               \n6 Abraxas     FALSE   FALSE                 FALSE               \n# ℹ 164 more variables: `Dimensional Awareness` &lt;lgl&gt;, `Cold Resistance` &lt;lgl&gt;,\n#   Durability &lt;lgl&gt;, Stealth &lt;lgl&gt;, `Energy Absorption` &lt;lgl&gt;, Flight &lt;lgl&gt;,\n#   `Danger Sense` &lt;lgl&gt;, `Underwater breathing` &lt;lgl&gt;, Marksmanship &lt;lgl&gt;,\n#   `Weapons Master` &lt;lgl&gt;, `Power Augmentation` &lt;lgl&gt;,\n#   `Animal Attributes` &lt;lgl&gt;, Longevity &lt;lgl&gt;, Intelligence &lt;lgl&gt;,\n#   `Super Strength` &lt;lgl&gt;, Cryokinesis &lt;lgl&gt;, Telepathy &lt;lgl&gt;,\n#   `Energy Armor` &lt;lgl&gt;, `Energy Blasts` &lt;lgl&gt;, Duplication &lt;lgl&gt;, …\n\nhead(summary(super_hero_powers))\n\n  hero_names         Agility        Accelerated Healing Lantern Power Ring\n Length:667         Mode :logical   Mode :logical       Mode :logical     \n Class :character   FALSE:425       FALSE:489           FALSE:656         \n Mode  :character   TRUE :242       TRUE :178           TRUE :11          \n Dimensional Awareness Cold Resistance Durability       Stealth       \n Mode :logical         Mode :logical   Mode :logical   Mode :logical  \n FALSE:642             FALSE:620       FALSE:410       FALSE:541      \n TRUE :25              TRUE :47        TRUE :257       TRUE :126      \n Energy Absorption   Flight        Danger Sense    Underwater breathing\n Mode :logical     Mode :logical   Mode :logical   Mode :logical       \n FALSE:590         FALSE:455       FALSE:637       FALSE:646           \n TRUE :77          TRUE :212       TRUE :30        TRUE :21            \n Marksmanship    Weapons Master  Power Augmentation Animal Attributes\n Mode :logical   Mode :logical   Mode :logical      Mode :logical    \n FALSE:548       FALSE:562       FALSE:659          FALSE:642        \n TRUE :119       TRUE :105       TRUE :8            TRUE :25         \n Longevity       Intelligence    Super Strength  Cryokinesis    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:554       FALSE:509       FALSE:307       FALSE:648      \n TRUE :113       TRUE :158       TRUE :360       TRUE :19       \n Telepathy       Energy Armor    Energy Blasts   Duplication    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:575       FALSE:659       FALSE:520       FALSE:651      \n TRUE :92        TRUE :8         TRUE :147       TRUE :16       \n Size Changing   Density Control  Stamina        Astral Travel  \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:612       FALSE:652       FALSE:378       FALSE:663      \n TRUE :55        TRUE :15        TRUE :289       TRUE :4        \n Audio Control   Dexterity        Omnitrix       Super Speed    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:660       FALSE:661       FALSE:666       FALSE:418      \n TRUE :7         TRUE :6         TRUE :1         TRUE :249      \n Possession      Animal Oriented Powers Weapon-based Powers Electrokinesis \n Mode :logical   Mode :logical          Mode :logical       Mode :logical  \n FALSE:659       FALSE:627              FALSE:609           FALSE:645      \n TRUE :8         TRUE :40               TRUE :58            TRUE :22       \n Darkforce Manipulation Death Touch     Teleportation   Enhanced Senses\n Mode :logical          Mode :logical   Mode :logical   Mode :logical  \n FALSE:657              FALSE:660       FALSE:595       FALSE:578      \n TRUE :10               TRUE :7         TRUE :72        TRUE :89       \n Telekinesis     Energy Beams      Magic         Hyperkinesis   \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:606       FALSE:625       FALSE:623       FALSE:666      \n TRUE :61        TRUE :42        TRUE :44        TRUE :1        \n    Jump         Clairvoyance    Dimensional Travel Power Sense    \n Mode :logical   Mode :logical   Mode :logical      Mode :logical  \n FALSE:602       FALSE:663       FALSE:644          FALSE:664      \n TRUE :65        TRUE :4         TRUE :23           TRUE :3        \n Shapeshifting   Peak Human Condition Immortality     Camouflage     \n Mode :logical   Mode :logical        Mode :logical   Mode :logical  \n FALSE:601       FALSE:637            FALSE:598       FALSE:646      \n TRUE :66        TRUE :30             TRUE :69        TRUE :21       \n Element Control  Phasing        Astral Projection Electrical Transport\n Mode :logical   Mode :logical   Mode :logical     Mode :logical       \n FALSE:659       FALSE:636       FALSE:638         FALSE:666           \n TRUE :8         TRUE :31        TRUE :29          TRUE :1             \n Fire Control    Projection      Summoning       Enhanced Memory\n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:635       FALSE:665       FALSE:663       FALSE:642      \n TRUE :32        TRUE :2         TRUE :4         TRUE :25       \n  Reflexes       Invulnerability Energy Constructs Force Fields   \n Mode :logical   Mode :logical   Mode :logical     Mode :logical  \n FALSE:503       FALSE:550       FALSE:629         FALSE:581      \n TRUE :164       TRUE :117       TRUE :38          TRUE :86       \n Self-Sustenance Anti-Gravity     Empathy        Power Nullifier\n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:630       FALSE:666       FALSE:648       FALSE:663      \n TRUE :37        TRUE :1         TRUE :19        TRUE :4        \n Radiation Control Psionic Powers  Elasticity      Substance Secretion\n Mode :logical     Mode :logical   Mode :logical   Mode :logical      \n FALSE:660         FALSE:618       FALSE:656       FALSE:650          \n TRUE :7           TRUE :49        TRUE :11        TRUE :17           \n Elemental Transmogrification Technopath/Cyberpath Photographic Reflexes\n Mode :logical                Mode :logical        Mode :logical        \n FALSE:661                    FALSE:644            FALSE:664            \n TRUE :6                      TRUE :23             TRUE :3              \n Seismic Power   Animation       Precognition    Mind Control   \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:664       FALSE:662       FALSE:645       FALSE:645      \n TRUE :3         TRUE :5         TRUE :22        TRUE :22       \n Fire Resistance Power Absorption Enhanced Hearing Nova Force     \n Mode :logical   Mode :logical    Mode :logical    Mode :logical  \n FALSE:649       FALSE:655        FALSE:595        FALSE:665      \n TRUE :18        TRUE :12         TRUE :72         TRUE :2        \n  Insanity       Hypnokinesis    Animal Control  Natural Armor  \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:662       FALSE:644       FALSE:658       FALSE:631      \n TRUE :5         TRUE :23        TRUE :9         TRUE :36       \n Intangibility   Enhanced Sight  Molecular Manipulation Heat Generation\n Mode :logical   Mode :logical   Mode :logical          Mode :logical  \n FALSE:647       FALSE:642       FALSE:625              FALSE:643      \n TRUE :20        TRUE :25        TRUE :42               TRUE :24       \n Adaptation       Gliding        Power Suit      Mind Blast     \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:662       FALSE:657       FALSE:634       FALSE:655      \n TRUE :5         TRUE :10        TRUE :33        TRUE :12       \n Probability Manipulation Gravity Control Regeneration    Light Control  \n Mode :logical            Mode :logical   Mode :logical   Mode :logical  \n FALSE:658                FALSE:651       FALSE:639       FALSE:652      \n TRUE :9                  TRUE :16        TRUE :28        TRUE :15       \n Echolocation    Levitation      Toxin and Disease Control   Banish       \n Mode :logical   Mode :logical   Mode :logical             Mode :logical  \n FALSE:665       FALSE:641       FALSE:657                 FALSE:666      \n TRUE :2         TRUE :26        TRUE :10                  TRUE :1        \n Energy Manipulation Heat Resistance Natural Weapons Time Travel    \n Mode :logical       Mode :logical   Mode :logical   Mode :logical  \n FALSE:615           FALSE:624       FALSE:609       FALSE:634      \n TRUE :52            TRUE :43        TRUE :58        TRUE :33       \n Enhanced Smell  Illusions       Thirstokinesis  Hair Manipulation\n Mode :logical   Mode :logical   Mode :logical   Mode :logical    \n FALSE:635       FALSE:629       FALSE:666       FALSE:666        \n TRUE :32        TRUE :38        TRUE :1         TRUE :1          \n Illumination    Omnipotent       Cloaking       Changing Armor \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:665       FALSE:660       FALSE:660       FALSE:666      \n TRUE :2         TRUE :7         TRUE :7         TRUE :1        \n Power Cosmic    Biokinesis      Water Control   Radiation Immunity\n Mode :logical   Mode :logical   Mode :logical   Mode :logical     \n FALSE:660       FALSE:666       FALSE:654       FALSE:657         \n TRUE :7         TRUE :1         TRUE :13        TRUE :10          \n Vision - Telescopic Toxin and Disease Resistance Spatial Awareness\n Mode :logical       Mode :logical                Mode :logical    \n FALSE:624           FALSE:619                    FALSE:666        \n TRUE :43            TRUE :48                     TRUE :1          \n Energy Resistance Telepathy Resistance Molecular Combustion Omnilingualism \n Mode :logical     Mode :logical        Mode :logical        Mode :logical  \n FALSE:660         FALSE:634            FALSE:665            FALSE:646      \n TRUE :7           TRUE :33             TRUE :2              TRUE :21       \n Portal Creation Magnetism       Mind Control Resistance Plant Control  \n Mode :logical   Mode :logical   Mode :logical           Mode :logical  \n FALSE:663       FALSE:656       FALSE:655               FALSE:659      \n TRUE :4         TRUE :11        TRUE :12                TRUE :8        \n   Sonar         Sonic Scream    Time Manipulation Enhanced Touch \n Mode :logical   Mode :logical   Mode :logical     Mode :logical  \n FALSE:663       FALSE:661       FALSE:647         FALSE:660      \n TRUE :4         TRUE :6         TRUE :20          TRUE :7        \n Magic Resistance Invisibility    Sub-Mariner     Radiation Absorption\n Mode :logical    Mode :logical   Mode :logical   Mode :logical       \n FALSE:661        FALSE:645       FALSE:647       FALSE:660           \n TRUE :6          TRUE :22        TRUE :20        TRUE :7             \n Intuitive aptitude Vision - Microscopic  Melting        Wind Control   \n Mode :logical      Mode :logical        Mode :logical   Mode :logical  \n FALSE:666          FALSE:648            FALSE:665       FALSE:664      \n TRUE :1            TRUE :19             TRUE :2         TRUE :3        \n Super Breath    Wallcrawling    Vision - Night  Vision - Infrared\n Mode :logical   Mode :logical   Mode :logical   Mode :logical    \n FALSE:644       FALSE:633       FALSE:633       FALSE:645        \n TRUE :23        TRUE :34        TRUE :34        TRUE :22         \n Grim Reaping    Matter Absorption The Force       Resurrection   \n Mode :logical   Mode :logical     Mode :logical   Mode :logical  \n FALSE:664       FALSE:656         FALSE:661       FALSE:652      \n TRUE :3         TRUE :11          TRUE :6         TRUE :15       \n Terrakinesis    Vision - Heat   Vitakinesis     Radar Sense    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:665       FALSE:648       FALSE:665       FALSE:661      \n TRUE :2         TRUE :19        TRUE :2         TRUE :6        \n Qwardian Power Ring Weather Control Vision - X-Ray  Vision - Thermal\n Mode :logical       Mode :logical   Mode :logical   Mode :logical   \n FALSE:665           FALSE:659       FALSE:644       FALSE:644       \n TRUE :2             TRUE :8         TRUE :23        TRUE :23        \n Web Creation    Reality Warping Odin Force      Symbiote Costume\n Mode :logical   Mode :logical   Mode :logical   Mode :logical   \n FALSE:653       FALSE:651       FALSE:665       FALSE:658       \n TRUE :14        TRUE :16        TRUE :2         TRUE :9         \n Speed Force     Phoenix Force   Molecular Dissipation Vision - Cryo  \n Mode :logical   Mode :logical   Mode :logical         Mode :logical  \n FALSE:666       FALSE:666       FALSE:666             FALSE:665      \n TRUE :1         TRUE :1         TRUE :1               TRUE :2        \n Omnipresent     Omniscient     \n Mode :logical   Mode :logical  \n FALSE:665       FALSE:665      \n TRUE :2         TRUE :2        \n\n\nO conjunto de dados “super_hero_powers” é composto por variáveis lógicas, e muitas delas!\nNenhuma delas possui valores faltantes. No entanto, diversas colunas apresentam um desbalanceamento considerável.\nVou verificar a presença de duplicatas nos dados.\n\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;% \n  filter(!duplicated(hero_names))\n\nNenhuma linha foi removida.\nComo observamos, nenhuma delas possui valores ausentes, eliminando a necessidade de verificar linhas problemáticas, exceto por duplicatas.\n\n\n\nAgora, irei criar uma variável que represente a quantidade de poderes que cada personagem possui.\n\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;% \n  mutate(\n    n_poderes = rowSums(across(where(is.logical)))\n  ) \n\nComo mencionei, há um grande número de colunas e várias delas apresentam baixa frequência relativa. Essa situação pode levar a problemas na interpretação dos resultados, na precisão dos modelos e nas métricas de avaliação. Portanto, irei agrupar todas as variáveis que possuam uma distribuição altamente desequilibrada (10%).\n\n# Função para calcular frequência relativa de TRUE\nfrequencia_true &lt;- function(coluna) {\n  sum(coluna) / length(coluna)\n}\n\n# Identificar colunas com frequência relativa de TRUE menor que 10%\ncolunas_raras &lt;- \n  super_hero_powers %&gt;%\n  summarise(across(where(is.logical), ~ frequencia_true(.))) %&gt;%\n  unlist() %&gt;% \n  .[. &lt; 0.1] %&gt;% \n  names()\n\n# Criar a nova coluna UncommonPower\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;%\n  mutate(\n    UncommonPower = ifelse(rowSums(dplyr::select(., all_of(colunas_raras))) &gt; 0, TRUE, FALSE)\n    ) %&gt;%\n  dplyr::select(-all_of(colunas_raras))\n\nEu fiz um esforço para manter as informações possíveis dessas variáveis antes de realizar a exclusão. Isso foi feito criando uma contagem total do número de poderes antes da remoção. Além disso, a coluna que foi criada com as colunas excluídas também contém informações relacionadas a essas colunas que foram removidas.\nApesar de existirem técnicas mais elaboradas para a redução de dimensões, e embora algo similar seja alcançável por meio de métodos de regularização, não estou muito familiarizado com essas técnicas. Por isso, achei mais adequado seguir com a abordagem que descrevi.\n\n\n\n\nAgora vou unificar os dois bancos de dados para aproveitar ao máximo as informações na criação dos modelos.\nA função inner_join retornará apenas as linhas onde há correspondências nas colunas de junção.\n\nheroes_combined &lt;- \n  inner_join(\n  heroes_information,\n  super_hero_powers,\n  by = join_by(name==hero_names)\n  ) %&gt;% \n  janitor::clean_names()\n\nhead(heroes_combined)\n\n# A tibble: 6 × 35\n  name       gender eye_color race  hair_color height publisher alignment weight\n  &lt;chr&gt;      &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;      &lt;dbl&gt;\n1 A-Bomb     Male   yellow    Human No Hair       203 Marvel C… good         441\n2 Abe Sapien Male   blue      Icth… No Hair       191 Dark Hor… good          65\n3 Abin Sur   Male   blue      Unga… No Hair       185 DC Comics good          90\n4 Abominati… Male   green     Huma… No Hair       203 Marvel C… bad          441\n5 Abraxas    Male   blue      Cosm… Black          NA Marvel C… bad           NA\n6 Absorbing… Male   blue      Human No Hair       193 Marvel C… bad          122\n# ℹ 26 more variables: imc &lt;dbl&gt;, categoria_imc &lt;chr&gt;, agility &lt;lgl&gt;,\n#   accelerated_healing &lt;lgl&gt;, durability &lt;lgl&gt;, stealth &lt;lgl&gt;,\n#   energy_absorption &lt;lgl&gt;, flight &lt;lgl&gt;, marksmanship &lt;lgl&gt;,\n#   weapons_master &lt;lgl&gt;, longevity &lt;lgl&gt;, intelligence &lt;lgl&gt;,\n#   super_strength &lt;lgl&gt;, telepathy &lt;lgl&gt;, energy_blasts &lt;lgl&gt;, stamina &lt;lgl&gt;,\n#   super_speed &lt;lgl&gt;, teleportation &lt;lgl&gt;, enhanced_senses &lt;lgl&gt;,\n#   immortality &lt;lgl&gt;, reflexes &lt;lgl&gt;, invulnerability &lt;lgl&gt;, …\n\n\n\nstr(heroes_combined)\n\ntibble [643 × 35] (S3: tbl_df/tbl/data.frame)\n $ name               : chr [1:643] \"A-Bomb\" \"Abe Sapien\" \"Abin Sur\" \"Abomination\" ...\n $ gender             : Factor w/ 2 levels \"Female\",\"Male\": 2 2 2 2 2 2 2 2 2 2 ...\n $ eye_color          : Factor w/ 22 levels \"amber\",\"black\",..: 19 3 3 8 3 3 3 3 6 NA ...\n $ race               : Factor w/ 61 levels \"Alien\",\"Alpha\",..: 23 32 55 31 11 23 NA 23 23 NA ...\n $ hair_color         : Factor w/ 29 levels \"Auburn\",\"black\",..: 17 17 17 17 3 17 6 6 8 NA ...\n $ height             : num [1:643] 203 191 185 203 NA 193 NA 185 178 191 ...\n $ publisher          : Factor w/ 24 levels \"ABC Studios\",..: 12 2 3 12 12 12 14 3 12 12 ...\n $ alignment          : Factor w/ 3 levels \"bad\",\"good\",\"neutral\": 2 2 2 1 1 1 2 2 2 2 ...\n $ weight             : num [1:643] 441 65 90 441 NA 122 NA 88 81 104 ...\n $ imc                : num [1:643] 107 17.8 26.3 107 NA 32.8 NA 25.7 25.6 28.5 ...\n $ categoria_imc      : chr [1:643] \"Obesidade III\" \"Abaixo do peso\" \"Sobrepeso\" \"Obesidade III\" ...\n $ agility            : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ accelerated_healing: logi [1:643] TRUE TRUE FALSE TRUE FALSE FALSE ...\n $ durability         : logi [1:643] TRUE TRUE FALSE FALSE FALSE TRUE ...\n $ stealth            : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ energy_absorption  : logi [1:643] FALSE FALSE FALSE FALSE FALSE TRUE ...\n $ flight             : logi [1:643] FALSE FALSE FALSE FALSE TRUE FALSE ...\n $ marksmanship       : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ weapons_master     : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ longevity          : logi [1:643] TRUE TRUE FALSE FALSE FALSE FALSE ...\n $ intelligence       : logi [1:643] FALSE TRUE FALSE TRUE TRUE FALSE ...\n $ super_strength     : logi [1:643] TRUE TRUE FALSE TRUE TRUE TRUE ...\n $ telepathy          : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ energy_blasts      : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ stamina            : logi [1:643] TRUE TRUE FALSE TRUE FALSE FALSE ...\n $ super_speed        : logi [1:643] FALSE FALSE FALSE TRUE TRUE FALSE ...\n $ teleportation      : logi [1:643] FALSE FALSE FALSE FALSE TRUE FALSE ...\n $ enhanced_senses    : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ immortality        : logi [1:643] FALSE TRUE FALSE FALSE TRUE FALSE ...\n $ reflexes           : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ invulnerability    : logi [1:643] FALSE FALSE FALSE TRUE TRUE TRUE ...\n $ force_fields       : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ enhanced_hearing   : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ n_poderes          : num [1:643] 7 16 1 8 14 11 3 10 1 6 ...\n $ uncommon_power     : logi [1:643] TRUE TRUE TRUE TRUE TRUE TRUE ...\n\n\n\n\n\nAgora que os dados foram unificados, vamos criar algumas visualizações dos dados.\nVou comentar esse código, uma vez que ele gera um relatório em HTML.\nExistem variáveis categóricas desbalanceadas. É possível observar que as variáveis categóricas relacionadas aos atributos físicos possuem contagens frequentemente altas de NA. Isso pode ser devido ao uso de uniformes, máscaras, entre outros fatores. Seria viável criar uma variável para representar essa informação?\nParece que os dados contínuos não apresentam uma distribuição normal e também possuem valores atípicos (outliers). Vamos proceder com a verificação utilizando o teste de Shapiro-Wilk.\n\n# Aplicar o teste de Shapiro-Wilk e apresentar os resultados de forma tidy\nheroes_combined %&gt;%\n  dplyr::select(height,weight,imc) %&gt;% \n  summarise(across(everything(), ~ broom::tidy(shapiro.test(.)))) %&gt;%\n  pivot_longer(everything(), names_to = \"variavel\", values_to = \"resultado\") \n\n# A tibble: 3 × 2\n  variavel resultado$statistic $p.value $method                    \n  &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                      \n1 height                0.345  4.20e-38 Shapiro-Wilk normality test\n2 weight                0.581  1.11e-31 Shapiro-Wilk normality test\n3 imc                   0.0893 1.01e-41 Shapiro-Wilk normality test\n\n\nDe fato, os dados não exibem uma distribuição normal.\n\n\nVamos agora identificar e substituir os valores atípicos (outliers).\nVamos proceder da seguinte maneira: substituiremos os valores que estão abaixo do limite inferior \\((Q1 - 1,5 \\times IQR)\\) pelo valor do 5º percentil e substituiremos os valores excepcionalmente altos acima do limite superior \\((Q3 + 1,5 \\times IQR)\\) pelo valor do 95º percentil.\n\n# Função para substituir outliers\nsubstituir_outliers &lt;- function(x) {\n  if (any(!is.na(x))) {\n    quantiles &lt;- quantile(x[!is.na(x)], c(0.25, 0.75))\n    iqr &lt;- quantiles[2] - quantiles[1]\n    lower_fence &lt;- quantiles[1] - 1.5 * iqr\n    upper_fence &lt;- quantiles[2] + 1.5 * iqr\n    x &lt;- ifelse(!is.na(x), ifelse(x &lt; lower_fence, quantiles[1], ifelse(x &gt; upper_fence, quantiles[2], x)), x)\n  }\n  x\n}\n\n# Identificar colunas numéricas\ncolunas_numericas &lt;- heroes_combined %&gt;% dplyr::select(where(is.numeric)) %&gt;% colnames()\n\n# Substituir outliers nas colunas numéricas\nheroes_combined &lt;- heroes_combined %&gt;%\n  mutate(across(all_of(colunas_numericas), substituir_outliers))\n\n\n\n\nVamos analisar a correlação entre os dados numéricos. Essa informação será útil tanto para identificar possíveis problemas de colinearidade quanto para a tarefa de regressão. Optei pelo teste de Spearman por ser mais robusto a aoutliers e ausência de normalidade da distribuição.\n\ndados_numericos &lt;- \n  heroes_combined %&gt;% \n  dplyr::select(height,weight,imc) %&gt;% \n  tidyr::drop_na()\n\n# Calcular a matriz de correlação\nmatriz_correlacao &lt;- cor(dados_numericos, method = \"spearman\")\n\nprint(matriz_correlacao)\n\n          height    weight       imc\nheight 1.0000000 0.7734864 0.6187391\nweight 0.7734864 1.0000000 0.9007493\nimc    0.6187391 0.9007493 1.0000000\n\n\nÉ importante manter em mente que a variável “peso” está altamente correlacionada com o IMC. Essa correlação era esperada, considerando que o IMC foi calculado a partir do peso e da altura.\nVou verificar novamente a distribução dos dados.\n\n# Aplicar o teste de Shapiro-Wilk e apresentar os resultados de forma tidy\nheroes_combined %&gt;%\n  dplyr::select(height,weight,imc) %&gt;% \n  tidyr::drop_na() %&gt;% \n  summarise(across(everything(), ~ broom::tidy(shapiro.test(.)))) %&gt;%\n  pivot_longer(everything(), names_to = \"variavel\", values_to = \"resultado\") \n\n# A tibble: 3 × 2\n  variavel resultado$statistic $p.value $method                    \n  &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                      \n1 height                 0.988 1.11e- 3 Shapiro-Wilk normality test\n2 weight                 0.955 1.51e-10 Shapiro-Wilk normality test\n3 imc                    0.948 1.79e-11 Shapiro-Wilk normality test\n\n\nÉ relevante observar que a remoção dos outliers não resultou na normalização da distribuição dos dados. Isso é um aspecto importante a ser considerado ao criar os modelos.\nA seguir, vou salvar os dados em um arquivo .csv para utilizá-lo nas próximas etapas.\n\n\n\n\n\n#Salvando os dados\n\nwrite.csv(heroes_combined, file = \"dados_limpos.csv\")\n\n\n\n\n\nSubstituição de valores ausentes, tanto numéricos como categóricos, por NA.\nRemoção de linhas duplicadas.\nCriação de uma variável numérica IMC.\nCriação de uma variável categórica a partir do IMC.\nCriação de uma variável para representar o número total de poderes por personagem.\nSubstituição de outliers.\nVerificação da correlação entre valores numéricos.\nIdentificação de alta correlação entre peso e IMC.\nRedução do número de variáveis categóricas raras entre as amostras.\nObservação de que os dados numéricos ainda não apresentam distribuição normal."
  },
  {
    "objectID": "cleaning.html#carregando-e-avaliando-os-dados",
    "href": "cleaning.html#carregando-e-avaliando-os-dados",
    "title": "Cleaning",
    "section": "",
    "text": "Optei por baixar os dados e salvá-los na pasta do projeto, eliminando assim a necessidade de informar um caminho específico até eles.\n\nheroes_information &lt;- \n  read_csv(\"heroes_information.csv\")\n\nsuper_hero_powers &lt;- \n  read_csv(\"super_hero_powers.csv\")\n\nUma vez carregados, vou visualizar algumas informações básicas dos dados. Começarei com o conjunto de dados heroes_information.\n\nhead(heroes_information)\n\n# A tibble: 6 × 11\n   ...1 name          Gender `Eye color` Race      `Hair color` Height Publisher\n  &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    \n1     0 A-Bomb        Male   yellow      Human     No Hair         203 Marvel C…\n2     1 Abe Sapien    Male   blue        Icthyo S… No Hair         191 Dark Hor…\n3     2 Abin Sur      Male   blue        Ungaran   No Hair         185 DC Comics\n4     3 Abomination   Male   green       Human / … No Hair         203 Marvel C…\n5     4 Abraxas       Male   blue        Cosmic E… Black           -99 Marvel C…\n6     5 Absorbing Man Male   blue        Human     No Hair         193 Marvel C…\n# ℹ 3 more variables: `Skin color` &lt;chr&gt;, Alignment &lt;chr&gt;, Weight &lt;dbl&gt;\n\nhead(summary(heroes_information))\n\n      ...1           name              Gender           Eye color        \n Min.   :  0.0   Length:734         Length:734         Length:734        \n 1st Qu.:183.2   Class :character   Class :character   Class :character  \n Median :366.5   Mode  :character   Mode  :character   Mode  :character  \n Mean   :366.5                                                           \n 3rd Qu.:549.8                                                           \n Max.   :733.0                                                           \n     Race            Hair color            Height       Publisher        \n Length:734         Length:734         Min.   :-99.0   Length:734        \n Class :character   Class :character   1st Qu.:-99.0   Class :character  \n Mode  :character   Mode  :character   Median :175.0   Mode  :character  \n                                       Mean   :102.3                     \n                                       3rd Qu.:185.0                     \n                                       Max.   :975.0                     \n  Skin color         Alignment             Weight      \n Length:734         Length:734         Min.   :-99.00  \n Class :character   Class :character   1st Qu.:-99.00  \n Mode  :character   Mode  :character   Median : 62.00  \n                                       Mean   : 43.86  \n                                       3rd Qu.: 90.00  \n                                       Max.   :900.00  \n\n\nO conjunto de dados “heroes_information” possui tanto variáveis categóricas como numéricas. No entanto, é possível observar que a classe das variáveis está definida como “character” e há valores faltantes, tanto em variáveis categóricas quanto numéricas.\nOs valores faltantes nos dados numéricos são indicados por -99 e NA. Dado que valores negativos não fazem sentido no contexto dos dados, a presença do valor -99 indica de fato a ausência de valor, da mesma forma que o NA. Portanto, ambos os valores, -99 e NA, indicam que os dados numéricos estão incompletos.\nAs variáveis categóricas têm seus valores faltantes representados por “-”, com exceção da coluna “Publisher”, que contém NA para os valores ausentes.\nAgora, vamos abordar esses pontos.\n\n\nAbaixo, realizaremos as seguintes ações: remover a primeira coluna, substituir -99 e - por NA e converter as colunas da classe “character” para “factor”.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  janitor::clean_names() %&gt;% \n  dplyr::select(-1) %&gt;% \n  mutate(\n    across(where(is.double), ~ if_else(. == -99, NA_real_, .)),\n    across(where(is.character), ~ if_else(. == \"-\", NA, .)),\n    across(where(is.character), as.factor),\n    name = as.character(name)\n    )\n\nVou verificar a existência de duplicatas e, caso existam, removê-las.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  filter(!duplicated(name))\n\n\nhead(heroes_information)\n\n# A tibble: 6 × 10\n  name   gender eye_color race  hair_color height publisher skin_color alignment\n  &lt;chr&gt;  &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;    \n1 A-Bomb Male   yellow    Human No Hair       203 Marvel C… &lt;NA&gt;       good     \n2 Abe S… Male   blue      Icth… No Hair       191 Dark Hor… blue       good     \n3 Abin … Male   blue      Unga… No Hair       185 DC Comics red        good     \n4 Abomi… Male   green     Huma… No Hair       203 Marvel C… &lt;NA&gt;       bad      \n5 Abrax… Male   blue      Cosm… Black          NA Marvel C… &lt;NA&gt;       bad      \n6 Absor… Male   blue      Human No Hair       193 Marvel C… &lt;NA&gt;       bad      \n# ℹ 1 more variable: weight &lt;dbl&gt;\n\n\n19 linhas foram removidas.\n\nhead(summary(heroes_information))\n\n     name              gender      eye_color                  race    \n Length:715         Female:196   blue   :220   Human            :199  \n Class :character   Male  :491   brown  :125   Mutant           : 63  \n Mode  :character   NA's  : 28   green  : 71   God / Eternal    : 13  \n                                 red    : 45   Cyborg           : 11  \n                                 black  : 22   Human / Radiation: 11  \n                                 (Other): 67   (Other)          :118  \n   hair_color      height                  publisher     skin_color \n Black  :154   Min.   : 15.2   Marvel Comics    :379   green  : 21  \n Blond  : 97   1st Qu.:173.5   DC Comics        :206   blue   :  9  \n Brown  : 82   Median :183.0   NBC - Heroes     : 19   red    :  9  \n No Hair: 75   Mean   :186.9   Dark Horse Comics: 17   white  :  7  \n Red    : 49   3rd Qu.:190.2   George Lucas     : 14   grey   :  5  \n (Other): 92   Max.   :975.0   (Other)          : 65   (Other): 20  \n   alignment       weight     \n bad    :205   Min.   :  2.0  \n good   :479   1st Qu.: 61.0  \n neutral: 24   Median : 81.0  \n NA's   :  7   Mean   :112.9  \n               3rd Qu.:108.0  \n               Max.   :900.0  \n\n\nCom exceção das colunas “alignment”, “publisher” e “gender”, todas as outras variáveis possuem um grande número de valores ausentes.\nExistem classes que estão separadas devido a erros ortográficos e de digitação, como “Black Hair” e “black hair”. No entanto, isso ocorre em classes com baixíssima frequência de ocorrência e provavelmente serão agrupadas em algum momento. Por enquanto, não vou realizar modificações nesse aspecto.\nA coluna “skin_color” praticamente não possui registros, com mais de 50% de ausências, e será descartada.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  dplyr::select(-skin_color)\n\nvamos verificar se existêm linhas problemáticas e remove-las\n\n# Porcentagem de valores faltantes permitida (50%)\nlimite_faltantes &lt;- 0.5\n\n# Função para verificar porcentagem de valores faltantes em uma linha\nporcentagem_faltantes &lt;- function(linha) {\n  sum(is.na(linha)) / length(linha)\n}\n\n# Filtrar e remover linhas com mais de 50% de valores faltantes\nheroes_information &lt;- heroes_information %&gt;%\ndplyr::filter(porcentagem_faltantes(row) &lt;= limite_faltantes)\n\nAparentemente, nenhuma linha possui mais do que 50% de informações ausentes.\nOs demais problemas desse conjunto de dados serão tratados posteriormente, dependendo do tipo de tarefa que será realizada.\nOs principais problemas desse conjunto até agora foram:\n\nMuitos valores ausentes\nClasses desbalanceadas\n\nAntes de prosseguir para as visualizações, vou criar algumas variáveis que possam ser úteis para as tarefas solicitadas.\n\n\n\nNeste momento, vou criar um índice de massa corporal (IMC) e 6 categorias relacionadas a esse índice. Isso me permitirá avaliar o quão “fit” os personagens estão.\nÉ importante notar que essas novas variáveis também serão influenciadas pelos problemas descritos anteriormente.\n\nheroes_information &lt;- \n  heroes_information %&gt;% \n  janitor::clean_names() %&gt;% \n        mutate(\n          imc = round(weight/((height/100)^2),digits=1),\n          categoria_imc = case_when(\n                    imc &lt; 18.5 ~ \"Abaixo do peso\",\n                    imc &gt;= 18.5 & imc &lt;= 24.9 ~ \"Peso normal\",\n                    imc &gt;= 25 & imc &lt;= 29.9 ~ \"Sobrepeso\",\n                    imc &gt;= 30 & imc &lt;= 34.9 ~ \"Obesidade I\",\n                    imc &gt;= 35 & imc &lt;= 39.9 ~ \"Obesidade II\",\n                    imc &gt;= 40 ~ \"Obesidade III\"\n                    )\n        )\n\n\n\n\nAgora, vou dar uma olhada no segundo conjunto de dados.\n\nhead(super_hero_powers)\n\n# A tibble: 6 × 168\n  hero_names  Agility `Accelerated Healing` `Lantern Power Ring`\n  &lt;chr&gt;       &lt;lgl&gt;   &lt;lgl&gt;                 &lt;lgl&gt;               \n1 3-D Man     TRUE    FALSE                 FALSE               \n2 A-Bomb      FALSE   TRUE                  FALSE               \n3 Abe Sapien  TRUE    TRUE                  FALSE               \n4 Abin Sur    FALSE   FALSE                 TRUE                \n5 Abomination FALSE   TRUE                  FALSE               \n6 Abraxas     FALSE   FALSE                 FALSE               \n# ℹ 164 more variables: `Dimensional Awareness` &lt;lgl&gt;, `Cold Resistance` &lt;lgl&gt;,\n#   Durability &lt;lgl&gt;, Stealth &lt;lgl&gt;, `Energy Absorption` &lt;lgl&gt;, Flight &lt;lgl&gt;,\n#   `Danger Sense` &lt;lgl&gt;, `Underwater breathing` &lt;lgl&gt;, Marksmanship &lt;lgl&gt;,\n#   `Weapons Master` &lt;lgl&gt;, `Power Augmentation` &lt;lgl&gt;,\n#   `Animal Attributes` &lt;lgl&gt;, Longevity &lt;lgl&gt;, Intelligence &lt;lgl&gt;,\n#   `Super Strength` &lt;lgl&gt;, Cryokinesis &lt;lgl&gt;, Telepathy &lt;lgl&gt;,\n#   `Energy Armor` &lt;lgl&gt;, `Energy Blasts` &lt;lgl&gt;, Duplication &lt;lgl&gt;, …\n\nhead(summary(super_hero_powers))\n\n  hero_names         Agility        Accelerated Healing Lantern Power Ring\n Length:667         Mode :logical   Mode :logical       Mode :logical     \n Class :character   FALSE:425       FALSE:489           FALSE:656         \n Mode  :character   TRUE :242       TRUE :178           TRUE :11          \n Dimensional Awareness Cold Resistance Durability       Stealth       \n Mode :logical         Mode :logical   Mode :logical   Mode :logical  \n FALSE:642             FALSE:620       FALSE:410       FALSE:541      \n TRUE :25              TRUE :47        TRUE :257       TRUE :126      \n Energy Absorption   Flight        Danger Sense    Underwater breathing\n Mode :logical     Mode :logical   Mode :logical   Mode :logical       \n FALSE:590         FALSE:455       FALSE:637       FALSE:646           \n TRUE :77          TRUE :212       TRUE :30        TRUE :21            \n Marksmanship    Weapons Master  Power Augmentation Animal Attributes\n Mode :logical   Mode :logical   Mode :logical      Mode :logical    \n FALSE:548       FALSE:562       FALSE:659          FALSE:642        \n TRUE :119       TRUE :105       TRUE :8            TRUE :25         \n Longevity       Intelligence    Super Strength  Cryokinesis    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:554       FALSE:509       FALSE:307       FALSE:648      \n TRUE :113       TRUE :158       TRUE :360       TRUE :19       \n Telepathy       Energy Armor    Energy Blasts   Duplication    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:575       FALSE:659       FALSE:520       FALSE:651      \n TRUE :92        TRUE :8         TRUE :147       TRUE :16       \n Size Changing   Density Control  Stamina        Astral Travel  \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:612       FALSE:652       FALSE:378       FALSE:663      \n TRUE :55        TRUE :15        TRUE :289       TRUE :4        \n Audio Control   Dexterity        Omnitrix       Super Speed    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:660       FALSE:661       FALSE:666       FALSE:418      \n TRUE :7         TRUE :6         TRUE :1         TRUE :249      \n Possession      Animal Oriented Powers Weapon-based Powers Electrokinesis \n Mode :logical   Mode :logical          Mode :logical       Mode :logical  \n FALSE:659       FALSE:627              FALSE:609           FALSE:645      \n TRUE :8         TRUE :40               TRUE :58            TRUE :22       \n Darkforce Manipulation Death Touch     Teleportation   Enhanced Senses\n Mode :logical          Mode :logical   Mode :logical   Mode :logical  \n FALSE:657              FALSE:660       FALSE:595       FALSE:578      \n TRUE :10               TRUE :7         TRUE :72        TRUE :89       \n Telekinesis     Energy Beams      Magic         Hyperkinesis   \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:606       FALSE:625       FALSE:623       FALSE:666      \n TRUE :61        TRUE :42        TRUE :44        TRUE :1        \n    Jump         Clairvoyance    Dimensional Travel Power Sense    \n Mode :logical   Mode :logical   Mode :logical      Mode :logical  \n FALSE:602       FALSE:663       FALSE:644          FALSE:664      \n TRUE :65        TRUE :4         TRUE :23           TRUE :3        \n Shapeshifting   Peak Human Condition Immortality     Camouflage     \n Mode :logical   Mode :logical        Mode :logical   Mode :logical  \n FALSE:601       FALSE:637            FALSE:598       FALSE:646      \n TRUE :66        TRUE :30             TRUE :69        TRUE :21       \n Element Control  Phasing        Astral Projection Electrical Transport\n Mode :logical   Mode :logical   Mode :logical     Mode :logical       \n FALSE:659       FALSE:636       FALSE:638         FALSE:666           \n TRUE :8         TRUE :31        TRUE :29          TRUE :1             \n Fire Control    Projection      Summoning       Enhanced Memory\n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:635       FALSE:665       FALSE:663       FALSE:642      \n TRUE :32        TRUE :2         TRUE :4         TRUE :25       \n  Reflexes       Invulnerability Energy Constructs Force Fields   \n Mode :logical   Mode :logical   Mode :logical     Mode :logical  \n FALSE:503       FALSE:550       FALSE:629         FALSE:581      \n TRUE :164       TRUE :117       TRUE :38          TRUE :86       \n Self-Sustenance Anti-Gravity     Empathy        Power Nullifier\n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:630       FALSE:666       FALSE:648       FALSE:663      \n TRUE :37        TRUE :1         TRUE :19        TRUE :4        \n Radiation Control Psionic Powers  Elasticity      Substance Secretion\n Mode :logical     Mode :logical   Mode :logical   Mode :logical      \n FALSE:660         FALSE:618       FALSE:656       FALSE:650          \n TRUE :7           TRUE :49        TRUE :11        TRUE :17           \n Elemental Transmogrification Technopath/Cyberpath Photographic Reflexes\n Mode :logical                Mode :logical        Mode :logical        \n FALSE:661                    FALSE:644            FALSE:664            \n TRUE :6                      TRUE :23             TRUE :3              \n Seismic Power   Animation       Precognition    Mind Control   \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:664       FALSE:662       FALSE:645       FALSE:645      \n TRUE :3         TRUE :5         TRUE :22        TRUE :22       \n Fire Resistance Power Absorption Enhanced Hearing Nova Force     \n Mode :logical   Mode :logical    Mode :logical    Mode :logical  \n FALSE:649       FALSE:655        FALSE:595        FALSE:665      \n TRUE :18        TRUE :12         TRUE :72         TRUE :2        \n  Insanity       Hypnokinesis    Animal Control  Natural Armor  \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:662       FALSE:644       FALSE:658       FALSE:631      \n TRUE :5         TRUE :23        TRUE :9         TRUE :36       \n Intangibility   Enhanced Sight  Molecular Manipulation Heat Generation\n Mode :logical   Mode :logical   Mode :logical          Mode :logical  \n FALSE:647       FALSE:642       FALSE:625              FALSE:643      \n TRUE :20        TRUE :25        TRUE :42               TRUE :24       \n Adaptation       Gliding        Power Suit      Mind Blast     \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:662       FALSE:657       FALSE:634       FALSE:655      \n TRUE :5         TRUE :10        TRUE :33        TRUE :12       \n Probability Manipulation Gravity Control Regeneration    Light Control  \n Mode :logical            Mode :logical   Mode :logical   Mode :logical  \n FALSE:658                FALSE:651       FALSE:639       FALSE:652      \n TRUE :9                  TRUE :16        TRUE :28        TRUE :15       \n Echolocation    Levitation      Toxin and Disease Control   Banish       \n Mode :logical   Mode :logical   Mode :logical             Mode :logical  \n FALSE:665       FALSE:641       FALSE:657                 FALSE:666      \n TRUE :2         TRUE :26        TRUE :10                  TRUE :1        \n Energy Manipulation Heat Resistance Natural Weapons Time Travel    \n Mode :logical       Mode :logical   Mode :logical   Mode :logical  \n FALSE:615           FALSE:624       FALSE:609       FALSE:634      \n TRUE :52            TRUE :43        TRUE :58        TRUE :33       \n Enhanced Smell  Illusions       Thirstokinesis  Hair Manipulation\n Mode :logical   Mode :logical   Mode :logical   Mode :logical    \n FALSE:635       FALSE:629       FALSE:666       FALSE:666        \n TRUE :32        TRUE :38        TRUE :1         TRUE :1          \n Illumination    Omnipotent       Cloaking       Changing Armor \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:665       FALSE:660       FALSE:660       FALSE:666      \n TRUE :2         TRUE :7         TRUE :7         TRUE :1        \n Power Cosmic    Biokinesis      Water Control   Radiation Immunity\n Mode :logical   Mode :logical   Mode :logical   Mode :logical     \n FALSE:660       FALSE:666       FALSE:654       FALSE:657         \n TRUE :7         TRUE :1         TRUE :13        TRUE :10          \n Vision - Telescopic Toxin and Disease Resistance Spatial Awareness\n Mode :logical       Mode :logical                Mode :logical    \n FALSE:624           FALSE:619                    FALSE:666        \n TRUE :43            TRUE :48                     TRUE :1          \n Energy Resistance Telepathy Resistance Molecular Combustion Omnilingualism \n Mode :logical     Mode :logical        Mode :logical        Mode :logical  \n FALSE:660         FALSE:634            FALSE:665            FALSE:646      \n TRUE :7           TRUE :33             TRUE :2              TRUE :21       \n Portal Creation Magnetism       Mind Control Resistance Plant Control  \n Mode :logical   Mode :logical   Mode :logical           Mode :logical  \n FALSE:663       FALSE:656       FALSE:655               FALSE:659      \n TRUE :4         TRUE :11        TRUE :12                TRUE :8        \n   Sonar         Sonic Scream    Time Manipulation Enhanced Touch \n Mode :logical   Mode :logical   Mode :logical     Mode :logical  \n FALSE:663       FALSE:661       FALSE:647         FALSE:660      \n TRUE :4         TRUE :6         TRUE :20          TRUE :7        \n Magic Resistance Invisibility    Sub-Mariner     Radiation Absorption\n Mode :logical    Mode :logical   Mode :logical   Mode :logical       \n FALSE:661        FALSE:645       FALSE:647       FALSE:660           \n TRUE :6          TRUE :22        TRUE :20        TRUE :7             \n Intuitive aptitude Vision - Microscopic  Melting        Wind Control   \n Mode :logical      Mode :logical        Mode :logical   Mode :logical  \n FALSE:666          FALSE:648            FALSE:665       FALSE:664      \n TRUE :1            TRUE :19             TRUE :2         TRUE :3        \n Super Breath    Wallcrawling    Vision - Night  Vision - Infrared\n Mode :logical   Mode :logical   Mode :logical   Mode :logical    \n FALSE:644       FALSE:633       FALSE:633       FALSE:645        \n TRUE :23        TRUE :34        TRUE :34        TRUE :22         \n Grim Reaping    Matter Absorption The Force       Resurrection   \n Mode :logical   Mode :logical     Mode :logical   Mode :logical  \n FALSE:664       FALSE:656         FALSE:661       FALSE:652      \n TRUE :3         TRUE :11          TRUE :6         TRUE :15       \n Terrakinesis    Vision - Heat   Vitakinesis     Radar Sense    \n Mode :logical   Mode :logical   Mode :logical   Mode :logical  \n FALSE:665       FALSE:648       FALSE:665       FALSE:661      \n TRUE :2         TRUE :19        TRUE :2         TRUE :6        \n Qwardian Power Ring Weather Control Vision - X-Ray  Vision - Thermal\n Mode :logical       Mode :logical   Mode :logical   Mode :logical   \n FALSE:665           FALSE:659       FALSE:644       FALSE:644       \n TRUE :2             TRUE :8         TRUE :23        TRUE :23        \n Web Creation    Reality Warping Odin Force      Symbiote Costume\n Mode :logical   Mode :logical   Mode :logical   Mode :logical   \n FALSE:653       FALSE:651       FALSE:665       FALSE:658       \n TRUE :14        TRUE :16        TRUE :2         TRUE :9         \n Speed Force     Phoenix Force   Molecular Dissipation Vision - Cryo  \n Mode :logical   Mode :logical   Mode :logical         Mode :logical  \n FALSE:666       FALSE:666       FALSE:666             FALSE:665      \n TRUE :1         TRUE :1         TRUE :1               TRUE :2        \n Omnipresent     Omniscient     \n Mode :logical   Mode :logical  \n FALSE:665       FALSE:665      \n TRUE :2         TRUE :2        \n\n\nO conjunto de dados “super_hero_powers” é composto por variáveis lógicas, e muitas delas!\nNenhuma delas possui valores faltantes. No entanto, diversas colunas apresentam um desbalanceamento considerável.\nVou verificar a presença de duplicatas nos dados.\n\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;% \n  filter(!duplicated(hero_names))\n\nNenhuma linha foi removida.\nComo observamos, nenhuma delas possui valores ausentes, eliminando a necessidade de verificar linhas problemáticas, exceto por duplicatas.\n\n\n\nAgora, irei criar uma variável que represente a quantidade de poderes que cada personagem possui.\n\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;% \n  mutate(\n    n_poderes = rowSums(across(where(is.logical)))\n  ) \n\nComo mencionei, há um grande número de colunas e várias delas apresentam baixa frequência relativa. Essa situação pode levar a problemas na interpretação dos resultados, na precisão dos modelos e nas métricas de avaliação. Portanto, irei agrupar todas as variáveis que possuam uma distribuição altamente desequilibrada (10%).\n\n# Função para calcular frequência relativa de TRUE\nfrequencia_true &lt;- function(coluna) {\n  sum(coluna) / length(coluna)\n}\n\n# Identificar colunas com frequência relativa de TRUE menor que 10%\ncolunas_raras &lt;- \n  super_hero_powers %&gt;%\n  summarise(across(where(is.logical), ~ frequencia_true(.))) %&gt;%\n  unlist() %&gt;% \n  .[. &lt; 0.1] %&gt;% \n  names()\n\n# Criar a nova coluna UncommonPower\nsuper_hero_powers &lt;- \n  super_hero_powers %&gt;%\n  mutate(\n    UncommonPower = ifelse(rowSums(dplyr::select(., all_of(colunas_raras))) &gt; 0, TRUE, FALSE)\n    ) %&gt;%\n  dplyr::select(-all_of(colunas_raras))\n\nEu fiz um esforço para manter as informações possíveis dessas variáveis antes de realizar a exclusão. Isso foi feito criando uma contagem total do número de poderes antes da remoção. Além disso, a coluna que foi criada com as colunas excluídas também contém informações relacionadas a essas colunas que foram removidas.\nApesar de existirem técnicas mais elaboradas para a redução de dimensões, e embora algo similar seja alcançável por meio de métodos de regularização, não estou muito familiarizado com essas técnicas. Por isso, achei mais adequado seguir com a abordagem que descrevi."
  },
  {
    "objectID": "cleaning.html#combinando-os-dados",
    "href": "cleaning.html#combinando-os-dados",
    "title": "Cleaning",
    "section": "",
    "text": "Agora vou unificar os dois bancos de dados para aproveitar ao máximo as informações na criação dos modelos.\nA função inner_join retornará apenas as linhas onde há correspondências nas colunas de junção.\n\nheroes_combined &lt;- \n  inner_join(\n  heroes_information,\n  super_hero_powers,\n  by = join_by(name==hero_names)\n  ) %&gt;% \n  janitor::clean_names()\n\nhead(heroes_combined)\n\n# A tibble: 6 × 35\n  name       gender eye_color race  hair_color height publisher alignment weight\n  &lt;chr&gt;      &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;      &lt;dbl&gt;\n1 A-Bomb     Male   yellow    Human No Hair       203 Marvel C… good         441\n2 Abe Sapien Male   blue      Icth… No Hair       191 Dark Hor… good          65\n3 Abin Sur   Male   blue      Unga… No Hair       185 DC Comics good          90\n4 Abominati… Male   green     Huma… No Hair       203 Marvel C… bad          441\n5 Abraxas    Male   blue      Cosm… Black          NA Marvel C… bad           NA\n6 Absorbing… Male   blue      Human No Hair       193 Marvel C… bad          122\n# ℹ 26 more variables: imc &lt;dbl&gt;, categoria_imc &lt;chr&gt;, agility &lt;lgl&gt;,\n#   accelerated_healing &lt;lgl&gt;, durability &lt;lgl&gt;, stealth &lt;lgl&gt;,\n#   energy_absorption &lt;lgl&gt;, flight &lt;lgl&gt;, marksmanship &lt;lgl&gt;,\n#   weapons_master &lt;lgl&gt;, longevity &lt;lgl&gt;, intelligence &lt;lgl&gt;,\n#   super_strength &lt;lgl&gt;, telepathy &lt;lgl&gt;, energy_blasts &lt;lgl&gt;, stamina &lt;lgl&gt;,\n#   super_speed &lt;lgl&gt;, teleportation &lt;lgl&gt;, enhanced_senses &lt;lgl&gt;,\n#   immortality &lt;lgl&gt;, reflexes &lt;lgl&gt;, invulnerability &lt;lgl&gt;, …\n\n\n\nstr(heroes_combined)\n\ntibble [643 × 35] (S3: tbl_df/tbl/data.frame)\n $ name               : chr [1:643] \"A-Bomb\" \"Abe Sapien\" \"Abin Sur\" \"Abomination\" ...\n $ gender             : Factor w/ 2 levels \"Female\",\"Male\": 2 2 2 2 2 2 2 2 2 2 ...\n $ eye_color          : Factor w/ 22 levels \"amber\",\"black\",..: 19 3 3 8 3 3 3 3 6 NA ...\n $ race               : Factor w/ 61 levels \"Alien\",\"Alpha\",..: 23 32 55 31 11 23 NA 23 23 NA ...\n $ hair_color         : Factor w/ 29 levels \"Auburn\",\"black\",..: 17 17 17 17 3 17 6 6 8 NA ...\n $ height             : num [1:643] 203 191 185 203 NA 193 NA 185 178 191 ...\n $ publisher          : Factor w/ 24 levels \"ABC Studios\",..: 12 2 3 12 12 12 14 3 12 12 ...\n $ alignment          : Factor w/ 3 levels \"bad\",\"good\",\"neutral\": 2 2 2 1 1 1 2 2 2 2 ...\n $ weight             : num [1:643] 441 65 90 441 NA 122 NA 88 81 104 ...\n $ imc                : num [1:643] 107 17.8 26.3 107 NA 32.8 NA 25.7 25.6 28.5 ...\n $ categoria_imc      : chr [1:643] \"Obesidade III\" \"Abaixo do peso\" \"Sobrepeso\" \"Obesidade III\" ...\n $ agility            : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ accelerated_healing: logi [1:643] TRUE TRUE FALSE TRUE FALSE FALSE ...\n $ durability         : logi [1:643] TRUE TRUE FALSE FALSE FALSE TRUE ...\n $ stealth            : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ energy_absorption  : logi [1:643] FALSE FALSE FALSE FALSE FALSE TRUE ...\n $ flight             : logi [1:643] FALSE FALSE FALSE FALSE TRUE FALSE ...\n $ marksmanship       : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ weapons_master     : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ longevity          : logi [1:643] TRUE TRUE FALSE FALSE FALSE FALSE ...\n $ intelligence       : logi [1:643] FALSE TRUE FALSE TRUE TRUE FALSE ...\n $ super_strength     : logi [1:643] TRUE TRUE FALSE TRUE TRUE TRUE ...\n $ telepathy          : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ energy_blasts      : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ stamina            : logi [1:643] TRUE TRUE FALSE TRUE FALSE FALSE ...\n $ super_speed        : logi [1:643] FALSE FALSE FALSE TRUE TRUE FALSE ...\n $ teleportation      : logi [1:643] FALSE FALSE FALSE FALSE TRUE FALSE ...\n $ enhanced_senses    : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ immortality        : logi [1:643] FALSE TRUE FALSE FALSE TRUE FALSE ...\n $ reflexes           : logi [1:643] FALSE TRUE FALSE FALSE FALSE FALSE ...\n $ invulnerability    : logi [1:643] FALSE FALSE FALSE TRUE TRUE TRUE ...\n $ force_fields       : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ enhanced_hearing   : logi [1:643] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ n_poderes          : num [1:643] 7 16 1 8 14 11 3 10 1 6 ...\n $ uncommon_power     : logi [1:643] TRUE TRUE TRUE TRUE TRUE TRUE ..."
  },
  {
    "objectID": "cleaning.html#º-eda",
    "href": "cleaning.html#º-eda",
    "title": "Cleaning",
    "section": "",
    "text": "Agora que os dados foram unificados, vamos criar algumas visualizações dos dados.\nVou comentar esse código, uma vez que ele gera um relatório em HTML.\nExistem variáveis categóricas desbalanceadas. É possível observar que as variáveis categóricas relacionadas aos atributos físicos possuem contagens frequentemente altas de NA. Isso pode ser devido ao uso de uniformes, máscaras, entre outros fatores. Seria viável criar uma variável para representar essa informação?\nParece que os dados contínuos não apresentam uma distribuição normal e também possuem valores atípicos (outliers). Vamos proceder com a verificação utilizando o teste de Shapiro-Wilk.\n\n# Aplicar o teste de Shapiro-Wilk e apresentar os resultados de forma tidy\nheroes_combined %&gt;%\n  dplyr::select(height,weight,imc) %&gt;% \n  summarise(across(everything(), ~ broom::tidy(shapiro.test(.)))) %&gt;%\n  pivot_longer(everything(), names_to = \"variavel\", values_to = \"resultado\") \n\n# A tibble: 3 × 2\n  variavel resultado$statistic $p.value $method                    \n  &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                      \n1 height                0.345  4.20e-38 Shapiro-Wilk normality test\n2 weight                0.581  1.11e-31 Shapiro-Wilk normality test\n3 imc                   0.0893 1.01e-41 Shapiro-Wilk normality test\n\n\nDe fato, os dados não exibem uma distribuição normal.\n\n\nVamos agora identificar e substituir os valores atípicos (outliers).\nVamos proceder da seguinte maneira: substituiremos os valores que estão abaixo do limite inferior \\((Q1 - 1,5 \\times IQR)\\) pelo valor do 5º percentil e substituiremos os valores excepcionalmente altos acima do limite superior \\((Q3 + 1,5 \\times IQR)\\) pelo valor do 95º percentil.\n\n# Função para substituir outliers\nsubstituir_outliers &lt;- function(x) {\n  if (any(!is.na(x))) {\n    quantiles &lt;- quantile(x[!is.na(x)], c(0.25, 0.75))\n    iqr &lt;- quantiles[2] - quantiles[1]\n    lower_fence &lt;- quantiles[1] - 1.5 * iqr\n    upper_fence &lt;- quantiles[2] + 1.5 * iqr\n    x &lt;- ifelse(!is.na(x), ifelse(x &lt; lower_fence, quantiles[1], ifelse(x &gt; upper_fence, quantiles[2], x)), x)\n  }\n  x\n}\n\n# Identificar colunas numéricas\ncolunas_numericas &lt;- heroes_combined %&gt;% dplyr::select(where(is.numeric)) %&gt;% colnames()\n\n# Substituir outliers nas colunas numéricas\nheroes_combined &lt;- heroes_combined %&gt;%\n  mutate(across(all_of(colunas_numericas), substituir_outliers))\n\n\n\n\nVamos analisar a correlação entre os dados numéricos. Essa informação será útil tanto para identificar possíveis problemas de colinearidade quanto para a tarefa de regressão. Optei pelo teste de Spearman por ser mais robusto a aoutliers e ausência de normalidade da distribuição.\n\ndados_numericos &lt;- \n  heroes_combined %&gt;% \n  dplyr::select(height,weight,imc) %&gt;% \n  tidyr::drop_na()\n\n# Calcular a matriz de correlação\nmatriz_correlacao &lt;- cor(dados_numericos, method = \"spearman\")\n\nprint(matriz_correlacao)\n\n          height    weight       imc\nheight 1.0000000 0.7734864 0.6187391\nweight 0.7734864 1.0000000 0.9007493\nimc    0.6187391 0.9007493 1.0000000\n\n\nÉ importante manter em mente que a variável “peso” está altamente correlacionada com o IMC. Essa correlação era esperada, considerando que o IMC foi calculado a partir do peso e da altura.\nVou verificar novamente a distribução dos dados.\n\n# Aplicar o teste de Shapiro-Wilk e apresentar os resultados de forma tidy\nheroes_combined %&gt;%\n  dplyr::select(height,weight,imc) %&gt;% \n  tidyr::drop_na() %&gt;% \n  summarise(across(everything(), ~ broom::tidy(shapiro.test(.)))) %&gt;%\n  pivot_longer(everything(), names_to = \"variavel\", values_to = \"resultado\") \n\n# A tibble: 3 × 2\n  variavel resultado$statistic $p.value $method                    \n  &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                      \n1 height                 0.988 1.11e- 3 Shapiro-Wilk normality test\n2 weight                 0.955 1.51e-10 Shapiro-Wilk normality test\n3 imc                    0.948 1.79e-11 Shapiro-Wilk normality test\n\n\nÉ relevante observar que a remoção dos outliers não resultou na normalização da distribuição dos dados. Isso é um aspecto importante a ser considerado ao criar os modelos.\nA seguir, vou salvar os dados em um arquivo .csv para utilizá-lo nas próximas etapas."
  },
  {
    "objectID": "cleaning.html#salvando-os-dados",
    "href": "cleaning.html#salvando-os-dados",
    "title": "Cleaning",
    "section": "",
    "text": "#Salvando os dados\n\nwrite.csv(heroes_combined, file = \"dados_limpos.csv\")"
  },
  {
    "objectID": "cleaning.html#principais-pontos",
    "href": "cleaning.html#principais-pontos",
    "title": "Cleaning",
    "section": "",
    "text": "Substituição de valores ausentes, tanto numéricos como categóricos, por NA.\nRemoção de linhas duplicadas.\nCriação de uma variável numérica IMC.\nCriação de uma variável categórica a partir do IMC.\nCriação de uma variável para representar o número total de poderes por personagem.\nSubstituição de outliers.\nVerificação da correlação entre valores numéricos.\nIdentificação de alta correlação entre peso e IMC.\nRedução do número de variáveis categóricas raras entre as amostras.\nObservação de que os dados numéricos ainda não apresentam distribuição normal."
  },
  {
    "objectID": "clustering.html",
    "href": "clustering.html",
    "title": "Clustering",
    "section": "",
    "text": "pacman::p_load(tidyverse ,tidymodels,fpc, factoextra, psych, hopkins, cluster, knitr)\n\nknitr::opts_chunk$set(cache = TRUE, cache.lazy = FALSE, warning = FALSE,\n                      message = FALSE, echo = TRUE, dpi = 180,\n                      fig.width = 8, fig.height = 5)"
  },
  {
    "objectID": "clustering.html#abordagem-escolhida",
    "href": "clustering.html#abordagem-escolhida",
    "title": "Clustering",
    "section": "Abordagem escolhida",
    "text": "Abordagem escolhida\nPara esta tarefa, optei pelo algoritmo K-means, convertendo os dados categóricos em binários. Minha escolha recai nessa direção, pois apesar de eu não estar familiarizado com métodos de agrupamento para dados categóricos, compreendo que sua interpretação é mais direta. Portanto, para simplificar, optei por transformar as variáveis categóricas em binárias usando a codificação one-hot.\nSei que existem outras técnicas para lidar com esse tipo de dados, como o método k-prototype, por exemplo. Entretanto, a implementação dessa abordagem, que presumo ser mais apropriada, começou a consumir considerável tempo. Essa circunstância motivou-me a alterar minha estratégia.\nEssa mudança de abordagem teve como objetivo permitir um progresso mais eficiente em minha análise.\n\nVamos começar carregando os dados.\nAo carregar os dados eu alterei a classe das colunas de logic para character. Isso vai me facilitar mais para frente.\n\ndados_prontos &lt;- readr::read_csv(\"dados_limpos.csv\") %&gt;% \ndplyr::select(-1) %&gt;% \n  mutate(\n    across(where(is.logical), as.character)\n  )\n\n\n\n“Corrigindo” os dados\nVou começar criando um plano de ação para lidar com diversos “problemas” nos dados, incluindo o fato de o K-means ser um algoritmo projetado para dados numéricos, o que requer a transformação das variáveis categóricas em dummies.\nAqui está o que será feito:\nRemoção da coluna “name”: A coluna “name” será removida.\n\nTratamento de valores faltantes em variáveis categóricas: Os valores faltantes nas variáveis categóricas serão tratados usando um modelo KNN (K-Nearest Neighbors).\nTratamento de valores faltantes em variáveis numéricas: Os valores faltantes nas variáveis numéricas serão tratados usando os valores médios da coluna.\nTratamento de categorias desbalanceadas: Categorias com desbalanceamento serão agrupadas em uma categoria “other”.\nTransformação de categorias em binárias: As categorias serão transformadas em variáveis binárias usando a codificação one-hot.\nNormalização de colunas numéricas: As colunas numéricas serão normalizadas, e uma transformação Box-Cox será testada para aproximar a distribuição da normalidade.\nRemoção de variáveis altamente dispersas e desbalanceadas: A função step_nzv() será usada para remover variáveis que são altamente dispersas e desbalanceadas.\n\n(Apenas para esclarecer, ao remover as variáveis com baixa frequência relativa, minha intenção era a mesma do método step_nzv(). Após realizar alguns testes, considerando a remoção e a não remoção das variáveis, optei por removê-las da maneira descrita no documento de limpeza de dados e, por uma questão de segurança, escolhi também utilizar a função mencionada.)\n\nrecipe_kmeans &lt;-\n  recipe(~ ., data = dados_prontos) %&gt;%\n  step_rm(name, gender, alignment,\n          eye_color,hair_color,race,\n          publisher,categoria_imc,\n          height, imc, weight) %&gt;%\n  #step_impute_knn(all_nominal_predictors(), neighbors = 5) %&gt;%\n  #step_other(all_nominal_predictors(), threshold = 0.1) %&gt;% \n  step_impute_mean(all_numeric_predictors()) %&gt;% \n  step_normalize(all_numeric_predictors()) %&gt;% \n  #step_BoxCox(all_numeric_predictors()) %&gt;%\n  step_dummy(all_nominal_predictors(), one_hot = TRUE) %&gt;% \n  step_nzv()\n\nApós conduzir alguns testes, decidi remover algumas das variáveis. Essa escolha será devidamente justificada mais adiante; por enquanto, menciono isso apenas para explicar as linhas comentadas na seção de criação da “receita” dos dados.\n“Preparando” a receita e visualizando os dados.\n\n#vamos ver como os dados ficaram\ndados_cluster &lt;- \n  recipe_kmeans %&gt;%\n  prep() %&gt;%\n  bake(new_data = NULL)\n\nhead(dados_cluster)\n\n# A tibble: 6 × 47\n  n_poderes agility_FALSE. agility_TRUE. accelerated_healing_FALSE.\n      &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;                      &lt;dbl&gt;\n1   -0.198               1             0                          0\n2    1.38                0             1                          0\n3   -1.25                1             0                          1\n4   -0.0221              1             0                          0\n5    1.03                1             0                          1\n6    0.505               1             0                          1\n# ℹ 43 more variables: accelerated_healing_TRUE. &lt;dbl&gt;,\n#   durability_FALSE. &lt;dbl&gt;, durability_TRUE. &lt;dbl&gt;, stealth_FALSE. &lt;dbl&gt;,\n#   stealth_TRUE. &lt;dbl&gt;, energy_absorption_FALSE. &lt;dbl&gt;,\n#   energy_absorption_TRUE. &lt;dbl&gt;, flight_FALSE. &lt;dbl&gt;, flight_TRUE. &lt;dbl&gt;,\n#   marksmanship_FALSE. &lt;dbl&gt;, marksmanship_TRUE. &lt;dbl&gt;,\n#   weapons_master_FALSE. &lt;dbl&gt;, weapons_master_TRUE. &lt;dbl&gt;,\n#   longevity_FALSE. &lt;dbl&gt;, longevity_TRUE. &lt;dbl&gt;, intelligence_FALSE. &lt;dbl&gt;, …\n\n\nDurante a etapa de preparação dos dados, removi os nomes dos personagens. Agora, irei reinseri-los como nomes das linhas. Isso possibilitará visualizar os nomes dos personagens nos clusters.\n\n#colocando os nomes novamente nos dados\ndados_cluster &lt;- tibble(dados_prontos[,1], dados_cluster) %&gt;% \n  column_to_rownames(var = \"name\")"
  },
  {
    "objectID": "clustering.html#pré-diagnósticos---tendência-de-agrupamento.",
    "href": "clustering.html#pré-diagnósticos---tendência-de-agrupamento.",
    "title": "Clustering",
    "section": "Pré-diagnósticos - tendência de agrupamento.",
    "text": "Pré-diagnósticos - tendência de agrupamento.\nAntes de iniciarmos, vamos verificar a tendência dos dados para serem clusterizados.\n\nhopkins::hopkins(dados_cluster)\n\n[1] 0.9971948\n\n\nUm valor de aproximadamente 1 em um teste de Hopkins indica que os pontos no conjunto de dados têm uma tendência significativa de se agruparem mais próximos uns dos outros do que de pontos gerados aleatoriamente. Em outras palavras, um valor próximo de 1 sugere que há uma forte tendência de formação de clusters nos seus dados, o que é um indicativo positivo para a aplicação de algoritmos de clusterização.\nVamos prosseguir com mais um teste.\n\ncor_mix &lt;- model.matrix(~0+., data = dados_cluster) %&gt;% \n  cor(use = \"pairwise.complete.obs\")\n\npsych::KMO(cor_mix)\n\nError in solve.default(r) : \n  Lapack routine dgesv: system is exactly singular: U[21,21] = 0\n\n\nKaiser-Meyer-Olkin factor adequacy\nCall: psych::KMO(r = cor_mix)\nOverall MSA =  0.5\nMSA for each item = \n                 n_poderes             agility_FALSE. \n                       0.5                        0.5 \n             agility_TRUE. accelerated_healing_FALSE. \n                       0.5                        0.5 \n accelerated_healing_TRUE.          durability_FALSE. \n                       0.5                        0.5 \n          durability_TRUE.             stealth_FALSE. \n                       0.5                        0.5 \n             stealth_TRUE.   energy_absorption_FALSE. \n                       0.5                        0.5 \n   energy_absorption_TRUE.              flight_FALSE. \n                       0.5                        0.5 \n              flight_TRUE.        marksmanship_FALSE. \n                       0.5                        0.5 \n        marksmanship_TRUE.      weapons_master_FALSE. \n                       0.5                        0.5 \n      weapons_master_TRUE.           longevity_FALSE. \n                       0.5                        0.5 \n           longevity_TRUE.        intelligence_FALSE. \n                       0.5                        0.5 \n        intelligence_TRUE.      super_strength_FALSE. \n                       0.5                        0.5 \n      super_strength_TRUE.           telepathy_FALSE. \n                       0.5                        0.5 \n           telepathy_TRUE.       energy_blasts_FALSE. \n                       0.5                        0.5 \n       energy_blasts_TRUE.             stamina_FALSE. \n                       0.5                        0.5 \n             stamina_TRUE.         super_speed_FALSE. \n                       0.5                        0.5 \n         super_speed_TRUE.       teleportation_FALSE. \n                       0.5                        0.5 \n       teleportation_TRUE.     enhanced_senses_FALSE. \n                       0.5                        0.5 \n     enhanced_senses_TRUE.         immortality_FALSE. \n                       0.5                        0.5 \n         immortality_TRUE.            reflexes_FALSE. \n                       0.5                        0.5 \n            reflexes_TRUE.     invulnerability_FALSE. \n                       0.5                        0.5 \n     invulnerability_TRUE.        force_fields_FALSE. \n                       0.5                        0.5 \n        force_fields_TRUE.    enhanced_hearing_FALSE. \n                       0.5                        0.5 \n    enhanced_hearing_TRUE.      uncommon_power_FALSE. \n                       0.5                        0.5 \n      uncommon_power_TRUE. \n                       0.5 \n\n\nUm valor de KMO mais baixo (por exemplo, abaixo de 0.5) pode sugerir que as correlações entre as variáveis não são muito robustas, o que pode tornar a interpretação dos fatores mais desafiadora.\nOs resultados dos testes acabaram sendo um pouco conflitantes, no entanto, vamos continuar."
  },
  {
    "objectID": "clustering.html#número-ideal-de-clusters",
    "href": "clustering.html#número-ideal-de-clusters",
    "title": "Clustering",
    "section": "Número ideal de clusters",
    "text": "Número ideal de clusters\nVamos determinar o número ideal de clusters para nossos dados. Faremos isso usando a função fviz_nbclust do pacote factoextra e três métodos empíricos diferentes: silhouette, wss e gap_stat.\n\nfactoextra::fviz_nbclust(dados_cluster,\n             FUNcluster = kmeans,\n             method = c(\"silhouette\"),\n             k.max = 8,\n            nboot = 100)\n\n\n\n\n\nfactoextra::fviz_nbclust(dados_cluster,\n             FUNcluster = kmeans,\n             method = c(\"wss\"),\n             k.max = 8,\n            nboot = 100)\n\n\n\n\n\nfactoextra::fviz_nbclust(dados_cluster,\n             FUNcluster = kmeans,\n             method = c(\"gap_stat\"),\n             k.max = 8,\n            nboot = 100)\n\n\n\n\nOs resultados indicam que o número ideal de grupos pode estar entre 2 e 3."
  },
  {
    "objectID": "clustering.html#usando-k-mean",
    "href": "clustering.html#usando-k-mean",
    "title": "Clustering",
    "section": "usando k-mean",
    "text": "usando k-mean\nVamos testar os valores de 2 e 3 grupos.\n\nDois Grupos\n\nset.seed(456)\nk2&lt;- stats::kmeans(dados_cluster, centers = 2, nstart = 50)\n\n\nfactoextra::fviz_cluster(k2,data = dados_cluster, star.plot = TRUE)\n\n\n\n\n\n\nTrês grupos\n\nset.seed(789)\nk3 &lt;- stats::kmeans(dados_cluster, centers = 3, nstart = 50)\n\n\nfactoextra::fviz_cluster(k3,data = dados_cluster, star.plot = TRUE)\n\n\n\n\nEu conduzi testes utilizando diferentes variáveis. A configuração de cluster que apresentou os melhores resultados com todos os dados disponíveis foi a de 2 grupos. No entanto, ao realizar um teste apenas com as variáveis relacionadas aos poderes dos personagens, o resultado mais favorável foi obtido com três grupos.\nOs resultados para dois grupos foram bastante consistentes, tanto considerando quanto desconsiderando as informações dos dados em heroes_information. Porém, quando avaliamos três grupos, os resultados com a inclusão dessas variáveis não demonstraram uma separação tão clara.\nA seguir estão os resultados obtidos com todas as variáveis para fins de comparação.\nResultado com todas as variáveis para 3 clusters:\n\n\n\n\n\n\n\n\n\nResultado com todas as variáveis para 3 clusters:"
  },
  {
    "objectID": "clustering.html#avaliando-os-clusters",
    "href": "clustering.html#avaliando-os-clusters",
    "title": "Clustering",
    "section": "Avaliando os clusters",
    "text": "Avaliando os clusters\nVou comparar somente os resultados obtidos após a remoção das variáveis provenientes dos dados heroes_information.\nResultados para 2 clusters:\n\ncls &lt;- cluster.stats(dados_cluster, k2$cluster)\n\ncls$pearsongamma\n\n[1] 0.0004729797\n\ncls$entropy\n\n[1] 0.6851916\n\n\nResultados para 3 clusters:\n\ncls &lt;-cluster.stats(dados_cluster, k3$cluster)\ncls$pearsongamma\n\n[1] 0.00096131\n\ncls$entropy\n\n[1] 0.954733\n\n\nAmbos os resultados possuem valores do índice Pearson Gamma próximos de 0, o que sugere que há uma associação limitada entre os clusters comparados.\nNo entanto, o valor de entropia foi menor para o resultado de dois clusters, 0.68. Valores de entropia mais próximos de 0 indicam uma melhor separação entre os clusters.\nOutra abordagem para avaliar os resultados é utilizar a proporção TotWithinSS/TotSS. Essa proporção auxilia na avaliação da qualidade do agrupamento, indicando o quanto da variabilidade total dos dados é explicada pelos clusters. Quanto maior a proporção, mais eficaz é o agrupamento.\nA proporção explicada nos resultados com dois grupos é:\n\nk2$tot.withinss / k2$totss\n\n[1] 0.7915277\n\n\nA proporção explicada nos resultados com dois grupos é:\n\nk3$tot.withinss / k3$totss\n\n[1] 0.7301921\n\n\nOs resultados foram bastante semelhantes, mas na minha opinião, a divisão em três grupos parece mais apropriada, mesmo que os resultados sejam um pouco inferiores.\nUma explicação possível, que se aplica tanto a dois grupos quanto a três grupos, é a seguinte:"
  },
  {
    "objectID": "clustering.html#conclusão",
    "href": "clustering.html#conclusão",
    "title": "Clustering",
    "section": "Conclusão",
    "text": "Conclusão\nMinha interpretação dos agrupamentos é a seguinte:\nOs personagens podem ser divididos em três grupos: o Grupo 2 consiste em personagens mais fracos, provavelmente humanos com algumas habilidades. O Grupo 1 engloba os personagens intermediários, com certo nível de poder. E o Grupo 3 é composto pelos personagens mais fortes.\nA utilização das variáveis vindas dos dados heroes_information, parece ter causado uma pior separação quando usado 3 grupos.\nA descrição inicial da preparação dos dados acabou ficando um pouco mais concisa devido à remoção de parte dos dados após os testes."
  },
  {
    "objectID": "clustering.html#resposta-das-perguntas",
    "href": "clustering.html#resposta-das-perguntas",
    "title": "Clustering",
    "section": "Resposta das perguntas",
    "text": "Resposta das perguntas\n\nQual algoritmo você escolheu e por quê?\n\nConforme mencionado inicialmente, a escolha do algoritmo K-means foi motivada pelo fato de ser relativamente simples de entender e interpretar. Além disso, o K-means é altamente flexível, podendo ser aplicado em uma ampla gama de domínios e tipos de dados. Ele não demanda suposições específicas sobre a distribuição dos dados, o que o torna uma escolha versátil para diferentes cenários.\nEmbora o K-means não exija suposições específicas sobre a distribuição dos dados, você realizou tentativas nesse sentido durante a preparação dos dados.\n\nQuais recursos você usou e por quê? Explique qualquer pré-processamento ou engenharia de recursos (seleção) que você executou.\n\nEspero que a resposta para essa pergunta tenha sido abordada de maneira adequada na seção de limpeza de dados e também no início desta seção de clusterização. Além disso, parte da seleção de recursos foi realizada após a realização de diversos testes.\nVou resumir novamente os principais pontos abordados:\n\nRemoção de colunas em que a frequência relativa dos casos positivos era inferior a 10%.\nTratamento de valores ausentes em variáveis categóricas utilizando um modelo KNN (“bagged tree” foi escolhido devido ao tempo de processamento).\nTratamento de valores ausentes em variáveis categóricas usando a imputação dos valores médios da coluna.\nTratamento de categorias desbalanceadas através da agregação em uma categoria “other”.\nConversão das categorias em variáveis binárias usando a codificação one-hot.\nNormalização das colunas numéricas e experimentação com a transformação Box-Cox para aproximação da distribuição normal.\nRemoção de variáveis que possuíam alta dispersão e desbalanceamento usando a função step_nzv().\n\n\nUm dos desafios do clustering é definir o número certo de clusters. Como você escolheu esse número? Como você avalia a qualidade dos clusters finais?\n\nMinha abordagem para escolher o número de clusters foi baseada na utilização de métodos empíricos amplamente empregados. Por meio dos gráficos gerados pelos métodos do cotovelo, silhueta e gap estatístico, foi possível identificar uma faixa de valores prováveis para o número de grupos no conjunto de dados. Essas quantidades foram posteriormente selecionadas e comparadas por meio de diversas métricas.\nOs resultados obtidos parecem promissores, uma vez que os grupos foram separados de maneira relativamente clara e discernível."
  },
  {
    "objectID": "clustering.html#salvando-os-dados",
    "href": "clustering.html#salvando-os-dados",
    "title": "Clustering",
    "section": "Salvando os dados",
    "text": "Salvando os dados\n\ndados_prontos &lt;- dados_prontos %&gt;% \n  mutate(\n    grupo = k3$cluster, \n    grupo = case_when(\n           grupo == 3 ~ \"forte\",\n           grupo == 1 ~ \"intermediario\",\n           grupo == 2 ~ \"fraco\"\n         )\n  )\n\nwrite.csv(dados_prontos, file = \"dados_clust.csv\")"
  },
  {
    "objectID": "regression.html",
    "href": "regression.html",
    "title": "Regressão",
    "section": "",
    "text": "knitr::opts_chunk$set(cache = TRUE, cache.lazy = FALSE, warning = FALSE,\n                      message = FALSE, echo = TRUE, dpi = 180,\n                      fig.width = 8, fig.height = 5)\n\npacman::p_load(knitr,tidyverse ,tidymodels,klaR, discrim, themis, finetune, earth, ranger)\ndados_prontos &lt;- readr::read_csv(\"dados_limpos.csv\") %&gt;% \ndplyr::select(-1)"
  },
  {
    "objectID": "regression.html#eda",
    "href": "regression.html#eda",
    "title": "Regressão",
    "section": "EDA",
    "text": "EDA\nVou começar essa tarefa com a seleção de recursos. Durante a limpeza dos dados eu cheguei a verificar os valores de correlação entre as variáveis numéricas, mas vamos avalia-las novamente e visualizar sua distribuição.\n\nlibrary(GGally)\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  dplyr::select(where(is.numeric)) %&gt;%\n  ggpairs()\n\n\n\n\nAs curvas de densidade parecem seguir uma distribuição normal, exceto pela variável “n_poderes”, que exibe uma cauda mais longa. Notavelmente, a variável “n_poderes” não demonstra uma correlação significativa com as demais variáveis. Entretanto, “peso” e “altura”, “peso” e “IMC”, e “IMC” e “altura” exibem correlações notáveis. Os gráficos de dispersão apontam para uma relação linear entre essas variáveis.\nAgora vamos verificar como é a distribuição do nosso alvo em relação as variáveis categóricas.\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    gender = fct_lump(gender, n=10)\n  ) %&gt;% \n  ggplot(aes(gender,weight, color=gender))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nA variável “gênero” parece ser uma fonte promissora de informação para o nosso modelo.\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    eye_color = fct_lump(eye_color, n=10)\n  ) %&gt;% \n  ggplot(aes(eye_color,weight, color=eye_color))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nApesar das limitações associadas à variável “cor dos olhos”, ela também parece ser uma valiosa fonte de informações.\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    race = fct_lump(race, n=10)\n  ) %&gt;% \n  ggplot(aes(race,weight, color=race))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nAs médias dos valores não parecem exibir grandes discrepâncias ao analisarmos as diferentes raças. É importante ter em mente que algumas categorias têm amostragens reduzidas.\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    hair_color = fct_lump(hair_color, n=10)\n  ) %&gt;% \n  ggplot(aes(hair_color,weight, color=hair_color))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nDa mesma forma que a variável anterior, a cor dos cabelos não parece fornecer muita informação em relação ao peso.\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    publisher = fct_lump(publisher, n=10)\n  ) %&gt;% \n  ggplot(aes(publisher,weight, color=publisher))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nA variável “editora” também não parece ser muito informativa.\n\ndados_prontos %&gt;% \ntidyr::drop_na() %&gt;% \n  mutate(\n    alignment = fct_lump(alignment, n=10)\n  ) %&gt;% \n  ggplot(aes(alignment,weight, color=alignment))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nNão parece que o alinhamento tem relação com o peso.\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    categoria_imc = fct_lump(categoria_imc, n=10)\n  ) %&gt;% \n  ggplot(aes(categoria_imc,weight, color=categoria_imc))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nÉ evidente que essas categorias têm uma forte relação com o peso dos personagens, uma vez que foram construídas a partir das variáveis de peso e altura.\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    across(where(is.logical), as.factor),\n    super_strength = fct_lump(super_strength)\n  ) %&gt;% \n  ggplot(aes(super_strength,weight, color=super_strength))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nNão irei apresentar todos os resultados, mas de maneira geral, as variáveis relacionadas ao tipo de poder não parecem ser informativas.\nAs únicas variáveis que aparentemente podem ser úteis são “super_strength”, “invulnerability” e “durability”.\nVamos ver em relação ao número de poderes que cada personagem possui.\n\ndados_prontos %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    n_poderes = as.factor(n_poderes),\n    n_poderes = fct_lump(n_poderes, n=10)\n  ) %&gt;% \n  ggplot(aes(n_poderes,weight, color=n_poderes))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nA quantidade de poderes de cada personagem aparentemente não possui relação com o peso do personagem. No entanto, essa conclusão pode necessitar de uma análise mais aprofundada. Por enquanto, não vou criar uma variável categórica que represente o número de poderes por personagem."
  },
  {
    "objectID": "regression.html#construindo-modelo",
    "href": "regression.html#construindo-modelo",
    "title": "Regressão",
    "section": "construindo modelo",
    "text": "construindo modelo\nVou começar selecionando apenas as variáveis que foram escolhidas durante a análise exploratória dos dados.\n\ndados_regre &lt;- dados_prontos %&gt;% \n dplyr::select(weight,imc,height,categoria_imc,\n               super_strength,invulnerability,\n               gender,eye_color) %&gt;% \n  mutate(\n    across(where(is.logical), as.character)\n  )"
  },
  {
    "objectID": "regression.html#divisão-treinoteste",
    "href": "regression.html#divisão-treinoteste",
    "title": "Regressão",
    "section": "Divisão Treino/Teste",
    "text": "Divisão Treino/Teste\nEsta etapa segue as mesmas especificações, com uma proporção de 70% para treinamento e 30% para teste.\n\nset.seed(123)\n\nheroes_split &lt;- initial_split(dados_regre, strata = \"weight\", prop = 0.7)\n\ntrain &lt;- training(heroes_split)\ntest &lt;- testing(heroes_split)"
  },
  {
    "objectID": "regression.html#validação-cruzada",
    "href": "regression.html#validação-cruzada",
    "title": "Regressão",
    "section": "Validação cruzada",
    "text": "Validação cruzada\nCriando as partições para executar a validação cruzada.\n\nset.seed(456)\ncv_folds &lt;- vfold_cv(train, strata = \"weight\")\n\ncv_folds\n\n#  10-fold cross-validation using stratification \n# A tibble: 10 × 2\n   splits           id    \n   &lt;list&gt;           &lt;chr&gt; \n 1 &lt;split [400/47]&gt; Fold01\n 2 &lt;split [400/47]&gt; Fold02\n 3 &lt;split [400/47]&gt; Fold03\n 4 &lt;split [401/46]&gt; Fold04\n 5 &lt;split [403/44]&gt; Fold05\n 6 &lt;split [403/44]&gt; Fold06\n 7 &lt;split [404/43]&gt; Fold07\n 8 &lt;split [404/43]&gt; Fold08\n 9 &lt;split [404/43]&gt; Fold09\n10 &lt;split [404/43]&gt; Fold10"
  },
  {
    "objectID": "regression.html#especificações-dos-dados",
    "href": "regression.html#especificações-dos-dados",
    "title": "Regressão",
    "section": "Especificações dos dados",
    "text": "Especificações dos dados\nJá removi as características que considerei não relevantes. Agora, vamos detalhar os passos deste procedimento.\n\nTratamento dos valores ausentes nas variáveis preditoras e no alvo.\nNormalização aplicada apenas às variáveis preditoras.\nAbordagem dos dados faltantes nas variáveis categóricas por meio de um modelo de árvore bagged.\nAgregação das categorias pouco frequentes sob o rótulo “outro”.\nUtilização da codificação one-hot nas variáveis categóricas.\n\n(Neste ponto, surge a dúvida sobre a aplicação da codificação one-hot para a variável “categoria_icm”, que possui uma ordem natural)\n\nbase_rec &lt;- \n  recipe(weight ~.,data = train) %&gt;% \n  step_impute_mean(all_numeric()) %&gt;% \n  step_normalize(all_numeric_predictors()) %&gt;% \n  step_impute_bag(all_nominal_predictors()) %&gt;% \n  step_other(all_nominal_predictors(), threshold = 0.02) %&gt;% \n  step_dummy(all_nominal_predictors(), one_hot = TRUE)\n\n base_rec %&gt;% prep() %&gt;% bake(new_data = NULL) #%&gt;% skimr::skim()\n\n# A tibble: 447 × 23\n      imc height weight categoria_imc_Abaixo.do.peso categoria_imc_Obesidade.I\n    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;                        &lt;dbl&gt;                     &lt;dbl&gt;\n 1 -0.948 -1.87    57                              0                         0\n 2 -1.07  -2.09    54                              0                         0\n 3 -1.35  -0.973   57                              0                         0\n 4 -0.779 -1.87    59                              0                         0\n 5 -1.39  -2.09    50                              0                         0\n 6 -1.33  -1.53    54                              0                         0\n 7  0      0       85.1                            0                         0\n 8 -1.18  -1.87    54                              0                         0\n 9 -1.33  -1.87    52                              0                         0\n10 -0.800 -1.53    61                              0                         0\n# ℹ 437 more rows\n# ℹ 18 more variables: categoria_imc_Obesidade.III &lt;dbl&gt;,\n#   categoria_imc_Peso.normal &lt;dbl&gt;, categoria_imc_Sobrepeso &lt;dbl&gt;,\n#   categoria_imc_other &lt;dbl&gt;, super_strength_FALSE. &lt;dbl&gt;,\n#   super_strength_TRUE. &lt;dbl&gt;, invulnerability_FALSE. &lt;dbl&gt;,\n#   invulnerability_TRUE. &lt;dbl&gt;, gender_Female &lt;dbl&gt;, gender_Male &lt;dbl&gt;,\n#   eye_color_black &lt;dbl&gt;, eye_color_blue &lt;dbl&gt;, eye_color_brown &lt;dbl&gt;, …"
  },
  {
    "objectID": "regression.html#especificações-do-modelo",
    "href": "regression.html#especificações-do-modelo",
    "title": "Regressão",
    "section": "Especificações do modelo",
    "text": "Especificações do modelo\nPara esta tarefa de regressão, vou adotar uma abordagem ligeiramente distinta. Em vez de selecionar um único modelo, vou elaborar “receitas” para três modelos diferentes e, em seguida, compará-los.\nOs modelos selecionados são Random Forest, MARS (Multivariate Adaptive Regression Splines) e Regressão Linear.\n\nrf_spec &lt;- \n  rand_forest(trees = 1e3) %&gt;% \n  set_mode(\"regression\") %&gt;% \n  set_engine(\"ranger\")\n\nmars_spec &lt;-\n   mars() %&gt;% \n   set_mode(\"regression\") %&gt;%\n   set_engine(\"earth\")\n  \n\nlm_spec &lt;- \n  linear_reg()#usando o defoult"
  },
  {
    "objectID": "regression.html#criando-um-fluxo-de-trabalho",
    "href": "regression.html#criando-um-fluxo-de-trabalho",
    "title": "Regressão",
    "section": "Criando um fluxo de trabalho",
    "text": "Criando um fluxo de trabalho\nUtilizando a função “workflow_set”, é possível ajustar todos os modelos de forma simultânea.\n\nheroes_set &lt;- \n  workflow_set(\n  list(base_rec),\n  list(rf_spec,mars_spec,lm_spec),\n  cross = FALSE#as receitas são específicas para os modelos\n)\nheroes_set\n\n# A workflow set/tibble: 3 × 4\n  wflow_id           info             option    result    \n  &lt;chr&gt;              &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    \n1 recipe_rand_forest &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n2 recipe_mars        &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n3 recipe_linear_reg  &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;"
  },
  {
    "objectID": "regression.html#ajustando-o-modelo-aos-dados",
    "href": "regression.html#ajustando-o-modelo-aos-dados",
    "title": "Regressão",
    "section": "Ajustando o modelo aos dados",
    "text": "Ajustando o modelo aos dados\nAgora, ao empregar “workflow_map”, é possível aplicar todas as receitas desenvolvidas às partições de treinamento criadas.\n\ndoParallel::registerDoParallel()\nset.seed(789)\n\nheroes_rs &lt;- \nworkflow_map(\n  heroes_set,\n  \"fit_resamples\",\n  resamples = cv_folds\n)\nheroes_rs\n\n# A workflow set/tibble: 3 × 4\n  wflow_id           info             option    result   \n  &lt;chr&gt;              &lt;list&gt;           &lt;list&gt;    &lt;list&gt;   \n1 recipe_rand_forest &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;\n2 recipe_mars        &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;\n3 recipe_linear_reg  &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;rsmp[+]&gt;"
  },
  {
    "objectID": "regression.html#avaliando-os-resultados",
    "href": "regression.html#avaliando-os-resultados",
    "title": "Regressão",
    "section": "Avaliando os resultados",
    "text": "Avaliando os resultados\n\nautoplot(heroes_rs)\n\n\n\n\nOs resultados apresentaram pouca diferença entre si, porém, o modelo Randon Forest mostrou uma leve vantagem. Apesar disso, vou optar por prosseguir com o modelo linear, já que ele é mais simples de interpretar. (E também porque os dados exibem uma relação linear)\n\ncollect_metrics(heroes_rs)\n\n# A tibble: 6 × 9\n  wflow_id         .config preproc model .metric .estimator   mean     n std_err\n  &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;\n1 recipe_rand_for… Prepro… recipe  rand… rmse    standard   11.0       9  0.638 \n2 recipe_rand_for… Prepro… recipe  rand… rsq     standard    0.780     9  0.0292\n3 recipe_mars      Prepro… recipe  mars  rmse    standard   11.5       9  0.798 \n4 recipe_mars      Prepro… recipe  mars  rsq     standard    0.754     9  0.0318\n5 recipe_linear_r… Prepro… recipe  line… rmse    standard   10.9       9  0.927 \n6 recipe_linear_r… Prepro… recipe  line… rsq     standard    0.770     9  0.0355\n\n\nAqui, podemos avaliar as métricas de todos os modelos que foram ajustados. Conforme mencionei, optarei por seguir com o modelo linear.\n\nfinal_fit &lt;- \nextract_workflow(heroes_rs, \"recipe_linear_reg\") %&gt;% \n  fit(train)\n\nVamos acessar os resultados do modelo e analisar a magnitude da influência de cada variável no peso dos personagens.\n\ntidy(final_fit) \n\n# A tibble: 23 × 5\n   term                         estimate std.error statistic   p.value\n   &lt;chr&gt;                           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n 1 (Intercept)                     99.7      7.55     13.2    1.32e-33\n 2 imc                             11.0      1.51      7.28   1.57e-12\n 3 height                           7.08     0.854     8.29   1.43e-15\n 4 categoria_imc_Abaixo.do.peso   -28.6      8.67     -3.30   1.05e- 3\n 5 categoria_imc_Obesidade.I       -2.21     6.64     -0.332  7.40e- 1\n 6 categoria_imc_Obesidade.III     -9.07     6.20     -1.46   1.44e- 1\n 7 categoria_imc_Peso.normal      -19.1      7.46     -2.57   1.06e- 2\n 8 categoria_imc_Sobrepeso        -13.7      6.74     -2.04   4.23e- 2\n 9 categoria_imc_other             NA       NA        NA     NA       \n10 super_strength_FALSE.           -1.12     1.52     -0.736  4.62e- 1\n# ℹ 13 more rows\n\n\nOs resultados mostram na primeira coluna os coeficientes estimados para cada variável, indicando a magnitude e direção da influência no peso dos personagens. Os valores de erro padrão e estatística do teste auxiliam na avaliação da significância estatística das estimativas. Valores de valor p menores indicam uma maior evidência contra a hipótese nula de que o coeficiente é igual a zero. No entanto, observe que a variável “categoria_imc_other” possui valores ausentes (NA). Isso exige uma análise adicional para compreender seu impacto no modelo."
  },
  {
    "objectID": "regression.html#respostas",
    "href": "regression.html#respostas",
    "title": "Regressão",
    "section": "Respostas",
    "text": "Respostas\n\nQual algoritmo você escolheu e por quê?\n\nAo analisarmos as relações entre as variáveis contínuas e a variável alvo, é possível observar uma clara relação linear. No entanto, para esta tarefa, optei por realizar uma comparação entre três modelos distintos: regressão linear, Random Forest e MARS (Multivariate Adaptive Regression Splines).\n\nComo você avalia o desempenho do seu algoritmo neste caso?\n\nApesar de não ser o modelo que obteve o melhor resultado, a regressão linear demonstrou um ajuste satisfatório aos dados. Ela foi capaz de explicar um pouco mais de 75% da variação nos dados. Isso indica que o modelo está capturando adequadamente a relação entre as variáveis independentes e a variável dependente.\n(As métricas dos modelos estão oscilando cada vez que eu gero o documento. Não tenho certeza do motivo, mas deve ser algum processo aleátorio interno dos modelos usados)"
  },
  {
    "objectID": "classification.html",
    "href": "classification.html",
    "title": "Classificação",
    "section": "",
    "text": "knitr::opts_chunk$set(cache = TRUE, cache.lazy = FALSE, warning = FALSE,\n                      message = FALSE, echo = TRUE, dpi = 180,\n                      fig.width = 8, fig.height = 5)\n\npacman::p_load(tidyverse ,tidymodels,klaR, discrim, themis, finetune, FactoMineR,xgboost )\ndados_prontos &lt;-\n  readr::read_csv(\"dados_limpos.csv\")\n\ndados_prontos &lt;- \n  dados_prontos %&gt;% \n  dplyr::select(-1) %&gt;% \n   mutate(\n   across(where(is.logical), as.integer)\n   )"
  },
  {
    "objectID": "classification.html#verificar-independencia-das-variáveis",
    "href": "classification.html#verificar-independencia-das-variáveis",
    "title": "Classificação",
    "section": "verificar independencia das variáveis",
    "text": "verificar independencia das variáveis\nPara verificar a independência das variáveis eu vou usar Análise de Correspondência Múltipla (MCA).\n\nmca_result &lt;- FactoMineR::MCA(dados_prontos, graph = FALSE)\n\n\n# Gráfico de Correlação\nFactoMineR::plot.MCA(mca_result, choix = \"var\")\n\n\n\n\n\n# Gráfico de Correlação\nFactoMineR::plot.MCA(mca_result, choix = \"ind\")\n\n\n\n\nA análise realizada indica que os dados não atendem ao pressuposto do método Naive-Bayes. Além disso, é possível observar algumas características da estrutura dos dados. Mesmo com uma baixa variabilidade explicada pelas dimensões fatoriais, é possível compreender quais variáveis contribuem mais, a direção de suas contribuições e quais variáveis apresentam padrões de comportamento semelhantes."
  },
  {
    "objectID": "classification.html#eda",
    "href": "classification.html#eda",
    "title": "Classificação",
    "section": "EDA",
    "text": "EDA\nVou começar dando uma olhada na contagem da variável alvo.\n\ndados_prontos %&gt;% \n  count(alignment)\n\n# A tibble: 4 × 2\n  alignment     n\n  &lt;chr&gt;     &lt;int&gt;\n1 bad         192\n2 good        420\n3 neutral      24\n4 &lt;NA&gt;          7\n\n\nUma questão que surgiu diz respeito a se o foco está exclusivamente em categorias “bom” e “mau”, ou se também inclui personagens neutros. Como a pergunta menciona “bom” ou “mau”, a decisão que vou adotar é não considerar os personagens neutros. Essa escolha é baseada em evitar o desafio de lidar com classes significativamente desequilibradas.\nVou começar selecionando apenas os personagens classificados como “bom” ou “mau”.\n\ndados_naive &lt;- \n  dados_prontos %&gt;% \n  filter(alignment == \"good\" | alignment == \"bad\")%&gt;% \n   mutate(\n     across(where(is.character), as.factor),\n     #across(where(is_logical), as.factor)\n   )"
  },
  {
    "objectID": "classification.html#seleção-de-recursos",
    "href": "classification.html#seleção-de-recursos",
    "title": "Classificação",
    "section": "Seleção de recursos",
    "text": "Seleção de recursos\nVamos visualizar a distribuição da nossa variável alvo em relação às variáveis categóricas.\n\ndados_naive %&gt;% \n  tidyr::drop_na() %&gt;% \n  count(alignment,gender) %&gt;% \n  ggplot(aes(alignment,n, fill = gender))+\n  geom_col(show.legend = FALSE)+\n  facet_wrap(vars(gender),scales = \"free\")\n\n\n\n\nEm relação ao gênero, é possível observar um número maior de personagens “maus” no gênero masculino em comparação ao feminino. Esse tipo de padrão é benéfico para o aprendizado do nosso modelo. No entanto, a análise visual por si só não é suficiente. É necessário conduzir testes estatísticos para confirmar se essa diferença é estatisticamente significativa e se uma amostra diferente produziria resultados semelhantes. Isso nos permitirá determinar se de fato há uma proporção maior de personagens “maus” no gênero masculino do que no feminino.\nContudo, devido minha ingerência em relação ao tempo vou pular essa etapa e fazer algo não recomendável que é selecionar os recursos no “olhômetro”. Essa abordagem pode levar a resultados subótimos, ou mesmo ruins, uma vez que não há garantia de que as diferenças observadas sejam estatisticamente significativas ou realmente informativas para o modelo.\nNosso alvo em relação a cor dos olhos.\n\ndados_naive %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    eye_color = fct_lump(eye_color, prop = 0.05)\n  ) %&gt;% \n  count(alignment,eye_color) %&gt;% \n  ggplot(aes(alignment,n, fill = eye_color))+\n  geom_col(show.legend = FALSE)+\n  facet_wrap(vars(eye_color),scales = \"free\")\n\n\n\n\nA variável “cor dos olhos” aparentemente apresenta padrões que o modelo pode utilizar para aprender. Portanto, vou optar por manter essa coluna no conjunto de dados.\n\ndados_naive %&gt;% \n  tidyr::drop_na() %&gt;% \n   mutate(\n    race = fct_lump(race, prop = 0.05)\n  ) %&gt;% \n  count(alignment,race) %&gt;% \n  ggplot(aes(alignment,n, fill = race))+\n  geom_col(show.legend = FALSE)+\n  facet_wrap(vars(race),scales = \"free\")\n\n\n\n\nParece que essa variável também contém estruturas que podem ser aproveitadas pelo modelo.\n\ndados_naive %&gt;% \n  tidyr::drop_na() %&gt;% \n  mutate(\n    hair_color = fct_lump(hair_color, prop = 0.05)\n  ) %&gt;%\n  count(alignment,hair_color) %&gt;% \n  ggplot(aes(alignment,n, fill = hair_color))+\n  geom_col(show.legend = FALSE)+\n  facet_wrap(vars(hair_color),scales = \"free\")\n\n\n\n\nEssa variável também será mantida no conjunto de dados.\n\ndados_naive %&gt;% \n  tidyr::drop_na() %&gt;%\n   mutate(\n    publisher = fct_lump(publisher, prop = 0.05)\n  ) %&gt;%\n  count(alignment,publisher) %&gt;% \n  ggplot(aes(alignment,n, fill = publisher))+\n  geom_col(show.legend = FALSE)+\n  facet_wrap(vars(publisher),scales = \"free\")\n\n\n\n\nEssa variável também será mantida no conjunto de dados.\n\ndados_naive %&gt;% \n  tidyr::drop_na() %&gt;% \n   mutate(\n    categoria_imc = fct_lump(categoria_imc, prop = 0.05)\n  ) %&gt;%\n  count(alignment,categoria_imc) %&gt;% \n  ggplot(aes(alignment,n, fill = categoria_imc))+\n  geom_col(show.legend = FALSE)+\n  facet_wrap(vars(categoria_imc),scales = \"free\")\n\n\n\n\nParece que os personagens classificados como “good” têm uma tendência a serem mais “fit”. Portanto, vou optar por manter essa coluna no conjunto de dados.\n\ndados_naive %&gt;% \n  count(alignment,as.character(uncommon_power)) %&gt;% \n  ggplot(aes(alignment,n))+\n  geom_col(show.legend = FALSE)\n\n\n\n\nNão apresentarei todos os resultados, mas parece que os tipos de poderes não fornecem informações significativas sobre o alinhamento dos personagens.\nAgora vamos examinar como o nosso alvo se relaciona com os valores numéricos.\n\ndados_naive %&gt;% \n  drop_na() %&gt;% \n  ggplot(aes(alignment,height, color=alignment))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nOs valores da categoria “bad” possuem uma média mais elevada, alinhando-se com o intervalo interquartil superior dos indivíduos classificados como “good”. No entanto, os intervalos interquartis das duas distribuições apresentam sobreposição. Portanto, as considerações feitas anteriormente sobre os testes estatísticos permanecem relevantes para essas análises, e recomenda-se sua aplicação visando à obtenção de resultados mais robustos.\nOs dados ainda exibem valores outliers!\n\ndados_naive %&gt;% \n  drop_na() %&gt;% \n  ggplot(aes(alignment,weight, color=alignment))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nEsses resultados são bastante similares aos obtidos anteriormente.\n\ndados_naive %&gt;% \n  drop_na() %&gt;% \n  ggplot(aes(alignment,imc, color=alignment))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nO mesmo…\n\ndados_naive %&gt;% \n  drop_na() %&gt;% \n  ggplot(aes(alignment,n_poderes, color=alignment))+\n  geom_boxplot()+\n  theme(legend.position = \"none\")\n\n\n\n\nParece que não há diferença significativa para a variável número de poderes. Portanto, não será considerada."
  },
  {
    "objectID": "classification.html#divisão-treinoteste",
    "href": "classification.html#divisão-treinoteste",
    "title": "Classificação",
    "section": "Divisão Treino/Teste",
    "text": "Divisão Treino/Teste\nAntes de realizar a divisão dos dados, vou eliminar as variáveis relacionadas ao tipo de poder. Acredito que será mais conveniente fazer isso neste momento.\n\ndados_naive &lt;- \n  dados_naive %&gt;% \n  dplyr::select(where(~!is.logical(.)))\n\nVamos proceder com a divisão dos dados em uma proporção de 70% para treinamento e 30% para teste, mantendo uma distribuição apropriada do alvo em ambos os conjuntos.\n\nset.seed(6923)\nheroes_split &lt;- initial_split(dados_naive, strata = \"alignment\", prop = 0.7)\n\ntrain &lt;- training(heroes_split)\ntest &lt;- testing(heroes_split)\n\nVou criar os “folds” para realizar a validação cruzada dos dados. Utilizando os dados de treino e mantendo a proporção da variável alvo.\n\nset.seed(3344)\n\ncv_folds &lt;- \n  vfold_cv(data = train,v = 10,strata = \"alignment\") \n\ncv_folds\n\n#  10-fold cross-validation using stratification \n# A tibble: 10 × 2\n   splits           id    \n   &lt;list&gt;           &lt;chr&gt; \n 1 &lt;split [384/44]&gt; Fold01\n 2 &lt;split [384/44]&gt; Fold02\n 3 &lt;split [384/44]&gt; Fold03\n 4 &lt;split [384/44]&gt; Fold04\n 5 &lt;split [386/42]&gt; Fold05\n 6 &lt;split [386/42]&gt; Fold06\n 7 &lt;split [386/42]&gt; Fold07\n 8 &lt;split [386/42]&gt; Fold08\n 9 &lt;split [386/42]&gt; Fold09\n10 &lt;split [386/42]&gt; Fold10"
  },
  {
    "objectID": "classification.html#especificações-do-modelo",
    "href": "classification.html#especificações-do-modelo",
    "title": "Classificação",
    "section": "Especificações do modelo",
    "text": "Especificações do modelo\nVou elaborar as especificações do modelo, que será o Naive-Bayes, para executar a tarefa de classificação.\n\nnb_model &lt;- \n  naive_Bayes() %&gt;% \n  set_mode(\"classification\") %&gt;% \n  set_engine(\"klaR\")"
  },
  {
    "objectID": "classification.html#especificações-dos-dados",
    "href": "classification.html#especificações-dos-dados",
    "title": "Classificação",
    "section": "Especificações dos dados",
    "text": "Especificações dos dados\nAgora vou elaborar as diretrizes que serão empregadas para o processamento dos dados.\nNeste estágio:\n\nEliminação da coluna “peso”, pois apresenta uma correlação significativa com o índice de massa corporal (IMC).\nRemoção do número de poderes, uma vez que não contém informações úteis.\nOs tipos de poder já foram excluídos, pois também não são esclarecedores.\nTratamento dos valores ausentes nas colunas categóricas.\nConsolidação das classes com baixa frequência em uma categoria denominada “other”.\nAbordagem para lidar com valores ausentes nas variáveis numéricas.\nPadronização dos valores numéricos.\nAplicação da codificação “one-hot” para as variáveis categóricas.\nEliminação de colunas com variância próxima a zero e aquelas de baixa frequência.\nImplementação do método de upsampling para mitigar o desequilíbrio nas classes do nosso alvo.\n\n\n\n\nheroes_rec &lt;-\n  recipe(alignment ~ .,data = train) %&gt;% \n  step_rm(name,weight, n_poderes, height, imc) %&gt;%\n  step_impute_knn(all_nominal_predictors(), neighbors = 5) %&gt;%\n  step_other(all_nominal_predictors(), threshold = 0.1) %&gt;% \n  step_impute_mean(all_numeric_predictors()) %&gt;% \n  step_normalize(all_numeric_predictors()) %&gt;% \n  #step_BoxCox(all_numeric_predictors()) %&gt;%\n  step_dummy(all_nominal_predictors(), one_hot = TRUE) %&gt;% \n  step_nzv() %&gt;%\n  step_upsample(alignment)\n\nheroes_rec %&gt;% prep() %&gt;% bake(new_data = NULL)\n\n# A tibble: 588 × 45\n   agility accelerated_healing durability stealth energy_absorption flight\n     &lt;dbl&gt;               &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;             &lt;dbl&gt;  &lt;dbl&gt;\n 1  -0.776              -0.573     -0.791  -0.483            -0.347 -0.645\n 2  -0.776              -0.573     -0.791  -0.483            -0.347 -0.645\n 3  -0.776               1.74      -0.791  -0.483            -0.347 -0.645\n 4  -0.776              -0.573     -0.791  -0.483            -0.347 -0.645\n 5  -0.776               1.74      -0.791  -0.483            -0.347  1.55 \n 6   1.29               -0.573      1.26   -0.483            -0.347  1.55 \n 7  -0.776              -0.573     -0.791  -0.483            -0.347  1.55 \n 8  -0.776              -0.573      1.26    2.07             -0.347 -0.645\n 9  -0.776              -0.573      1.26   -0.483            -0.347 -0.645\n10  -0.776              -0.573     -0.791  -0.483            -0.347 -0.645\n# ℹ 578 more rows\n# ℹ 39 more variables: marksmanship &lt;dbl&gt;, weapons_master &lt;dbl&gt;,\n#   longevity &lt;dbl&gt;, intelligence &lt;dbl&gt;, super_strength &lt;dbl&gt;, telepathy &lt;dbl&gt;,\n#   energy_blasts &lt;dbl&gt;, stamina &lt;dbl&gt;, super_speed &lt;dbl&gt;, teleportation &lt;dbl&gt;,\n#   enhanced_senses &lt;dbl&gt;, immortality &lt;dbl&gt;, reflexes &lt;dbl&gt;,\n#   invulnerability &lt;dbl&gt;, force_fields &lt;dbl&gt;, enhanced_hearing &lt;dbl&gt;,\n#   uncommon_power &lt;dbl&gt;, alignment &lt;fct&gt;, gender_Female &lt;dbl&gt;, …"
  },
  {
    "objectID": "classification.html#criando-um-fluxo-de-trabalho",
    "href": "classification.html#criando-um-fluxo-de-trabalho",
    "title": "Classificação",
    "section": "Criando um fluxo de trabalho",
    "text": "Criando um fluxo de trabalho\nVou estabelecer o fluxo de trabalho utilizando as diretrizes definidas para o modelo e para o tratamento dos dados.\n\nheroes_wf &lt;- workflow() %&gt;% \n  add_recipe(heroes_rec) %&gt;% \n  add_model(nb_model)"
  },
  {
    "objectID": "classification.html#ajustando-o-modelo",
    "href": "classification.html#ajustando-o-modelo",
    "title": "Classificação",
    "section": "Ajustando o modelo",
    "text": "Ajustando o modelo\nVou ajustar o modelo aos dados de treinamento, utilizando os “folds” criados.\n\nnb_fit &lt;- \n  heroes_wf %&gt;% \n  fit_resamples(\n    resamples = cv_folds\n  )\n\ncollect_metrics(nb_fit)\n\n# A tibble: 2 × 6\n  .metric  .estimator  mean     n std_err .config             \n  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary     0.630    10  0.0296 Preprocessor1_Model1\n2 roc_auc  binary     0.672    10  0.0284 Preprocessor1_Model1\n\n\nRealizando previsões nos dados de teste.\n\nnb_final &lt;- heroes_wf %&gt;% \n  last_fit(\n    split = heroes_split\n  )\n\ncollect_metrics(nb_final)\n\n# A tibble: 2 × 4\n  .metric  .estimator .estimate .config             \n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary         0.598 Preprocessor1_Model1\n2 roc_auc  binary         0.626 Preprocessor1_Model1\n\nnb_test_pred &lt;- bind_cols(\n  test,\n  nb_final %&gt;% collect_predictions() %&gt;% dplyr::select(starts_with(\".pred_\"))\n)"
  },
  {
    "objectID": "classification.html#avaliando-os-resultados",
    "href": "classification.html#avaliando-os-resultados",
    "title": "Classificação",
    "section": "Avaliando os resultados",
    "text": "Avaliando os resultados\n\ntable(\"predicted class\" = nb_test_pred$.pred_class,\n      \"observed class\" = nb_test_pred$alignment)\n\n               observed class\npredicted class bad good\n           bad   28   44\n           good  30   82\n\n\nO modelo apresentou um desempenho insatisfatório, especialmente na previsão dos indivíduos classificados como “bad”, onde o número de erros é superior ao de acertos. Isso mostra um viés para a categoria good, que é a classe dominante nos registros. Vale ressaltar que um dos passos que realizei durante o preprocessamento dos dados foi a etapa de “upsampling” com o objetivo de melhorar o equilíbrio entre as classes.\n\nnb_test_pred %&gt;% \n    roc_curve(\n    truth = alignment,\n    .pred_good\n  ) %&gt;% \n  autoplot()\n\n\n\n\n\nnb_test_pred %&gt;% \n    roc_curve(\n    truth = alignment,\n    .pred_bad\n  ) %&gt;% \n  autoplot()\n\n\n\n\nOs resultados das curvas ROC indicam que, no que se refere aos valores da categoria “good”, o modelo não apresenta um desempenho significativamente melhor do que um palpite aleatório. Por outro lado, em relação à categoria “bad”, o modelo está produzindo resultados contrários ao esperado, resultando em erros substanciais de classificação."
  },
  {
    "objectID": "classification.html#especificações-do-modelo-1",
    "href": "classification.html#especificações-do-modelo-1",
    "title": "Classificação",
    "section": "Especificações do modelo",
    "text": "Especificações do modelo\nAqui, utilizei funções que automatizam a afinação de hiperparâmetros, como o número de árvores, o número de pontos por nó e a quantidade de preditores que serão selecionados aleatoriamente em cada divisão durante a criação dos modelos de árvore.\n\nxgb_spec &lt;- \n  boost_tree(\n    trees = tune(),\n    min_n = tune(),\n    mtry = tune(),\n    learn_rate = 0.01\n  ) %&gt;% \n  set_engine(\"xgboost\") %&gt;% \n  set_mode(\"classification\")"
  },
  {
    "objectID": "classification.html#criando-um-fluxo-de-trabalho-1",
    "href": "classification.html#criando-um-fluxo-de-trabalho-1",
    "title": "Classificação",
    "section": "Criando um fluxo de trabalho",
    "text": "Criando um fluxo de trabalho\nPara estabelecer o fluxo de trabalho, vou empregar a mesma abordagem que foi criada para o modelo Naive-Bayes, realizando modificações apenas nas especificações destinadas ao modelo em questão.\n\nxgb_wf &lt;- \n  workflow(heroes_rec,xgb_spec)\n\nComo os folders de cross validação já foram criados podemos ir diréto para o ajuste do modelo.\nPara realizar a afinação dos hiperparâmetros do modelo, vou empregar a função tune_race_anova(), a qual utiliza um método RACE que elimina os modelos que não estão apresentando bom desempenho. Vou usar um valor de 30 para o grid search\n\n#library(finetune)\ndoParallel::registerDoParallel()\nset.seed(963)\nxgb_rs &lt;- \nfinetune::tune_race_anova(\n  xgb_wf,\n  resamples = cv_folds,\n  grid = 30,\n  control = control_race(verbose_elim = TRUE)\n)\nxgb_rs\n\n# Tuning results\n# 10-fold cross-validation using stratification \n# A tibble: 10 × 5\n   splits           id     .order .metrics          .notes          \n   &lt;list&gt;           &lt;chr&gt;   &lt;int&gt; &lt;list&gt;            &lt;list&gt;          \n 1 &lt;split [384/44]&gt; Fold01      3 &lt;tibble [60 × 7]&gt; &lt;tibble [0 × 3]&gt;\n 2 &lt;split [384/44]&gt; Fold04      1 &lt;tibble [60 × 7]&gt; &lt;tibble [0 × 3]&gt;\n 3 &lt;split [386/42]&gt; Fold08      2 &lt;tibble [60 × 7]&gt; &lt;tibble [0 × 3]&gt;\n 4 &lt;split [386/42]&gt; Fold10      4 &lt;tibble [54 × 7]&gt; &lt;tibble [0 × 3]&gt;\n 5 &lt;split [386/42]&gt; Fold05      5 &lt;tibble [54 × 7]&gt; &lt;tibble [0 × 3]&gt;\n 6 &lt;split [384/44]&gt; Fold02      6 &lt;tibble [52 × 7]&gt; &lt;tibble [0 × 3]&gt;\n 7 &lt;split [386/42]&gt; Fold09      7 &lt;tibble [50 × 7]&gt; &lt;tibble [0 × 3]&gt;\n 8 &lt;split [386/42]&gt; Fold06      8 &lt;tibble [44 × 7]&gt; &lt;tibble [0 × 3]&gt;\n 9 &lt;split [384/44]&gt; Fold03      9 &lt;tibble [40 × 7]&gt; &lt;tibble [0 × 3]&gt;\n10 &lt;split [386/42]&gt; Fold07     10 &lt;tibble [32 × 7]&gt; &lt;tibble [0 × 3]&gt;"
  },
  {
    "objectID": "classification.html#avaliando-os-resultados-1",
    "href": "classification.html#avaliando-os-resultados-1",
    "title": "Classificação",
    "section": "avaliando os resultados",
    "text": "avaliando os resultados\n\nplot_race(xgb_rs)\n\n\n\n\n\ncollect_metrics(xgb_rs)\n\n# A tibble: 32 × 9\n    mtry trees min_n .metric  .estimator  mean     n std_err .config            \n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;              \n 1     1  1417    24 accuracy binary     0.663    10  0.0205 Preprocessor1_Mode…\n 2     1  1417    24 roc_auc  binary     0.674    10  0.0254 Preprocessor1_Mode…\n 3     4  1743    27 accuracy binary     0.654    10  0.0215 Preprocessor1_Mode…\n 4     4  1743    27 roc_auc  binary     0.678    10  0.0272 Preprocessor1_Mode…\n 5     6   496    30 accuracy binary     0.642    10  0.0248 Preprocessor1_Mode…\n 6     6   496    30 roc_auc  binary     0.671    10  0.0274 Preprocessor1_Mode…\n 7    10   647    21 accuracy binary     0.659    10  0.0174 Preprocessor1_Mode…\n 8    10   647    21 roc_auc  binary     0.669    10  0.0278 Preprocessor1_Mode…\n 9    12   849    13 accuracy binary     0.668    10  0.0174 Preprocessor1_Mode…\n10    12   849    13 roc_auc  binary     0.677    10  0.0263 Preprocessor1_Mode…\n# ℹ 22 more rows\n\n\nSelecionando o melhor resultado obtido a partir do processo de ajuste de hiperparâmetros, vou utilizá-lo para realizar o ajuste final do modelo aos dados.\n\nxgb_last &lt;- \nxgb_wf %&gt;% \n  finalize_workflow(select_best(xgb_rs, \"accuracy\")) %&gt;% \n  last_fit(heroes_split)\n\nVou avaliar novamente as métricas de desempenho do modelo.\n\ncollect_metrics(xgb_last)\n\n# A tibble: 2 × 4\n  .metric  .estimator .estimate .config             \n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary         0.592 Preprocessor1_Model1\n2 roc_auc  binary         0.646 Preprocessor1_Model1\n\n\n\ncollect_predictions(xgb_last) %&gt;% \n  conf_mat(alignment,.pred_class)\n\n          Truth\nPrediction bad good\n      bad   32   49\n      good  26   77\n\n\nLamentavelmente, este modelo não demonstrou uma melhoria significativa em relação ao anterior. É provável que eu devesse reconsiderar as características selecionadas para a modelagem."
  },
  {
    "objectID": "classification.html#avaliando-os-recursos-mais-importantes.",
    "href": "classification.html#avaliando-os-recursos-mais-importantes.",
    "title": "Classificação",
    "section": "Avaliando os recursos mais importantes.",
    "text": "Avaliando os recursos mais importantes.\nAgora, vamos investigar quais variáveis estão sendo consideradas as mais importantes pelo modelo. Isso nos permitirá compreender quais características estão exercendo maior influência nas previsões e pode nos fornecer insights para melhorar o desempenho do modelo.\n\n#caminho_arquivo &lt;- \"C:/Users/marin/Downloads/vip_0.4.0.tar.gz\"\n#install.packages(caminho_arquivo, repos = NULL, type = \"source\")\n\nlibrary(vip)\n\nxgb_last %&gt;% \n  extract_fit_engine() %&gt;% \n  vip()\n\n\n\n\nApós a realização de testes…\nAs variáveis que se destacam como mais relevantes são IMC e altura. No entanto, elas não pareciam tão informativas durante a EDA. Teria sido prudente realizar algum teste estatístico para verificar isso.\nVou agora remover essas variáveis e verificar se há alguma melhoria nos modelos…\nApós a eliminação das colunas mencionadas, os resultados estão sugerindo que o peso dos personagens desempenha um papel importante. Lembrando que IMC e peso são altamente correlacionadas. (O modelo não melhorou).\nUma alternativa adicional, que não foi explorada, é ajustar o modelo utilizando somente as variáveis mais relevantes que foram identificadas. Isso poderia nos fornecer uma abordagem mais focada e possivelmente resultar em um melhor desempenho do modelo."
  },
  {
    "objectID": "classification.html#respostas",
    "href": "classification.html#respostas",
    "title": "Classificação",
    "section": "Respostas",
    "text": "Respostas\n\nQuais hipóteses assumimos ao usar o algoritmo Naive Bayes?\n\nA premissa fundamental do Naive Bayes é a suposição de independência entre as características (atributos), condicionada ao valor da classe. Isso implica que a existência ou ausência de uma característica não é influenciada pela presença ou ausência de outras características.\nOutras suposições incluem a igual relevância de todas as características para a classificação.\n(Nenhuma delas foi atendida pelos dados utilizados)\n\nComo as características específicas deste conjunto de dados influenciam suas escolhas e resultados de modelagem?\n\nConfesso que a pergunta não ficou muito clara para mim… No que diz respeito aos resultados da modelagem, eles impactam de forma desfavorável. Além de não atenderem aos pressupostos do modelo, também estão repletos de desafios, como valores ausentes e desequilíbrio entre as classes.\n\nComo você avalia os resultados?\n\nOs resultados não foram favoráveis, resultando em um modelo tendencioso.\n\nAgora sinta-se à vontade para executar o algoritmo de classificação que julgar mais adequado para essa tarefa.\n\nO que motivou sua escolha do algoritmo?\nMinha escolha foi o algoritmo XGBoost, uma ferramenta poderosa e versátil. O XGBoost tem a capacidade de criar modelos complexos capazes de capturar relações não-lineares entre as características. Este algoritmo é eficaz ao lidar com diversos tipos de dados e demonstra robustez em relação a valores discrepantes (outliers) e classes desbalanceadas. Além disso, o XGBoost incorpora mecanismos internos para tratar valores ausentes, o que reduz a necessidade de pré-processamento intensivo. Em resumo, essa escolha se alinha com várias características do conjunto de dados em questão, tornando o XGBoost uma opção indicada.\n\nComo esse algoritmo se compara ao Naive Bayes em relação às suposições e resultados da modelagem?\n\nO XGBoost não faz suposições específicas sobre a distribuição dos dados. Ele constrói modelos complexos que podem se ajustar a padrões variados.O Naive Bayes faz suposições sobre a independência condicional entre recursos, o que pode não ser verdadeiro em todos os casos. Essas suposições podem afetar seu desempenho em dados complexos."
  }
]